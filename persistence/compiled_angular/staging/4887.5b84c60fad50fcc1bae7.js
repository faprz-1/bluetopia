(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[4887],{6211:(e,t,i)=>{"use strict";i.d(t,{p:()=>g});var n=i(7368),o=i(1392),s=i(5470),r=i(1116);const a=["libraryFileSelectorModal"],l=function(e){return{selected:e}};function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",12),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().ToggleFile(t)}),n._UZ(1,"i",13),n._uU(2),n.qZA()}if(2&e){const e=t.$implicit;n.Q6J("ngClass",n.VKq(2,l,e.selected)),n.xp6(2),n.hij(" ",e.name," ")}}const d=function(){return{backdrop:"static",keyboard:!1}};let g=(()=>{class e{constructor(e){this.api=e,this.onFilesSelectd=new n.vpe,this.user=null,this.files=[]}ngOnInit(){this.user=this.api.GetUser(),this.GetLibraryFiles()}OpenModal(){var e;null===(e=this.modal)||void 0===e||e.show()}CloseModal(){var e;null===(e=this.modal)||void 0===e||e.hide()}GetLibraryFiles(){this.api.Get(`/Usuarios/${this.user.schoolId}/FileLibrary`).subscribe(e=>{this.files=e},e=>{console.error("Error getting the files",e)})}ToggleFile(e){e.selected=!e.selected}SelectFiles(){this.onFilesSelectd.emit(this.files.filter(e=>e.selected))}Reset(){this.files.forEach(e=>e.selected=!1)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(o.sM))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-library-file-selector-modal"]],viewQuery:function(e,t){if(1&e&&n.Gf(a,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modal=e.first)}},outputs:{onFilesSelectd:"onFilesSelectd"},decls:15,vars:3,consts:[["bsModal","","tabindex","-1","role","dialog","aria-labelledby","libraryFileSelectorModal",1,"modal","fade",3,"config"],["libraryFileSelectorModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[1,"text","text-center"],[1,"files"],["class","file clickeable",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer","justify-content-around"],[1,"btn","btn-bigger","btn-outline-primary","modal-btn",3,"click"],[1,"btn","btn-bigger","btn-primary","modal-btn",3,"click"],[1,"file","clickeable",3,"ngClass","click"],[1,"zmdi","zmdi-file","zmdi-hc-2x","mr-3"]],template:function(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",0,1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n._uU(7," Selecciona los archivos que deseas adjuntar "),n.qZA(),n.TgZ(8,"div",7),n.YNc(9,c,3,4,"div",8),n.qZA(),n.qZA(),n.TgZ(10,"div",9),n.TgZ(11,"button",10),n.NdJ("click",function(){return n.CHM(e),n.MAs(1).hide(),t.Reset()}),n._uU(12," Cancelar "),n.qZA(),n.TgZ(13,"button",11),n.NdJ("click",function(){n.CHM(e);const i=n.MAs(1);return t.SelectFiles(),i.hide()}),n._uU(14," Aceptar "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}2&e&&(n.Q6J("config",n.DdM(2,d)),n.xp6(9),n.Q6J("ngForOf",t.files))},directives:[s.oB,r.sg,r.mk],styles:[".files[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap;max-height:50vh;overflow-y:auto}.files[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.8rem 1.2rem;margin:.5rem;flex-grow:1;border-radius:12px;border:2px solid #587594}.selected[_ngcontent-%COMP%]{border:4px solid #1081fb!important}"]}),e})()},5110:(e,t,i)=>{"use strict";i.d(t,{N:()=>c});var n=i(1116),o=i(4391),s=i(1041),r=i(6050),a=i(5470),l=(i(6211),i(7368));let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.u5,n.ez,o.A0,s.UX,r.G,a.zk.forRoot()]]}),e})()},4887:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EventDayModule:()=>w});var n=i(1116),o=i(2894),s=i(4391),r=i(1041),a=i(6050),l=i(5470),c=i(9355),d=i(529),g=i(7368),u=i(1392),f=i(407),p=i(6189),m=i(2722);const h=["deleteEventConfirmationModal"];function v(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(3).DownloadFile(t)}),g._UZ(1,"i",35),g._uU(2),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(2),g.hij(" ",e.file.name," ")}}function b(e,t){if(1&e&&(g.TgZ(0,"div",29),g.TgZ(1,"label",30),g.TgZ(2,"b"),g._uU(3,"Recursos"),g.qZA(),g.qZA(),g.TgZ(4,"div",32),g.YNc(5,v,3,1,"div",33),g.qZA(),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(5),g.Q6J("ngForOf",e.resources)}}function Z(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",23),g.TgZ(1,"div",24),g.TgZ(2,"span",25),g._uU(3),g.qZA(),g.TgZ(4,"div",26),g.TgZ(5,"img",27),g.NdJ("click",function(){const t=g.CHM(e).$implicit,i=g.oxw(),n=g.MAs(20);return i.selectedEvent=t,n.show()}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",28),g._uU(7," Categor\xeda "),g.qZA(),g.TgZ(8,"div",18),g.TgZ(9,"span"),g._uU(10),g.qZA(),g.qZA(),g.TgZ(11,"div",29),g.TgZ(12,"label",30),g.TgZ(13,"b"),g._uU(14,"Instrucciones"),g.qZA(),g.qZA(),g.TgZ(15,"span"),g._uU(16),g.qZA(),g.qZA(),g.YNc(17,b,6,1,"div",31),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw();g.xp6(3),g.AsE(" ",null==i.strategy||null==i.strategy.strategyGroup||null==i.strategy.strategyGroup.grade?null:i.strategy.strategyGroup.grade.name,"\xb0",null==i.strategy||null==i.strategy.strategyGroup||null==i.strategy.strategyGroup.group?null:i.strategy.strategyGroup.group.name," "),g.xp6(7),g.Oqu(e.name),g.xp6(6),g.Oqu(e.instructions?e.instructions:"Sin instrucciones"),g.xp6(1),g.Q6J("ngIf",e.resources.length>0)}}const y=function(){return{backdrop:"static",keyboard:!1}};let x=(()=>{class e{constructor(e,t,i,n,o){this.api=e,this.nav=t,this.activatedRoute=i,this.toast=n,this.downloadService=o,this.strategyId=null,this.date=null,this.strategy=null,this.selectedEvent=null,this.events=[],this.loading={deleting:!1}}get formatedDate(){return this.date?c(this.date).tz(d.N.timeZone).format("DD/MM/YY"):""}ngOnInit(){this.GetParams(),this.ThatDayHasNotPassed()}ThatDayHasNotPassed(){let e=c(this.date).tz(d.N.timeZone),t=c();return!(e.isBefore(t,"day")&&!e.isSame(t,"day"))}GetParams(){this.activatedRoute.params.subscribe(e=>{this.strategyId=e.strategyId,this.date=e.date,this.GetStrategy()})}GoBack(){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/calendario`)}GetStrategy(){this.api.Get(`/Strategies/${this.strategyId}`).subscribe(e=>{var t;this.strategy=e,(null===(t=null==e?void 0:e.events)||void 0===t?void 0:t.length)&&(this.events=e.events.filter(e=>!!e.date&&e.date.includes(c(this.date).tz(d.N.timeZone).format("YYYY-MM-DD"))),this.SanitizeEvents())},e=>{console.error("Error getting activities",e)})}RemoveFromArray(){let e=this.events.filter(e=>e!=this.selectedEvent);this.events=e}DeleteEvent(){this.loading.deleting=!0,this.api.Delete(`/Events/${this.selectedEvent.id}`).subscribe(e=>{var t;null===(t=this.deleteEventConfirmationModal)||void 0===t||t.hide(),this.GetStrategy(),this.RemoveFromArray(),this.loading.deleting=!1},e=>{console.error("Error deleting event",e),this.toast.ShowSuccess("Evento eliminado correctamente"),this.loading.deleting=!1})}GoToCreateEventOrProduct(){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/calendario/${this.date}/crear`)}GoToCreateActivity(){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/calendario/${this.date}/crear/actividad`)}SanitizeEvents(){this.events.forEach(e=>{e.name=e.name?e.name:e.parcialProduct.name,e.instructions=e.instructions?e.instructions:e.parcialProduct.instructions;let t=this.strategy.parcialProducts.filter(t=>e.id==t.eventId);e.resources=t&&0!=t.length?t[0].resources:[]})}DownloadFile(e){this.downloadService.Download(e.file.URL,e.file.name)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(u.sM),g.Y36(f.f),g.Y36(o.gz),g.Y36(p.k),g.Y36(m.p))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-event-day"]],viewQuery:function(e,t){if(1&e&&g.Gf(h,5),2&e){let e;g.iGM(e=g.CRH())&&(t.deleteEventConfirmationModal=e.first)}},decls:34,vars:9,consts:[[1,"content"],[1,"row-header"],[1,"title"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"back-section"],["src","assets/icons/back-arrow.png","alt","back-arrow",1,"back-icon","clickeable",3,"click"],[1,"event-date"],[1,"d-flex","flex-column","align-items-center","w-100",2,"gap","24px"],[1,"d-flex","align-items-center","justify-content-between","w-100",2,"gap","24px"],["class","event-card",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","deleteEventConfirmationModal",1,"modal","fade",3,"config"],["deleteEventConfirmationModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body","finish-modal-content"],[1,"d-flex","flex-column",2,"gap","12px"],[1,""],[1,"title","text-danger"],[1,"d-flex","align-items-center","justify-content-end","w-100",2,"gap","48px"],[1,"btn","btn-secondary","w-50",3,"disabled","click"],[1,"btn","btn-primary","w-50",3,"disabled","click"],[1,"event-card"],[1,"d-flex","align-items-center","justify-content-between","align-self-stretch"],[1,"text-primary","text-uppercase"],[1,"d-flex","align-items-center",2,"gap","12px"],["src","assets/icons/delete.svg",1,"clickeable",3,"click"],[1,"text-success"],[1,"d-flex","flex-column"],[1,"text-primary","mb-1"],["class","d-flex flex-column",4,"ngIf"],[1,"flex-resources"],["class","resource clickeable",3,"click",4,"ngFor","ngForOf"],[1,"resource","clickeable",3,"click"],[1,"zmdi","zmdi-file","zmdi-hc-2x","text-primary","mr-3"]],template:function(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._UZ(2,"div"),g.TgZ(3,"div",2),g._uU(4," Calendario "),g.qZA(),g._UZ(5,"div"),g.qZA(),g.TgZ(6,"div",3),g.TgZ(7,"div",4),g.TgZ(8,"img",5),g.NdJ("click",function(){return t.GoBack()}),g.qZA(),g.qZA(),g.TgZ(9,"div",6),g._uU(10),g.qZA(),g._UZ(11,"div"),g.qZA(),g.TgZ(12,"div",7),g.TgZ(13,"div",8),g.YNc(14,Z,18,5,"div",9),g.qZA(),g.TgZ(15,"button",10),g.NdJ("click",function(){return t.GoToCreateEventOrProduct()}),g._uU(16," Agregar evento a un producto parcial o actividad "),g.qZA(),g.TgZ(17,"button",11),g.NdJ("click",function(){return t.GoToCreateActivity()}),g._uU(18," Agregar actividad "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(19,"div",12,13),g.TgZ(21,"div",14),g.TgZ(22,"div",15),g.TgZ(23,"div",16),g.TgZ(24,"div",17),g.TgZ(25,"div",18),g._uU(26),g.qZA(),g.TgZ(27,"div",19),g._uU(28," Al eliminarlo ya no podr\xe1 recuperarlo "),g.qZA(),g.TgZ(29,"div",20),g.TgZ(30,"button",21),g.NdJ("click",function(){return g.CHM(e),g.MAs(20).hide()}),g._uU(31," No, cancelar "),g.qZA(),g.TgZ(32,"button",22),g.NdJ("click",function(){return t.DeleteEvent()}),g._uU(33," Si, eliminar "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(10),g.hij(" ",t.formatedDate," "),g.xp6(4),g.Q6J("ngForOf",t.events),g.xp6(1),g.Q6J("disabled",0==t.ThatDayHasNotPassed()),g.xp6(2),g.Q6J("disabled",0==t.ThatDayHasNotPassed()),g.xp6(2),g.Q6J("config",g.DdM(8,y)),g.xp6(7),g.hij(' \xbfEst\xe1 seguro/a de que desea eliminar el evento "',null==t.selectedEvent?null:t.selectedEvent.name,'"? '),g.xp6(4),g.Q6J("disabled",t.loading.deleting),g.xp6(2),g.Q6J("disabled",t.loading.deleting))},directives:[n.sg,l.oB,n.O5],styles:[".title[_ngcontent-%COMP%]{color:#26d7a4}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:#587594;margin-bottom:.75rem}.event-date[_ngcontent-%COMP%]{width:155px;height:40px;align-items:center;grid-gap:10px;gap:10px;flex-shrink:0;border-radius:6px 6px 0 0;background:var(--green-1,#26d7a4);color:#fff;font-size:28px;font-weight:700}.event-card[_ngcontent-%COMP%], .event-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;font-family:Mulish;font-style:normal;line-height:normal}.event-card[_ngcontent-%COMP%]{width:400px;max-width:100%;padding:12px;align-items:flex-start;grid-gap:12px;gap:12px;border-radius:6px;border:1px solid var(--gray-2,#758ca6);color:var(--gray-1,#3d5e81);font-size:16px;font-weight:500}.btn[_ngcontent-%COMP%]{max-width:-webkit-max-content;max-width:max-content}.finish-modal-content[_ngcontent-%COMP%]{display:inline-flex;padding:44px 39px;flex-direction:column;align-items:center;grid-gap:24px;gap:24px;color:var(--gray-1,#3d5e81);font-family:Mulish;font-size:24px;font-style:normal;font-weight:400;line-height:normal}.finish-modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{align-self:stretch!important}.finish-modal-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--blue-dark,#2369b5);text-align:center;font-family:Mulish;font-size:32px;font-style:normal;font-weight:700;line-height:normal}.clickable[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var T=i(5110);const A=[{path:"",component:x}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[r.u5,n.ez,s.A0,r.UX,a.G,l.zk.forRoot(),T.N,o.Bz.forChild(A)]]}),e})()},2722:(e,t,i)=>{"use strict";i.d(t,{p:()=>r});var n=i(7368),o=i(1392),s=i(2693);let r=(()=>{class e{constructor(e,t){this.api=e,this.http=t}GetNormalByHTTP(e){return this.http.get(e,{responseType:"blob"})}GetByHTTP(e){return this.http.get(this.api.GetBaseURL()+e,{responseType:"blob"})}Download(e,t=""){this.GetByHTTP(e).subscribe(e=>{const i=document.createElement("a"),n=URL.createObjectURL(e);i.setAttribute("href",n),i.setAttribute("download",t),i.click(),i.remove()})}DownloadWithoutApi(e,t=""){this.GetNormalByHTTP(e).subscribe(e=>{const i=document.createElement("a"),n=URL.createObjectURL(e);i.setAttribute("href",n),i.setAttribute("download",t),i.click(),i.remove()})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(o.sM),n.LFG(s.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);