(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[4795],{6158:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var o=r(5821),n=r(7368),i=r(1116);function a(e,t){if(1&e&&(n.TgZ(0,"div",1),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij(" ",null==e.errorMessage?null:e.errorMessage.label,"\n")}}let s=(()=>{class e{constructor(){}ngOnInit(){}get errorMessage(){var e,t,r,n;for(let i in null===(e=this.control)||void 0===e?void 0:e.errors)if((null===(t=this.control)||void 0===t?void 0:t.errors.hasOwnProperty(i))&&(null===(r=this.control)||void 0===r?void 0:r.touched))return o.R.GetValidatorErrorMessage(i,null===(n=this.control)||void 0===n?void 0:n.errors[i]);return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-control-messages"]],inputs:{control:"control"},decls:1,vars:1,consts:[["class","color-red",4,"ngIf"],[1,"color-red"]],template:function(e,t){1&e&&n.YNc(0,a,2,1,"div",0),2&e&&n.Q6J("ngIf",null!==t.errorMessage)},directives:[i.O5],styles:[""]}),e})()},7764:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var o=r(7368),n=r(1116);function i(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){const e=t.$implicit,r=t.last;o.xp6(1),o.Oqu(e.name+(r?"":","))}}function a(e,t){if(1&e&&(o.TgZ(0,"span",13),o._uU(1),o.qZA()),2&e){const e=t.$implicit,r=t.last;o.xp6(1),o.Oqu((null==e.grade?null:e.grade.name)+(null==e.group?null:e.group.name)+(r?"":","))}}function s(e,t){if(1&e&&(o.TgZ(0,"div",3),o.TgZ(1,"div",4),o._UZ(2,"i",11),o.qZA(),o.TgZ(3,"div",6),o.YNc(4,a,2,1,"span",12),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Q6J("ngForOf",null==e.teacher?null:e.teacher.teacherGroups)}}let l=(()=>{class e{constructor(){this.teacher=null,this.showGroups=!1,this.onDelete=new o.vpe}ngOnInit(){}OnDeletedPressed(e){e.stopPropagation(),this.onDelete.emit(this.teacher)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-teacher-card"]],inputs:{teacher:"teacher",showGroups:"showGroups"},outputs:{onDelete:"onDelete"},decls:21,vars:4,consts:[[1,"card","position-relative"],[1,"delete","clickeable",3,"click"],[1,"card-body"],[1,"text-row"],[1,"img-container"],["src","assets/icons/user-green.png","alt","user"],[1,"text-row-data"],["src","assets/icons/mail-green.png","alt","mail"],["src","assets/icons/book-green.png","alt","book"],[4,"ngFor","ngForOf"],["class","text-row",4,"ngIf"],[1,"zmdi","zmdi-accounts-outline"],["class","text-uppercase",4,"ngFor","ngForOf"],[1,"text-uppercase"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"span",1),o.NdJ("click",function(e){return t.OnDeletedPressed(e)}),o._uU(2," \xd7 "),o.qZA(),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o._UZ(6,"img",5),o.qZA(),o.TgZ(7,"div",6),o.TgZ(8,"span"),o._uU(9),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"div",3),o.TgZ(11,"div",4),o._UZ(12,"img",7),o.qZA(),o.TgZ(13,"div",6),o._uU(14),o.qZA(),o.qZA(),o.TgZ(15,"div",3),o.TgZ(16,"div",4),o._UZ(17,"img",8),o.qZA(),o.TgZ(18,"div",6),o.YNc(19,i,2,1,"span",9),o.qZA(),o.qZA(),o.YNc(20,s,5,1,"div",10),o.qZA(),o.qZA()),2&e&&(o.xp6(9),o.Oqu(null==t.teacher?null:t.teacher.name),o.xp6(5),o.hij(" ",null==t.teacher?null:t.teacher.email," "),o.xp6(5),o.Q6J("ngForOf",null==t.teacher?null:t.teacher.subjects),o.xp6(1),o.Q6J("ngIf",t.showGroups))},directives:[n.sg,n.O5],styles:[".card[_ngcontent-%COMP%]{padding:1.2rem 4rem;border:2px solid #2ed2a3;border-radius:12px;color:#758ca6;font-size:1.5rem;font-weight:500;width:-webkit-max-content;width:max-content;max-width:100%;margin-bottom:0}.card-body[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;justify-content:space-between}.text-row[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:30px;margin-bottom:10px}.text-row[_ngcontent-%COMP%]   .text-row-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;flex-grow:1;flex-wrap:wrap;line-height:30px}.text-row[_ngcontent-%COMP%]   .text-row-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.3rem}.text-row[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:-webkit-min-content;height:min-content;padding-right:12px;text-align:left}.text-row[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:-webkit-max-content;width:max-content;height:-webkit-max-content;height:max-content}.delete[_ngcontent-%COMP%]{font-size:2rem;position:absolute;top:10px;right:15px;color:var(--danger)}.zmdi[_ngcontent-%COMP%]{color:#2ed2a3}"]}),e})()},7169:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});var o=r(1116),n=r(1041),i=r(6050),a=(r(7764),r(7368));let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.u5,o.ez,n.UX,i.G]]}),e})()},4795:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TeachersModule:()=>T});var o=r(1116),n=r(2894),i=r(4391),a=r(1041),s=r(6050),l=r(7368),c=r(1392),u=r(407),d=r(5470),g=r(6189),m=r(7764),h=r(6158);function p(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",13),l.TgZ(1,"app-teacher-card",14),l.NdJ("click",function(){const t=l.CHM(e).$implicit,r=l.oxw(2),o=l.MAs(16);return r.EditTeacher(o,t)}),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(1),l.Q6J("teacher",e)("showGroups",!0)}}function Z(e,t){if(1&e&&(l.TgZ(0,"div",11),l.YNc(1,p,2,2,"div",12),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.teachers)}}function v(e,t){1&e&&(l.TgZ(0,"div",15),l._uU(1," No hay maestros registrados, registre algunos con el bot\xf3n de "),l.TgZ(2,"b"),l._uU(3,"Agregar"),l.qZA(),l.qZA())}function f(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span",43),l.TgZ(1,"div",44),l.TgZ(2,"span",45),l._uU(3),l.qZA(),l.TgZ(4,"i",46),l.NdJ("click",function(){const t=l.CHM(e).index;return l.oxw(2).DeleteGroup(t)}),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(3),l.hij(" ",(null!=e.grade&&e.grade.name?e.grade.name:e.grade)+(null!=e.group&&e.group.name?e.group.name:e.group)," ")}}function b(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",16),l.TgZ(1,"h2",17),l._uU(2,"Editar maestro"),l.qZA(),l.qZA(),l.TgZ(3,"div",18),l.TgZ(4,"div",19),l.TgZ(5,"form",20),l.TgZ(6,"div",11),l.TgZ(7,"div",21),l.TgZ(8,"div",22),l.TgZ(9,"div",23),l._UZ(10,"img",24),l.qZA(),l._UZ(11,"input",25),l.qZA(),l._UZ(12,"app-control-messages",26),l.qZA(),l.TgZ(13,"div",21),l.TgZ(14,"div",22),l.TgZ(15,"div",23),l._UZ(16,"img",27),l.qZA(),l._UZ(17,"ng-select",28),l.qZA(),l._UZ(18,"app-control-messages",26),l.qZA(),l.TgZ(19,"div",21),l.TgZ(20,"div",22),l.TgZ(21,"div",23),l._UZ(22,"img",29),l.qZA(),l._UZ(23,"input",30),l.qZA(),l._UZ(24,"app-control-messages",26),l.qZA(),l._UZ(25,"div",21),l.TgZ(26,"div",31),l.TgZ(27,"div",22),l.TgZ(28,"div",23),l._UZ(29,"img",32),l.qZA(),l._UZ(30,"input",33),l.qZA(),l._UZ(31,"app-control-messages",26),l.qZA(),l.TgZ(32,"div",31),l.TgZ(33,"div",22),l.TgZ(34,"div",23),l._UZ(35,"img",34),l.qZA(),l._UZ(36,"input",35),l.qZA(),l._UZ(37,"app-control-messages",26),l.qZA(),l.TgZ(38,"div",31),l.TgZ(39,"button",36),l.NdJ("click",function(){return l.CHM(e),l.oxw().AddGroup()}),l._uU(40," Asignar grupo "),l.qZA(),l.qZA(),l.TgZ(41,"div",37),l.TgZ(42,"div",22),l.TgZ(43,"label",38),l._uU(44,"Grupos asignados"),l.qZA(),l.YNc(45,f,5,1,"span",39),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(46,"div",40),l.TgZ(47,"button",41),l.NdJ("click",function(){return l.CHM(e),l.oxw().CloseModal()}),l._uU(48," Cancelar "),l.qZA(),l.TgZ(49,"button",42),l.NdJ("click",function(){return l.CHM(e),l.oxw().SaveTeacher()}),l._uU(50," Guardar "),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();let t,r;l.xp6(5),l.Q6J("formGroup",e.teacherForm),l.xp6(7),l.Q6J("control",e.teacherForm.get("name")),l.xp6(5),l.Q6J("items",e.subjects)("multiple",!0)("closeOnSelect",!1),l.xp6(1),l.Q6J("control",e.teacherForm.get("subjects")),l.xp6(6),l.Q6J("control",e.teacherForm.get("email")),l.xp6(7),l.Q6J("control",e.teacherForm.get("grade")),l.xp6(6),l.Q6J("control",e.teacherForm.get("group")),l.xp6(2),l.Q6J("disabled",!(null!=(t=e.teacherForm.get("group"))&&t.value&&null!=(t=e.teacherForm.get("grade"))&&t.value)),l.xp6(6),l.Q6J("ngForOf",null==(r=e.teacherForm.get("teacherGroups"))?null:r.value)}}let x=(()=>{class e{constructor(e,t,r,o){this.api=e,this.nav=t,this.modalService=r,this.toast=o,this.modalRef=null,this.teachers=[],this.subjects=[],this.schoolId=0,this.teacherToEdit=null,this.groupsInput="",this.teacherForm=new a.cw({id:new a.NI("",[a.kI.required]),name:new a.NI("",[a.kI.required]),email:new a.NI("",[a.kI.required,a.kI.email]),teacherGroups:new a.NI([],[a.kI.required]),grade:new a.NI("",[]),group:new a.NI("",[]),subjects:new a.NI([],[a.kI.required]),extracurricular:new a.NI(!1,[a.kI.required])})}ngOnInit(){var e;this.schoolId=null===(e=this.api.GetUser())||void 0===e?void 0:e.schoolId,this.GetSubjects(),this.GetSchoolTeachers()}OpenModal(e){this.modalRef=this.modalService.show(e,{backdrop:"static"})}CloseModal(){this.modalRef&&this.modalRef.hide()}GetSubjects(){this.api.Get("/Subjects").subscribe(e=>{this.subjects=e},e=>{console.error("Error getting the subjects",e)})}GetSchoolTeachers(){this.api.Get(`/Teachers/OfSchool/${this.schoolId}`).subscribe(e=>{this.teachers=e},e=>{console.error("Error getting school teachers",e)})}EditTeacher(e,t){if(this.teacherForm.controls.id.setValue(t.id),this.teacherForm.controls.name.setValue(t.name),this.teacherForm.controls.email.setValue(t.email),this.teacherForm.controls.subjects.setValue(t.subjects),this.teacherForm.controls.extracurricular.setValue(t.extracurricular),t.teacherGroups&&t.teacherGroups.length){let e=t.teacherGroups.map(e=>Object.assign({},e));this.teacherForm.controls.teacherGroups.setValue(e)}this.teacherForm.updateValueAndValidity(),this.OpenModal(e)}AddGroup(){let e=this.teacherForm.controls.teacherGroups.value,t={grade:this.teacherForm.controls.grade.value,group:this.teacherForm.controls.group.value};Array.isArray(e)?e.push(t):e=[t],this.teacherForm.controls.grade.setValue(""),this.teacherForm.controls.group.setValue(""),this.teacherForm.controls.teacherGroups.setValue(e),this.teacherForm.updateValueAndValidity()}DeleteGroup(e){this.teacherForm.controls.teacherGroups.value.splice(e,1)}SaveTeacher(){let e=this.teacherForm.value;this.api.Patch(`/Teachers/${e.id}`,{teacher:e}).subscribe(e=>{this.CloseModal(),this.toast.ShowSuccess("Maestro actualizado correctamente"),this.GetSchoolTeachers()},e=>{console.error("Error saving teacher data",e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.sM),l.Y36(u.f),l.Y36(d.tT),l.Y36(g.k))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-teachers"]],decls:17,vars:2,consts:[[1,"content"],[1,"row","mb-5"],[1,"col-12","d-flex","h-100","align-items-center","justify-content-between"],[1,"page-title"],[1,"d-inline-block"],[1,"btn","btn-primary","mr-3",3,"click"],[1,"zmdi","zmdi-account-add","zmdi-hc-lg","mr-2"],[1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf","ngIfElse"],["noTeachers",""],["editTeacherModal",""],[1,"row"],["class","col-12 col-sm-10 col-md-6 col-xl-4 mb-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-10","col-md-6","col-xl-4","mb-4"],[1,"clickeable",3,"teacher","showGroups","click"],[1,"col-12","text-center","no-items-message"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"teacher-form"],[3,"formGroup"],[1,"col-12","col-md-6"],[1,"input-container"],[1,"input-icon-container","text-center"],["src","assets/icons/user.png"],["type","text","placeholder","Nombre","formControlName","name",1,"form-control"],[3,"control"],["src","assets/icons/book.png"],["bindLabel","name","placeholder","Asignaturas","formControlName","subjects",1,"ng-select","form-control","with-icon",3,"items","multiple","closeOnSelect"],["src","assets/icons/mail.png"],["type","text","placeholder","Correo electr\xf3nico de trabajo","formControlName","email",1,"form-control"],[1,"col-12","col-md-6","col-xl-4"],["src","assets/icons/users.png"],["type","text","placeholder","Grado","formControlName","grade",1,"form-control"],["src","assets/icons/users-group.png"],["type","text","placeholder","Grupo","formControlName","group",1,"form-control"],[1,"btn","btn-outline-success","btn-block",3,"disabled","click"],[1,"col-12"],[1,"input-label"],["class","badge badge-primary mr-3",4,"ngFor","ngForOf"],[1,"modal-footer","d-flex","align-items-center"],[1,"btn","btn-outline-primary","btn-big","mr-4",3,"click"],[1,"btn","btn-primary","btn-big",3,"click"],[1,"badge","badge-primary","mr-3"],[1,"d-flex"],[1,"mr-2","text-uppercase"],[1,"zmdi","zmdi-close","clickeable",3,"click"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4," Mis maestros "),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"button",5),l.NdJ("click",function(){return t.nav.GoToUserRoute("registrar-maestros")}),l._UZ(7,"i",6),l._uU(8," Agregar "),l.qZA(),l.TgZ(9,"button",7),l.NdJ("click",function(){return t.nav.GoToUserRoute("registrar-maestros/csv")}),l._UZ(10,"i",6),l._uU(11," CSV "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(12,Z,2,1,"div",8),l.qZA(),l.YNc(13,v,4,0,"ng-template",null,9,l.W1O),l.YNc(15,b,51,11,"ng-template",null,10,l.W1O)),2&e){const e=l.MAs(14);l.xp6(12),l.Q6J("ngIf",null==t.teachers?null:t.teachers.length)("ngIfElse",e)}},directives:[o.O5,o.sg,m.l,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,h.w,i.w9],styles:[".btn-big[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;padding:1rem 2rem}.badge[_ngcontent-%COMP%]{font-size:1rem;padding:.25rem 1rem}.input-label[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:600}"]}),e})();var A=r(7169);const w=[{path:"",component:x}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.u5,o.ez,i.A0,A.b,a.UX,s.G,d.zk.forRoot(),n.Bz.forChild(w)]]}),e})()},5821:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var o=r(7368);let n=(()=>{class e{constructor(){}static GetValidatorErrorMessage(e,t){return[{name:"required",label:"Campo requerido"},{name:"invalidRFC",label:"No tiene el formato adecuado"},{name:"invalidEmailAddress",label:"Correo inv\xe1lido"},{name:"invalidPassword",label:"Las contrase\xf1as no coinciden"},{name:"minlength",label:`M\xednimo ${t.requiredLength} caracteres `},{name:"maxlength",label:`M\xe1ximo ${t.requiredLength} caracteres `},{name:"invalidNumber",label:"Solo n\xfameros enteros, o con decimal"},{name:"invalidIntegerNumber",label:"Solo n\xfameros enteros"},{name:"matchstring",label:`${t.matchStringCustomLabel?t.matchStringCustomLabel:"El texto no coincide"}`}].find(t=>t.name==e)}static matchString(e,t=null){return r=>r.value?e==r.value?null:t?{matchstring:{requiredString:e,matchStringCustomLabel:t}}:{matchstring:e}:null}static CheckOnlyIntegerNumbers(e){return(null==e?void 0:e.value)?/^[0-9]+$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidIntegerNumber:!0}:null:{invalidIntegerNumber:!0}:null}static CheckOnlyNumbers(e){return(null==e?void 0:e.value)?/^[1-9]\d*\.?\d*$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidNumber:!0}:null:{invalidNumber:!0}:null}static EmailValidator(e){return(null==e?void 0:e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/))?null:{invalidEmailAddress:!0}}static RfcValidator(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.value.match(/^([A-Z\xd1&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/))?null:{invalidRFC:!0}}}return e.password="",e.confirmPassword="",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);