(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[478],{7478:(t,e,o)=>{"use strict";o.r(e),o.d(e,{TemplatesModule:()=>x});var i=o(1116),s=o(2894),n=o(4391),l=o(1041),a=o(6050),r=o(5470),c=o(7368);const p=function(t,e){return{"template-hide":t,"template-show":e}};function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",5),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().OnClick(e)}),c._UZ(1,"img",6),c.TgZ(2,"div",7),c._uU(3),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,o=e.index,i=c.oxw();c.Q6J("ngClass",c.WLB(3,p,!i.positionsToShow.includes(o),i.positionsToShow.includes(o))),c.xp6(1),c.s9C("src","assets/icons/"+t.icon,c.LSH),c.xp6(2),c.hij(" ",t.nickname?t.nickname:t.name," ")}}let h=(()=>{class t{constructor(){this.templates=[],this.maxTemplatesToShow=0,this.onClick=new c.vpe,this.positionsToShow=[],this.templatesToShow=3}ngOnInit(){window.addEventListener("resize",t=>{this.AdjustView()}),this.AdjustView()}OnClick(t){this.onClick.emit(t)}AdjustView(){var t;let e=null===(t=document.getElementById("slider-container"))||void 0===t?void 0:t.clientWidth;this.templatesToShow=Math.floor((e-80)/225),this.templatesToShow=this.maxTemplatesToShow?Math.min(this.templatesToShow,this.maxTemplatesToShow):this.templatesToShow,this.positionsToShow=[];for(let o=0;o<this.templatesToShow;o++)this.positionsToShow.push(o)}GoRight(){let t=this.positionsToShow[this.positionsToShow.length-1]+this.templatesToShow;t=Math.min(t,this.templates.length);let e=t-this.templatesToShow;this.positionsToShow=[];for(let o=e;o<t;o++)this.positionsToShow.push(o)}GoLeft(){let t=this.positionsToShow[0]-this.templatesToShow;t=Math.max(t,0);let e=t+this.templatesToShow;this.positionsToShow=[];for(let o=t;o<e;o++)this.positionsToShow.push(o)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-template-slider"]],inputs:{templates:"templates",maxTemplatesToShow:"maxTemplatesToShow"},outputs:{onClick:"onClick"},decls:6,vars:1,consts:[["id","slider-container",1,"slider-container"],[1,"slider-control","clickeable"],["src","assets/icons/arrow-left.png","alt","arrow left",3,"click"],["class","template clickeable",3,"ngClass","click",4,"ngFor","ngForOf"],["src","assets/icons/arrow-right.png","alt","arrow rigth",3,"click"],[1,"template","clickeable",3,"ngClass","click"],["alt","template-icon",1,"template-icon",3,"src"],[1,"template-name"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"img",2),c.NdJ("click",function(){return e.GoLeft()}),c.qZA(),c.qZA(),c.YNc(3,m,4,6,"div",3),c.TgZ(4,"div",1),c.TgZ(5,"img",4),c.NdJ("click",function(){return e.GoRight()}),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngForOf",e.templates))},directives:[i.sg,i.mk],styles:[".slider-container[_ngcontent-%COMP%]{justify-content:space-between}.slider-container[_ngcontent-%COMP%], .template[_ngcontent-%COMP%]{display:flex;align-items:center}.template[_ngcontent-%COMP%]{width:220px;justify-content:center;flex-direction:column;background-color:#f4f5f7;padding:27px 1rem;border-radius:6px;height:200px}.template-hide[_ngcontent-%COMP%]{display:none}.template-icon[_ngcontent-%COMP%]{width:-webkit-min-content;width:min-content}.template-name[_ngcontent-%COMP%]{margin-top:10px;color:#1081fb;font-size:1.5rem;font-weight:700;line-height:30px;text-align:center}"]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[l.u5,i.ez,n.A0,l.UX,a.G,r.zk.forRoot()]]}),t})();var g=o(882),u=o(1392),T=o(407),w=o(6189),f=o(6507);function S(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",7),c._uU(2),c.qZA(),c.TgZ(3,"app-template-slider",8),c.NdJ("onClick",function(e){return c.CHM(t),c.oxw().OnTemplateSelected(e)}),c.qZA(),c.TgZ(4,"div",9),c.TgZ(5,"button",10),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().SeeAllTemplatesOfType(e)}),c._uU(6," Ver todas "),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.hij(" ",t.name," "),c.xp6(1),c.Q6J("templates",t.templates)("maxTemplatesToShow",3)}}function v(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"app-template-preview-modal",11),c.NdJ("onCloseModal",function(){return c.CHM(t),c.oxw().CloseModal()})("onUseTemplate",function(e){return c.CHM(t),c.oxw().CreateStrategyBasedOnTemplate(e)}),c.qZA()}if(2&t){const t=c.oxw();c.Q6J("template",t.selectedTemplate)}}const C=[{path:"",component:(()=>{class t{constructor(t,e,o,i,s){this.api=t,this.nav=e,this.modalService=o,this.activatedRoute=i,this.toast=s,this.modalRef=null,this.templateTypes=[],this.selectedTemplate=null,this.grade=null,this.group=null}ngOnInit(){this.GetTemplates(),this.GetParams()}GetParams(){this.activatedRoute.params.subscribe(t=>{this.grade=t.grade,this.group=t.group})}OpenModal(t){this.modalRef=this.modalService.show(t,{backdrop:"static"})}CloseModal(){this.modalRef&&this.modalRef.hide()}GetTemplates(){this.api.Get("/TemplateTypes/WithTemplates").subscribe(t=>{this.templateTypes=t},t=>{console.error("Erro getting templates",t)})}SeeAllTemplatesOfType(t){let e=`tipo-plantillas/${t.id}`;this.grade&&this.group&&(e=`grado/${this.grade}/grupo/${this.group}/${e}`),this.nav.GoToUserRoute(e)}OnTemplateSelected(t){this.selectedTemplate=t,this.nav.GoToUserRoute(`plantillas/${t.id}`)}CreateStrategyBasedOnTemplate(t){var e;this.CloseModal();let o={templateId:t.id,userId:null===(e=this.api.GetUser())||void 0===e?void 0:e.id,grade:this.grade?this.grade:null,group:this.group?this.group:null};this.api.Post("/Strategies",{strategy:o}).subscribe(t=>{this.nav.GoToUserRoute(`estrategias/${t.id}/materias`)},t=>{console.error("Error creating strategy",t),this.toast.ShowError("Error al crear la estrategia")})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.sM),c.Y36(T.f),c.Y36(r.tT),c.Y36(s.gz),c.Y36(w.k))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-templates"]],decls:7,vars:1,consts:[[1,"content"],[1,"row"],[1,"col-12"],[1,"row","justify-content-center"],["class","col-12 col-md-10 col-lg-9 col-xl-8 mb-5",4,"ngFor","ngForOf"],["templatePreviewModal",""],[1,"col-12","col-md-10","col-lg-9","col-xl-8","mb-5"],[1,"title"],[3,"templates","maxTemplatesToShow","onClick"],[1,"bottom-right"],[1,"btn","btn-outline-primary","btn-widder",3,"click"],[3,"template","onCloseModal","onUseTemplate"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"div",2),c.qZA(),c.TgZ(3,"div",3),c.YNc(4,S,7,3,"div",4),c.qZA(),c.qZA(),c.YNc(5,v,1,1,"ng-template",null,5,c.W1O)),2&t&&(c.xp6(4),c.Q6J("ngForOf",e.templateTypes))},directives:[i.sg,h,f.f],styles:[".bottom-right[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-top:1rem}.btn-widder[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;padding:.5rem 4rem}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[l.u5,i.ez,n.A0,l.UX,d,a.G,r.zk.forRoot(),g.c,s.Bz.forChild(C)]]}),t})()}}]);