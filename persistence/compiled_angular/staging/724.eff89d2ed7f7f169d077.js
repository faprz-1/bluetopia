(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[724],{6158:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var i=n(5821),r=n(7368),o=n(1116);function s(e,t){if(1&e&&(r.TgZ(0,"div",1),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",null==e.errorMessage?null:e.errorMessage.label,"\n")}}let a=(()=>{class e{constructor(){}ngOnInit(){}get errorMessage(){var e,t,n,r;for(let o in null===(e=this.control)||void 0===e?void 0:e.errors)if((null===(t=this.control)||void 0===t?void 0:t.errors.hasOwnProperty(o))&&(null===(n=this.control)||void 0===n?void 0:n.touched))return i.R.GetValidatorErrorMessage(o,null===(r=this.control)||void 0===r?void 0:r.errors[o]);return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-control-messages"]],inputs:{control:"control"},decls:1,vars:1,consts:[["class","color-red",4,"ngIf"],[1,"color-red"]],template:function(e,t){1&e&&r.YNc(0,s,2,1,"div",0),2&e&&r.Q6J("ngIf",null!==t.errorMessage)},directives:[o.O5],styles:[""]}),e})()},7764:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var i=n(7368),r=n(1116);function o(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=t.$implicit,n=t.last;i.xp6(1),i.Oqu(e.name+(n?"":","))}}function s(e,t){if(1&e&&(i.TgZ(0,"span",13),i._uU(1),i.qZA()),2&e){const e=t.$implicit,n=t.last;i.xp6(1),i.Oqu((null==e.grade?null:e.grade.name)+(null==e.group?null:e.group.name)+(n?"":","))}}function a(e,t){if(1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"div",4),i._UZ(2,"i",11),i.qZA(),i.TgZ(3,"div",6),i.YNc(4,s,2,1,"span",12),i.qZA(),i.qZA()),2&e){const e=i.oxw();i.xp6(4),i.Q6J("ngForOf",null==e.teacher?null:e.teacher.teacherGroups)}}let l=(()=>{class e{constructor(){this.teacher=null,this.showGroups=!1,this.onDelete=new i.vpe}ngOnInit(){}OnDeletedPressed(e){e.stopPropagation(),this.onDelete.emit(this.teacher)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-teacher-card"]],inputs:{teacher:"teacher",showGroups:"showGroups"},outputs:{onDelete:"onDelete"},decls:21,vars:4,consts:[[1,"card","position-relative"],[1,"delete","clickeable",3,"click"],[1,"card-body"],[1,"text-row"],[1,"img-container"],["src","assets/icons/user-green.png","alt","user"],[1,"text-row-data"],["src","assets/icons/mail-green.png","alt","mail"],["src","assets/icons/book-green.png","alt","book"],[4,"ngFor","ngForOf"],["class","text-row",4,"ngIf"],[1,"zmdi","zmdi-accounts-outline"],["class","text-uppercase",4,"ngFor","ngForOf"],[1,"text-uppercase"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"span",1),i.NdJ("click",function(e){return t.OnDeletedPressed(e)}),i._uU(2," \xd7 "),i.qZA(),i.TgZ(3,"div",2),i.TgZ(4,"div",3),i.TgZ(5,"div",4),i._UZ(6,"img",5),i.qZA(),i.TgZ(7,"div",6),i.TgZ(8,"span"),i._uU(9),i.qZA(),i.qZA(),i.qZA(),i.TgZ(10,"div",3),i.TgZ(11,"div",4),i._UZ(12,"img",7),i.qZA(),i.TgZ(13,"div",6),i._uU(14),i.qZA(),i.qZA(),i.TgZ(15,"div",3),i.TgZ(16,"div",4),i._UZ(17,"img",8),i.qZA(),i.TgZ(18,"div",6),i.YNc(19,o,2,1,"span",9),i.qZA(),i.qZA(),i.YNc(20,a,5,1,"div",10),i.qZA(),i.qZA()),2&e&&(i.xp6(9),i.Oqu(null==t.teacher?null:t.teacher.name),i.xp6(5),i.hij(" ",null==t.teacher?null:t.teacher.email," "),i.xp6(5),i.Q6J("ngForOf",null==t.teacher?null:t.teacher.subjects),i.xp6(1),i.Q6J("ngIf",t.showGroups))},directives:[r.sg,r.O5],styles:[".card[_ngcontent-%COMP%]{padding:1.2rem 4rem;border:2px solid #2ed2a3;border-radius:12px;color:#758ca6;font-size:1.5rem;font-weight:500;width:-webkit-max-content;width:max-content;max-width:100%;margin-bottom:0}.card-body[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;justify-content:space-between}.text-row[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:30px;margin-bottom:10px}.text-row[_ngcontent-%COMP%]   .text-row-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;flex-grow:1;flex-wrap:wrap;line-height:30px}.text-row[_ngcontent-%COMP%]   .text-row-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.3rem}.text-row[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:-webkit-min-content;height:min-content;padding-right:12px;text-align:left}.text-row[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:-webkit-max-content;width:max-content;height:-webkit-max-content;height:max-content}.delete[_ngcontent-%COMP%]{font-size:2rem;position:absolute;top:10px;right:15px;color:var(--danger)}.zmdi[_ngcontent-%COMP%]{color:#2ed2a3}"]}),e})()},8838:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var i=n(1116),r=n(1041),o=n(6050),s=(n(7764),n(7368));let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.u5,i.ez,r.UX,o.G]]}),e})()},8724:(e,t,n)=>{"use strict";n.r(t),n.d(t,{StudentsDataModule:()=>I});var i=n(1116),r=n(2320),o=n(4391),s=n(1041),a=n(6050),l=n(8838),d=n(5470),c=n(7368),g=n(407),u=n(1392),p=n(6189);let h=(()=>{class e{constructor(e){this.api=e}GetRole(){const e=this.api.GetUser();return e&&e.role?e.role.name:"NoRole"}IsUser(){return"User"==this.GetRole()}IsAdmin(){return"Admin"==this.GetRole()}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(u.sM))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=n(6158);const Z=["addGradeOrGroupModal"];function f(e,t){1&e&&c._UZ(0,"div")}function v(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.registerNumber," ")}}function A(e,t){1&e&&c._UZ(0,"div")}function b(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.name," ")}}function x(e,t){1&e&&c._UZ(0,"div")}function q(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.fatherLastname+" "+e.motherLastname," ")}}function T(e,t){1&e&&c._UZ(0,"div")}function w(e,t){1&e&&(c.TgZ(0,"div"),c._uU(1," 4.5 "),c.qZA())}function G(e,t){1&e&&c._UZ(0,"div")}function O(e,t){1&e&&(c.TgZ(0,"div"),c._uU(1," 4.5 "),c.qZA())}function _(e,t){1&e&&c._UZ(0,"div")}function M(e,t){1&e&&c._UZ(0,"div",37)}function U(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c.YNc(2,f,1,0,"div",35),c.YNc(3,v,2,1,"div",35),c.qZA(),c.TgZ(4,"td"),c.YNc(5,A,1,0,"div",35),c.YNc(6,b,2,1,"div",35),c.qZA(),c.TgZ(7,"td"),c.YNc(8,x,1,0,"div",35),c.YNc(9,q,2,1,"div",35),c.qZA(),c.TgZ(10,"td"),c.YNc(11,T,1,0,"div",35),c.YNc(12,w,2,0,"div",35),c.qZA(),c.TgZ(13,"td"),c.YNc(14,G,1,0,"div",35),c.YNc(15,O,2,0,"div",35),c.qZA(),c.TgZ(16,"td"),c.YNc(17,_,1,0,"div",35),c.YNc(18,M,1,0,"div",36),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.Q6J("ngIf",e.isEditing),c.xp6(1),c.Q6J("ngIf",!e.isEditing),c.xp6(2),c.Q6J("ngIf",e.isEditing),c.xp6(1),c.Q6J("ngIf",!e.isEditing),c.xp6(2),c.Q6J("ngIf",e.isEditing),c.xp6(1),c.Q6J("ngIf",!e.isEditing),c.xp6(2),c.Q6J("ngIf",e.isEditing),c.xp6(1),c.Q6J("ngIf",!e.isEditing),c.xp6(2),c.Q6J("ngIf",e.isEditing),c.xp6(1),c.Q6J("ngIf",!e.isEditing),c.xp6(2),c.Q6J("ngIf",e.isEditing),c.xp6(1),c.Q6J("ngIf",!e.isEditing)}}function N(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,U,19,12,"tr",34),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.students)}}function y(e,t){1&e&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td",38),c._UZ(3,"i",39),c.qZA(),c.qZA(),c.qZA())}const J=function(){return{backdrop:"static",keyboard:!1}},C=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.nav=e,this.api=t,this.toast=n,this.role=i,this.user=null,this.grades=[],this.groups=[],this.gradeSelected=null,this.groupSelected=null,this.students=[],this.isEditing=!1,this.loading={getting:!1,creating:!1},this.gradeOrGroupForm=new s.cw({grade:new s.NI("",[]),group:new s.NI("",[])})}ngOnInit(){this.user=this.api.GetUser(),this.GetGrades()}GetGrades(){this.loading.getting=!0,this.api.Get("/Grades").subscribe(e=>{this.grades=e,this.gradeSelected=this.grades.length?this.grades[0]:null,this.GetGroups()},e=>{console.error("Error getting grades",e),this.loading.getting=!1})}GetGroups(){this.api.Get("/Groups").subscribe(e=>{this.groups=e,this.groupSelected=this.groups.length?this.groups[0]:null,this.GetStudents()},e=>{console.error("Error getting groups",e),this.loading.getting=!1})}GetStudents(){this.loading.getting=!0;let e="/Students";switch(this.user.role.name){case"School":e+=`/OfSchool/${this.user.id}`;break;case"Teacher":e+=`/OfTeacher/${this.user.id}`;break;default:e+="/OfSchool"}e+=`/FilteredBy/Grade/${this.gradeSelected?this.gradeSelected.id:0}/Group/${this.groupSelected?this.groupSelected.id:0}`,this.api.Get(e).subscribe(e=>{this.students=e,this.loading.getting=!1},e=>{console.error("Error getting students",e),this.loading.getting=!1})}AddGradeOrGroup(){this.loading.creating=!0,this.api.Post("/Grades/GradeOrGroup",Object.assign({},this.gradeOrGroupForm.value)).subscribe(e=>{var t;this.toast.ShowSuccess("Datos agregados"),null===(t=this.addGradeOrGroupModal)||void 0===t||t.hide(),this.gradeOrGroupForm.reset(),this.GetGrades(),this.loading.creating=!1},e=>{console.error("Error creating grade or group",e),this.loading.creating=!1})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(g.f),c.Y36(u.sM),c.Y36(p.k),c.Y36(h))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-students-data"]],viewQuery:function(e,t){if(1&e&&c.Gf(Z,5),2&e){let e;c.iGM(e=c.CRH())&&(t.addGradeOrGroupModal=e.first)}},decls:60,vars:13,consts:[[1,"content"],[1,"row","mb-5"],[1,"col-12","d-flex","h-100","align-items-center","justify-content-between"],[1,"page-title","text-success"],[1,"btn","btn-outline-success",3,"click"],[1,"row"],[1,"col-12","d-flex","align-items-center","filters"],[1,"flex-grow-1","filter"],[1,"input-container"],[1,"input-icon-container","icon-container-right","text-center"],["src","assets/icons/search-small.png"],["type","text","placeholder","Buscar",1,"form-control","icon-right"],[1,"select-container","filter"],["bindLabel","name","placeholder","Grado",1,"ng-select","form-control",3,"items","ngModel","change","ngModelChange"],["bindLabel","name","placeholder","Grupo",1,"ng-select","form-control",3,"items","ngModel","change","ngModelChange"],[1,"col-12","mt-5"],[1,"table"],[4,"ngIf","ngIfElse"],["bigLoading",""],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","addGradeOrGroupModal",1,"modal","fade",3,"config"],["addGradeOrGroupModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"col-12"],["type","text","placeholder","Grado","formControlName","grade",1,"form-control","no-icon",3,"keyup.enter"],[3,"control"],["type","text","placeholder","Grupo","formControlName","group",1,"form-control","no-icon",3,"keyup.enter"],[1,"modal-footer","justify-content-between"],[1,"btn","btn-outline-primary","modal-btn",3,"disabled","click"],[1,"btn","btn-primary","modal-btn",3,"disabled","click"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center"],["colspan","6",1,"text-center"],[1,"zmdi","zmdi-spinner","zmdi-hc-5x","zmdi-hc-spin"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._uU(4," Datos de alumnos "),c.qZA(),c.TgZ(5,"button",4),c.NdJ("click",function(){return c.CHM(e),c.MAs(38).show()}),c._uU(6," Agregar grado o grupo "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c._UZ(12,"img",10),c.qZA(),c._UZ(13,"input",11),c.qZA(),c.qZA(),c.TgZ(14,"div",12),c.TgZ(15,"ng-select",13),c.NdJ("change",function(){return t.GetStudents()})("ngModelChange",function(e){return t.gradeSelected=e}),c.qZA(),c.qZA(),c.TgZ(16,"div",12),c.TgZ(17,"ng-select",14),c.NdJ("change",function(){return t.GetStudents()})("ngModelChange",function(e){return t.groupSelected=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"div",15),c.TgZ(19,"table",16),c.TgZ(20,"thead"),c.TgZ(21,"tr"),c.TgZ(22,"th"),c._uU(23,"#"),c.qZA(),c.TgZ(24,"th"),c._uU(25,"Nombre"),c.qZA(),c.TgZ(26,"th"),c._uU(27,"Apellidos"),c.qZA(),c.TgZ(28,"th"),c._uU(29,"Materias"),c.qZA(),c.TgZ(30,"th"),c._uU(31,"Promedio"),c.qZA(),c.TgZ(32,"th"),c._uU(33,"Acci\xf3nes"),c.qZA(),c.qZA(),c.qZA(),c.YNc(34,N,2,1,"tbody",17),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(35,y,4,0,"ng-template",null,18,c.W1O),c.TgZ(37,"div",19,20),c.TgZ(39,"div",21),c.TgZ(40,"div",22),c.TgZ(41,"div",23),c.TgZ(42,"h2",24),c._uU(43,"Agregar grado o grupo"),c.qZA(),c.qZA(),c.TgZ(44,"div",25),c.TgZ(45,"form",26),c.TgZ(46,"div",5),c.TgZ(47,"div",27),c.TgZ(48,"div",8),c.TgZ(49,"input",28),c.NdJ("keyup.enter",function(){return t.AddGradeOrGroup()}),c.qZA(),c.qZA(),c._UZ(50,"app-control-messages",29),c.qZA(),c.TgZ(51,"div",27),c.TgZ(52,"div",8),c.TgZ(53,"input",30),c.NdJ("keyup.enter",function(){return t.AddGradeOrGroup()}),c.qZA(),c.qZA(),c._UZ(54,"app-control-messages",29),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(55,"div",31),c.TgZ(56,"button",32),c.NdJ("click",function(){return c.CHM(e),c.MAs(38).hide()}),c._uU(57," Cancelar "),c.qZA(),c.TgZ(58,"button",33),c.NdJ("click",function(){return t.AddGradeOrGroup()}),c._uU(59," Agregar "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(36);c.xp6(15),c.Q6J("items",t.grades)("ngModel",t.gradeSelected),c.xp6(2),c.Q6J("items",t.groups)("ngModel",t.groupSelected),c.xp6(17),c.Q6J("ngIf",!t.loading.getting)("ngIfElse",e),c.xp6(3),c.Q6J("config",c.DdM(12,J)),c.xp6(8),c.Q6J("formGroup",t.gradeOrGroupForm),c.xp6(5),c.Q6J("control",t.gradeOrGroupForm.get("grade")),c.xp6(4),c.Q6J("control",t.gradeOrGroupForm.get("group")),c.xp6(2),c.Q6J("disabled",t.loading.creating),c.xp6(2),c.Q6J("disabled",t.loading.creating)}},directives:[o.w9,s.JJ,s.On,i.O5,d.oB,s._Y,s.JL,s.sg,s.Fj,s.u,m.w,i.sg],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.u5,i.ez,o.A0,l.b,s.UX,a.G,d.zk.forRoot(),r.Bz.forChild(C)]]}),e})()},5821:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var i=n(7368);let r=(()=>{class e{constructor(){}static GetValidatorErrorMessage(e,t){return[{name:"required",label:"Campo requerido"},{name:"invalidRFC",label:"No tiene el formato adecuado"},{name:"invalidEmailAddress",label:"Correo inv\xe1lido"},{name:"invalidPassword",label:"Las contrase\xf1as no coinciden"},{name:"minlength",label:`M\xednimo ${t.requiredLength} caracteres `},{name:"maxlength",label:`M\xe1ximo ${t.requiredLength} caracteres `},{name:"invalidNumber",label:"Solo n\xfameros enteros, o con decimal"},{name:"invalidIntegerNumber",label:"Solo n\xfameros enteros"},{name:"matchstring",label:`${t.matchStringCustomLabel?t.matchStringCustomLabel:"El texto no coincide"}`}].find(t=>t.name==e)}static matchString(e,t=null){return n=>n.value?e==n.value?null:t?{matchstring:{requiredString:e,matchStringCustomLabel:t}}:{matchstring:e}:null}static CheckOnlyIntegerNumbers(e){return(null==e?void 0:e.value)?/^[0-9]+$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidIntegerNumber:!0}:null:{invalidIntegerNumber:!0}:null}static CheckOnlyNumbers(e){return(null==e?void 0:e.value)?/^[1-9]\d*\.?\d*$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidNumber:!0}:null:{invalidNumber:!0}:null}static EmailValidator(e){return(null==e?void 0:e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/))?null:{invalidEmailAddress:!0}}static RfcValidator(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.value.match(/^([A-Z\xd1&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/))?null:{invalidRFC:!0}}}return e.password="",e.confirmPassword="",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);