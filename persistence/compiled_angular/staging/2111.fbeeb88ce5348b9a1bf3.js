(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[2111],{6158:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var o=r(5821),n=r(7368),s=r(1116);function i(e,t){if(1&e&&(n.TgZ(0,"div",1),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij(" ",null==e.errorMessage?null:e.errorMessage.label,"\n")}}let l=(()=>{class e{constructor(){}ngOnInit(){}get errorMessage(){var e,t,r,n;for(let s in null===(e=this.control)||void 0===e?void 0:e.errors)if((null===(t=this.control)||void 0===t?void 0:t.errors.hasOwnProperty(s))&&(null===(r=this.control)||void 0===r?void 0:r.touched))return o.R.GetValidatorErrorMessage(s,null===(n=this.control)||void 0===n?void 0:n.errors[s]);return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-control-messages"]],inputs:{control:"control"},decls:1,vars:1,consts:[["class","color-red",4,"ngIf"],[1,"color-red"]],template:function(e,t){1&e&&n.YNc(0,i,2,1,"div",0),2&e&&n.Q6J("ngIf",null!==t.errorMessage)},directives:[s.O5],styles:[""]}),e})()},2111:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SchoolProfileModule:()=>x});var o=r(1116),n=r(2894),s=r(4391),i=r(1041),l=r(6050),a=r(5470),u=r(5278),d=r(5148),c=r(1922),p=r(5258),m=r(6304),g=r(5821),h=r(7368),v=r(1392),f=r(6189),Z=r(407),b=r(6158);const w=[{path:"",component:(()=>{class e{constructor(e,t,r){this.api=e,this.toast=t,this.nav=r,this.user=null,this.activeTab="profile",this.loading={getting:!1,updating:!1},this.cantEdit=!1,this.schoolUserForm=new i.cw({id:new i.NI("",[i.kI.required]),name:new i.NI("",[i.kI.required]),email:new i.NI({value:"",disabled:!this.cantEdit},[i.kI.required]),data:new i.cw({id:new i.NI("",[]),workTitle:new i.NI("",[i.kI.required]),phone:new i.NI("",[g.R.CheckOnlyIntegerNumbers]),userId:new i.NI("",[i.kI.required])}),school:new i.cw({id:new i.NI("",[]),name:new i.NI(null,[i.kI.required]),phone:new i.NI(null,[i.kI.required,g.R.CheckOnlyIntegerNumbers]),address:new i.NI(null,[i.kI.required,i.kI.minLength(3)]),isActive:new i.NI(!1,[])})})}get userDataForm(){return this.schoolUserForm.get("data")}get schoolForm(){return this.schoolUserForm.get("school")}ngOnInit(){this.GetUSerData()}SetForm(){var e,t,r,o,n,s,i,l,a,u;this.schoolUserForm.setValue({id:this.user.school.id,name:this.user.username,email:this.user.email,data:{id:this.user.data?this.user.data.id:null,workTitle:this.user.data?this.user.data.workTitle:null,phone:this.user.data?this.user.data.phone:null,userId:this.user.id},school:{id:(null===(t=null===(e=this.user)||void 0===e?void 0:e.school)||void 0===t?void 0:t.id)?this.user.school.id:null,name:(null===(o=null===(r=this.user)||void 0===r?void 0:r.school)||void 0===o?void 0:o.name)?this.user.school.name:null,phone:(null===(s=null===(n=this.user)||void 0===n?void 0:n.school)||void 0===s?void 0:s.phone)?this.user.school.phone:null,address:(null===(l=null===(i=this.user)||void 0===i?void 0:i.school)||void 0===l?void 0:l.address)?this.user.school.address:null,isActive:!!(null===(u=null===(a=this.user)||void 0===a?void 0:a.school)||void 0===u?void 0:u.isActive)}})}GetUSerData(){var e=this;return(0,m.Z)(function*(){yield e.api.GetToken(),e.api.Get("/usuarios/withCredentials").subscribe(t=>{e.user=t,e.api.SetUser(t),e.SetForm()})})()}SaveUserData(){if(this.schoolUserForm.invalid)return this.toast.ShowWarning("Favor de llenar todos los campos correctamente"),void this.schoolUserForm.markAllAsTouched();this.loading.updating=!0,this.api.Patch(`/Schools/${this.user.school.id}`,{school:this.schoolUserForm.value}).subscribe(e=>{this.toast.ShowSuccess("Datos guardados correctamente"),this.GetUSerData(),this.loading.updating=!1},e=>{console.error("Error saving user data",e),this.toast.ShowError("Error al guardar los datos"),this.loading.updating=!1})}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(v.sM),h.Y36(f.k),h.Y36(Z.f))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-school-profile"]],decls:52,vars:12,consts:[[1,"content"],[1,"mt-5"],[1,"profile-form",3,"formGroup"],[1,"w-100"],[1,"input-container"],[1,"input-icon-container","text-center"],["src","assets/icons/user.png"],["type","text","placeholder","Nombre","formControlName","name",1,"form-control",3,"keyup.enter"],[3,"control"],["src","assets/icons/mail.png"],["type","text","placeholder","Correo","formControlName","email",1,"form-control",3,"keyup.enter"],[3,"formGroup"],["src","assets/icons/users-group.png"],["type","text","placeholder","Puesto de trabajo","formControlName","workTitle",1,"form-control",3,"keyup.enter"],["src","assets/icons/phone.png"],["type","text","placeholder","Tel\xe9fono","formControlName","phone",1,"form-control",3,"keyup.enter"],["src","assets/icons/school.png"],["type","text","placeholder","Nombre de la escuela","formControlName","name",1,"form-control",3,"keyup.enter"],["src","assets/icons/location.png"],["type","text","placeholder","Direcci\xf3n de la escuela","formControlName","address",1,"form-control",3,"keyup.enter"],["src","assets/icons/user-phone.png"],["type","text","placeholder","Tel\xe9fono de la escuela","formControlName","phone",1,"form-control",3,"keyup.enter"],[1,"d-flex","justify-content-between","w-100","mt-3"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h._UZ(6,"img",6),h.qZA(),h.TgZ(7,"input",7),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(8,"app-control-messages",8),h.qZA(),h.TgZ(9,"div",3),h.TgZ(10,"div",4),h.TgZ(11,"div",5),h._UZ(12,"img",9),h.qZA(),h.TgZ(13,"input",10),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(14,"app-control-messages",8),h.qZA(),h.ynx(15,11),h.TgZ(16,"div",3),h.TgZ(17,"div",4),h.TgZ(18,"div",5),h._UZ(19,"img",12),h.qZA(),h.TgZ(20,"input",13),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(21,"app-control-messages",8),h.qZA(),h.TgZ(22,"div",3),h.TgZ(23,"div",4),h.TgZ(24,"div",5),h._UZ(25,"img",14),h.qZA(),h.TgZ(26,"input",15),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(27,"app-control-messages",8),h.qZA(),h.BQk(),h.ynx(28,11),h.TgZ(29,"div",3),h.TgZ(30,"div",4),h.TgZ(31,"div",5),h._UZ(32,"img",16),h.qZA(),h.TgZ(33,"input",17),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(34,"app-control-messages",8),h.qZA(),h.TgZ(35,"div",3),h.TgZ(36,"div",4),h.TgZ(37,"div",5),h._UZ(38,"img",18),h.qZA(),h.TgZ(39,"input",19),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(40,"app-control-messages",8),h.qZA(),h.TgZ(41,"div",3),h.TgZ(42,"div",4),h.TgZ(43,"div",5),h._UZ(44,"img",20),h.qZA(),h.TgZ(45,"input",21),h.NdJ("keyup.enter",function(){return t.SaveUserData()}),h.qZA(),h.qZA(),h._UZ(46,"app-control-messages",8),h.qZA(),h.BQk(),h.TgZ(47,"div",22),h.TgZ(48,"button",23),h.NdJ("click",function(){return t.SetForm()}),h._uU(49," Descartar "),h.qZA(),h.TgZ(50,"button",24),h.NdJ("click",function(){return t.SaveUserData()}),h._uU(51," Guardar "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("formGroup",t.schoolUserForm),h.xp6(6),h.Q6J("control",t.schoolUserForm.get("name")),h.xp6(6),h.Q6J("control",t.schoolUserForm.get("email")),h.xp6(1),h.Q6J("formGroup",t.userDataForm),h.xp6(6),h.Q6J("control",t.userDataForm.get("workTitle")),h.xp6(6),h.Q6J("control",t.userDataForm.get("phone")),h.xp6(1),h.Q6J("formGroup",t.schoolForm),h.xp6(6),h.Q6J("control",t.schoolForm.get("name")),h.xp6(6),h.Q6J("control",t.schoolForm.get("address")),h.xp6(6),h.Q6J("control",t.schoolForm.get("phone")),h.xp6(2),h.Q6J("disabled",t.loading.updating),h.xp6(2),h.Q6J("disabled",t.loading.updating))},directives:[i.JL,i.sg,i.Fj,i.JJ,i.u,b.w],styles:[".active[_ngcontent-%COMP%]{border:2px solid var(--green-1,#26d7a4)}.profile-tab[_ngcontent-%COMP%]{display:flex;align-items:center;height:60px;border-radius:12px;background:var(--blue-light,#f2f8ff);padding:12px;color:var(--gray-1,#3d5e81);font-size:24px;font-family:Mulish}.gap-48[_ngcontent-%COMP%]{grid-gap:48px;gap:48px}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:400px;max-width:100%}.profile-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{margin-bottom:12px}.subjects[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;grid-gap:48px;gap:48px}.subjects[_ngcontent-%COMP%]   .btn-card[_ngcontent-%COMP%]{width:465px;height:460px;border-radius:24px!important;display:flex;align-items:center;justify-content:center}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[i.u5,o.ez,s.A0,i.UX,l.G,a.zk.forRoot(),d.s,p._,c.n,u.X,n.Bz.forChild(w)]]}),e})()},5821:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var o=r(7368);let n=(()=>{class e{constructor(){}static GetValidatorErrorMessage(e,t){return[{name:"required",label:"Campo requerido"},{name:"invalidRFC",label:"No tiene el formato adecuado"},{name:"invalidEmailAddress",label:"Correo inv\xe1lido"},{name:"invalidPassword",label:"Las contrase\xf1as no coinciden"},{name:"minlength",label:`M\xednimo ${t.requiredLength} caracteres `},{name:"maxlength",label:`M\xe1ximo ${t.requiredLength} caracteres `},{name:"invalidNumber",label:"Solo n\xfameros enteros, o con decimal"},{name:"invalidIntegerNumber",label:"Solo n\xfameros enteros"},{name:"matchstring",label:`${t.matchStringCustomLabel?t.matchStringCustomLabel:"El texto no coincide"}`}].find(t=>t.name==e)}static matchString(e,t=null){return r=>r.value?e==r.value?null:t?{matchstring:{requiredString:e,matchStringCustomLabel:t}}:{matchstring:e}:null}static CheckOnlyIntegerNumbers(e){return(null==e?void 0:e.value)?/^[0-9]+$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidIntegerNumber:!0}:null:{invalidIntegerNumber:!0}:null}static CheckOnlyNumbers(e){return(null==e?void 0:e.value)?/^[1-9]\d*\.?\d*$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidNumber:!0}:null:{invalidNumber:!0}:null}static EmailValidator(e){return(null==e?void 0:e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/))?null:{invalidEmailAddress:!0}}static RfcValidator(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.value.match(/^([A-Z\xd1&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/))?null:{invalidRFC:!0}}}return e.password="",e.confirmPassword="",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);