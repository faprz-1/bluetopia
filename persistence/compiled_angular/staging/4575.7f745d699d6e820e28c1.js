(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[4575],{4575:(e,t,s)=>{"use strict";s.r(t),s.d(t,{StrategiesModule:()=>Z});var r=s(1116),i=s(2894),n=s(4391),a=s(1041),o=s(6050),g=s(5470),l=s(7368),c=s(1392),d=s(407),u=s(7390);function h(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",15),l.TgZ(1,"app-strategy-card",16),l.NdJ("onChange",function(t){return l.CHM(e),l.oxw(2).OnStrategyChange(t)}),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(1),l.Q6J("strategy",e)}}function p(e,t){if(1&e&&(l.TgZ(0,"div",5),l.YNc(1,h,2,1,"div",14),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.strategies)}}function m(e,t){1&e&&(l.TgZ(0,"div",17),l._uU(1," No tiene estrategias creadas, cree una nueva estrategia "),l.qZA())}let f=(()=>{class e{constructor(e,t){this.api=e,this.nav=t,this.user=null,this.startegyStatuses=[],this.templates=[],this.grades=[],this.groups=[],this.gradeSelected=null,this.groupSelected=null,this.templateSelected=null,this.statusSelected=null,this.strategies=[],this.loading={}}ngOnInit(){this.user=this.api.GetUser(),this.GetStrategyStatuses(),this.GetTemplates(),this.GetGrades()}GetTemplates(){this.api.Get("/Templates").subscribe(e=>{this.templates=e},e=>{console.error("Error getting templates",e)})}GetStrategyStatuses(){this.api.Get("/StrategyStatuses").subscribe(e=>{this.startegyStatuses=e},e=>{console.error("Error statuses",e)})}GetGrades(){this.loading.getting=!0,this.api.Get("/Grades").subscribe(e=>{this.grades=e,this.GetGroups()},e=>{console.error("Error getting grades",e),this.loading.getting=!1})}GetGroups(){this.api.Get("/Groups").subscribe(e=>{this.groups=e,this.GetStrategies()},e=>{console.error("Error getting groups",e),this.loading.getting=!1})}GetStrategies(){let e;switch(this.user.role.name){case"School":e=`/Strategies/OfSchool/${this.user?this.user.schoolId:0}`;break;case"Teacher":e="/Strategies";break;default:e=""}e+=`/FilteredBy/Grade/${this.gradeSelected?this.gradeSelected.id:0}/Group/${this.groupSelected?this.groupSelected.id:0}/Template/${this.templateSelected?this.templateSelected.id:0}/Statuses/${JSON.stringify(this.statusSelected||[])}`,this.api.Get(e).subscribe(e=>{this.strategies=e},e=>{console.error("Erro getting teacher strategies",e)})}OnStrategyChange(e){switch(e.type){case"delete":let t=this.strategies.findIndex(t=>t.id==e.data.strategyId);-1!=t&&this.strategies.splice(t,1)}}GoToTeams(e){this.nav.GoToUserRoute(`mis-estrategias/${e.id}/equipos`)}GoToTeamsProgress(e){this.nav.GoToUserRoute(`mis-estrategias/${e.id}/progreso-equipos`)}GoToCalendar(e){this.nav.GoToUserRoute(`estrategias/${e.id}/calendario`)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.sM),l.Y36(d.f))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-strategies"]],decls:18,vars:8,consts:[[1,"content"],[1,"row","mb-5"],[1,"col-12","d-flex","h-100","align-items-center","justify-content-between","header-col"],[1,"page-title"],[1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col-12","d-flex","align-items-center","flex-wrap","filters","gap-3","mb-4"],[1,"select-container","filter"],["bindLabel","name","placeholder","Grado",1,"ng-select","form-control",3,"items","ngModel","change","ngModelChange"],["bindLabel","name","placeholder","Grupo",1,"ng-select","form-control",3,"items","ngModel","change","ngModelChange"],[1,"select-container","flex-grow-1","big","filter"],["bindLabel","name","placeholder","Tipo de estrategia",1,"ng-select","form-control","placeholder-primary",3,"items","ngModel","ngModelChange","change"],["class","row",4,"ngIf","ngIfElse"],["noStrategies",""],["class","col-12 col-md-6 col-lg-4 mb-1",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4","mb-1"],[3,"strategy","onChange"],[1,"text-center","no-items-message"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4," Mis estrategias "),l.qZA(),l.TgZ(5,"button",4),l.NdJ("click",function(){return t.nav.GoToUserRoute("plantillas")}),l._uU(6," Crear nueva estrategia "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l.TgZ(10,"ng-select",8),l.NdJ("change",function(){return t.GetStrategies()})("ngModelChange",function(e){return t.gradeSelected=e})("change",function(){return t.GetStrategies()}),l.qZA(),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"ng-select",9),l.NdJ("change",function(){return t.GetStrategies()})("ngModelChange",function(e){return t.groupSelected=e})("change",function(){return t.GetStrategies()}),l.qZA(),l.qZA(),l.TgZ(13,"div",10),l.TgZ(14,"ng-select",11),l.NdJ("ngModelChange",function(e){return t.templateSelected=e})("change",function(){return t.GetStrategies()}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(15,p,2,1,"div",12),l.qZA(),l.YNc(16,m,2,0,"ng-template",null,13,l.W1O)),2&e){const e=l.MAs(17);l.xp6(10),l.Q6J("items",t.grades)("ngModel",t.gradeSelected),l.xp6(2),l.Q6J("items",t.groups)("ngModel",t.groupSelected),l.xp6(2),l.Q6J("items",t.templates)("ngModel",t.templateSelected),l.xp6(1),l.Q6J("ngIf",!!t.strategies.length)("ngIfElse",e)}},directives:[n.w9,a.JJ,a.On,r.O5,r.sg,u.c],styles:[".page-title[_ngcontent-%COMP%]{color:#3d5e81;font-size:24px;font-family:Mulish;font-weight:700}"]}),e})();var S=s(9188);const G=[{path:"",component:f}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.u5,r.ez,n.A0,S.b,a.UX,o.G,g.zk.forRoot(),i.Bz.forChild(G)]]}),e})()}}]);