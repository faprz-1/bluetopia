(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[7182],{6158:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var o=r(5821),s=r(7368),n=r(1116);function i(e,t){if(1&e&&(s.TgZ(0,"div",1),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",null==e.errorMessage?null:e.errorMessage.label,"\n")}}let a=(()=>{class e{constructor(){}ngOnInit(){}get errorMessage(){var e,t,r,s;for(let n in null===(e=this.control)||void 0===e?void 0:e.errors)if((null===(t=this.control)||void 0===t?void 0:t.errors.hasOwnProperty(n))&&(null===(r=this.control)||void 0===r?void 0:r.touched))return o.R.GetValidatorErrorMessage(n,null===(s=this.control)||void 0===s?void 0:s.errors[n]);return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-control-messages"]],inputs:{control:"control"},decls:1,vars:1,consts:[["class","color-red",4,"ngIf"],[1,"color-red"]],template:function(e,t){1&e&&s.YNc(0,i,2,1,"div",0),2&e&&s.Q6J("ngIf",null!==t.errorMessage)},directives:[n.O5],styles:[""]}),e})()},7182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RegisterUserModule:()=>B});var o=r(1116),s=r(2894),n=r(1041),i=r(6050),a=r(9609),l=r(5821),c=r(7368),d=r(407),u=r(6189),g=r(1392),p=r(2874),m=r(8118),h=r(6158),Z=r(4391);function v(e,t){if(1&e&&(c.TgZ(0,"ng-option",21),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.studentId),c.xp6(1),c.Oqu(null==e.student?null:e.student.registerNumber)}}function f(e,t){1&e&&(c.TgZ(0,"div",8),c._uU(1,"Contrase\xf1a"),c.qZA())}function w(e,t){1&e&&(c.TgZ(0,"div",8),c._uU(1," Por favor ingresa la contrase\xf1a que asign\xf3 tu maestro "),c.qZA())}function x(e,t){1&e&&(c.TgZ(0,"span",22),c._uU(1,"Por favor verifica tus datos"),c.qZA())}let T=(()=>{class e{constructor(e,t,r,o){this.activatedRoute=e,this.api=t,this.toast=r,this.nav=o,this.onBackClicked=new c.vpe,this.onNextClicked=new c.vpe,this.registerUid=null,this.studentGroups=[],this.credentialsForm=new n.cw({studentId:new n.NI(null,[n.kI.required]),username:new n.NI(null,[n.kI.required]),password:new n.NI(null,[n.kI.required])}),this.masterKey=null,this.isPasswordShowing=!1}ngOnInit(){this.GetParams()}GetParams(){this.activatedRoute.params.subscribe(e=>{this.registerUid=e.registerUid,this.GetStudentGroups()})}GetStudentGroups(){this.api.Get(`/StudentsGroups/ByRegisterUid/${this.registerUid}`).subscribe(e=>{let t=e.studentGroups;this.masterKey=e.masterKey,this.studentGroups=t.filter(e=>!!e.student&&!e.student.userId)},e=>{this.toast.ShowError("Este link ya no es v\xe1lido"),this.nav.GoTo("landing-page")})}BuildStudentFullName(e){return e?`${e.name} ${e.fatherLastname} ${e.motherLastname}`:""}RegisterStudent(){var e,t;if(this.credentialsForm.invalid)return this.toast.ShowWarning("Favor de llenar todos los campos correctamente"),void this.credentialsForm.markAllAsTouched();let r=this.credentialsForm.value;r.schoolId=null===(t=null===(e=this.studentGroups[0])||void 0===e?void 0:e.student)||void 0===t?void 0:t.schoolId,this.onNextClicked.emit(r)}AreCredentialsValid(){var e,t;let r=null===(e=this.credentialsForm.get("password"))||void 0===e?void 0:e.value,o=null===(t=this.credentialsForm.get("username"))||void 0===t?void 0:t.value;return r&&null!=this.masterKey?r==this.masterKey&&null!=o:null!=r&&null!=o}TogglePassword(){this.isPasswordShowing=!this.isPasswordShowing;var e=document.getElementById("password");e.type="password"===e.type?"text":"password"}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.gz),c.Y36(g.sM),c.Y36(u.k),c.Y36(d.f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-register-student"]],outputs:{onBackClicked:"onBackClicked",onNextClicked:"onNextClicked"},decls:37,vars:9,consts:[[1,"d-flex","flex-column","w-100",2,"gap","48px"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"gap","12px"],[1,"title"],[1,"text"],[3,"formGroup"],[1,"text","w-100","text-left"],["formControlName","studentId","placeholder","Selecciona tu n\xfamero de registro",1,"form-control","with-border","w-100",3,"clearable"],[3,"value",4,"ngFor","ngForOf"],[1,"text","text-left","w-100"],[1,"input-container","mb-2"],[1,"input-icon-container"],["src","assets/icons/user.svg"],["type","text","placeholder","Usuario","formControlName","username",1,"form-control","with-border"],["class","text text-left w-100",4,"ngIf"],["src","assets/icons/lock.svg"],["type","password","id","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control","with-border"],[1,"form-control","form-check","clickable",3,"click"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input","clickable",3,"checked"],["for","flexCheckChecked",1,"form-check-label","text-small","clickable"],["class","text-small text-danger",4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"],[3,"value"],[1,"text-small","text-danger"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._uU(3,"\xa1Bienvenido Alumno!"),c.qZA(),c.TgZ(4,"div",3),c._uU(5,"Crea tu usuario"),c.qZA(),c.qZA(),c.ynx(6,4),c.TgZ(7,"div",1),c.TgZ(8,"div",5),c._uU(9,"Selecciona tu n\xfamero de registro"),c.qZA(),c.TgZ(10,"ng-select",6),c.YNc(11,v,2,2,"ng-option",7),c.qZA(),c.qZA(),c.TgZ(12,"div",1),c.TgZ(13,"div",3),c._uU(14,"Crea tus credenciales"),c.qZA(),c.TgZ(15,"div",3),c._uU(16," Para la contrase\xf1a te recomendamos utilizar algo que puedas recordar, puede ser tu nombre, tu color favorito , tu cumplea\xf1os o tu personaje favorito. "),c.qZA(),c.TgZ(17,"div",8),c._uU(18,"Usuario"),c.qZA(),c.TgZ(19,"div",9),c.TgZ(20,"div",10),c._UZ(21,"img",11),c.qZA(),c._UZ(22,"input",12),c.qZA(),c.YNc(23,f,2,0,"div",13),c.YNc(24,w,2,0,"div",13),c.TgZ(25,"div",9),c.TgZ(26,"div",10),c._UZ(27,"img",14),c.qZA(),c._UZ(28,"input",15),c.qZA(),c.TgZ(29,"div",16),c.NdJ("click",function(){return t.TogglePassword()}),c._UZ(30,"input",17),c.TgZ(31,"label",18),c._uU(32),c.qZA(),c.qZA(),c.YNc(33,x,2,0,"span",19),c.qZA(),c.BQk(),c.TgZ(34,"div",1),c.TgZ(35,"button",20),c.NdJ("click",function(){return t.RegisterStudent()}),c._uU(36," Empezar "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.Q6J("formGroup",t.credentialsForm),c.xp6(4),c.Q6J("clearable",!1),c.xp6(1),c.Q6J("ngForOf",t.studentGroups),c.xp6(12),c.Q6J("ngIf",null==t.masterKey),c.xp6(1),c.Q6J("ngIf",null!=t.masterKey),c.xp6(6),c.Q6J("checked",t.isPasswordShowing),c.xp6(2),c.hij(" ",t.isPasswordShowing?"Ocultar Contrase\xf1a":"Mostrar Contrase\xf1a"," "),c.xp6(1),c.Q6J("ngIf",!t.credentialsForm.invalid&&!t.AreCredentialsValid()),c.xp6(2),c.Q6J("disabled",!t.AreCredentialsValid()))},directives:[n.JL,n.sg,Z.w9,n.JJ,n.u,o.sg,n.Fj,o.O5,Z.xv],styles:[""]}),e})();const b=function(e){return{"text-success":e}};let q=(()=>{class e{constructor(e,t){this.nav=e,this.api=t,this.userType=""}get text1(){switch(this.userType){case"maestro":return"Aqu\xed podr\xe1s dise\xf1ar estrategias de aprendizaje paso a paso, tambi\xe9n podr\xe1s consultar y usar estrategias ya creadas.";default:return"En esta plataforma tus docentes podr\xe1n crear sus estrategias r\xe1pida y ordenadamente."}}get text2(){switch(this.userType){case"maestro":return"De forma acompa\xf1ada lograr\xe1s reinventar tus clases.";default:return"Tus alumnos se podr\xe1n conectar con el profesor y recibir y subir sus tareas."}}get text3(){switch(this.userType){case"maestro":return"Y ser\xe1 sencillo planear";default:return"Tus padres de familia podr\xe1n estar al tanto de todo lo que su hijo esta realizando y ver sus trabajos as\xed como compratirlos en redes sociales."}}get text4(){switch(this.userType){case"maestro":return"Comienza registrando a tus alumnos";default:return"Comienza registrando a tus maestros"}}ngOnInit(){}GoToAddTeachers(){const e=this.api.GetUser();this.nav.GoTo(`inicio/${e.role.name.toLowerCase()}/registrar-maestros`)}GoToAddByCsv(){const e=this.api.GetUser();let t=`inicio/${e.role.name.toLowerCase()}`;switch(e.role.name){case"Teacher":t+="/registrar-estudiantes";break;default:t+="/registrar-maestros"}this.nav.GoTo(`${t}/csv`)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.f),c.Y36(g.sM))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-welcome-view"]],inputs:{userType:"userType"},decls:22,vars:8,consts:[[1,"d-flex","w-100","justify-content-center"],[1,"welcome-container"],[1,"header-container","mt-3"],[1,"title","mb-4",3,"ngClass"],[1,"text"],[1,"d-flex","align-items-center",2,"margin-bottom","12px"],[1,"text","mr-3"],["src","assets/img/welcome_1.png","alt","welcome_1"],["src","assets/img/welcome_2.png","alt","welcome_1"],[1,"text","ml-3"],[1,"subtitle","mt-5","mb-4"],[1,"d-md-flex","w-100","justify-content-center","gap-45","flex-xs-column"],[1,"w-50","btn","btn-outline-primary","mb-4",3,"click"],[1,"w-50","btn","btn-primary","mb-4",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._uU(4),c.qZA(),c.TgZ(5,"div",4),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c._uU(9),c.qZA(),c._UZ(10,"img",7),c.qZA(),c.TgZ(11,"div",5),c._UZ(12,"img",8),c.TgZ(13,"div",9),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"div",10),c._uU(16),c.qZA(),c.TgZ(17,"div",11),c.TgZ(18,"button",12),c.NdJ("click",function(){return t.nav.GoToUserRoute("")}),c._uU(19," Continuar sin registrar "),c.qZA(),c.TgZ(20,"button",13),c.NdJ("click",function(){return t.GoToAddByCsv()}),c._uU(21," Registrar "),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("ngClass",c.VKq(6,b,"maestro"==t.userType)),c.xp6(1),c.hij(" \xa1Bienvenido ","escuela"!=t.userType?t.userType:"","! "),c.xp6(2),c.hij(" ",t.text1," "),c.xp6(3),c.hij(" ",t.text2," "),c.xp6(5),c.hij(" ",t.text3," "),c.xp6(2),c.hij(" ",t.text4," "))},directives:[o.mk],styles:[".welcome-container[_ngcontent-%COMP%]{max-width:100%;width:850px}.faded-title[_ngcontent-%COMP%]{font-size:8rem;font-weight:700;color:rgba(189,221,255,.3333333333333333)}.header-container[_ngcontent-%COMP%]{margin-bottom:58px;max-width:500px;display:inline-block}.subtitle[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;color:var(--blue-dark,#2369b5);font-family:Mulish}.btn[_ngcontent-%COMP%]{font-size:1.25rem;padding:16px 25px;font-weight:800}.btns-container[_ngcontent-%COMP%]{width:100%;max-width:550px;margin-bottom:2rem;display:inline-block}.form[_ngcontent-%COMP%]{width:100%;max-width:380px}.form[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{margin-bottom:74px}.link[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;color:#1081fb}.gap-45[_ngcontent-%COMP%]{grid-gap:45px;gap:45px}"]}),e})();function A(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",31),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).Forward()}),c._uU(1," Registrarme "),c.qZA()}}const C=function(e){return{"justify-content-md-between":e}};function k(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"div",15),c.TgZ(2,"div",16),c._uU(3," \xa1Bienvenido! "),c.qZA(),c.TgZ(4,"div",17),c._uU(5," Comienza gratis tu registro hoy "),c.qZA(),c.qZA(),c.TgZ(6,"form",18),c.TgZ(7,"div",19),c.TgZ(8,"div",20),c._UZ(9,"img",21),c.qZA(),c.TgZ(10,"input",22),c.NdJ("keyup.enter",function(){return c.CHM(e),c.oxw(2).LoginUser()}),c.qZA(),c.qZA(),c._UZ(11,"app-control-messages",23),c.TgZ(12,"div",19),c.TgZ(13,"div",20),c._UZ(14,"img",24),c.qZA(),c.TgZ(15,"input",25),c.NdJ("keyup.enter",function(){return c.CHM(e),c.oxw(2).LoginUser()}),c.qZA(),c.qZA(),c._UZ(16,"app-control-messages",23),c.qZA(),c.TgZ(17,"div",26),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).passwordForgotten=!0}),c.TgZ(18,"a"),c._uU(19," \xbfOlvidaste tu contrase\xf1a? "),c.qZA(),c.qZA(),c.TgZ(20,"div",27),c.TgZ(21,"div",28),c.YNc(22,A,2,0,"button",29),c.TgZ(23,"button",30),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).LoginUser()}),c._uU(24," Iniciar sesi\xf3n "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(6),c.Q6J("formGroup",e.userForm),c.xp6(5),c.Q6J("control",e.userForm.get("email")),c.xp6(5),c.Q6J("control",e.userForm.get("password")),c.xp6(5),c.Q6J("ngClass",c.VKq(5,C,e.canRegister)),c.xp6(1),c.Q6J("ngIf",e.canRegister)}}function U(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"app-register-student",34),c.NdJ("onBackClicked",function(){return c.CHM(e),c.oxw(3).GoBack()})("onNextClicked",function(t){return c.CHM(e),c.oxw(3).ApiRegisterUser(t,null,"Student")}),c.qZA(),c.qZA()}}function _(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",15),c.TgZ(2,"div",35),c._uU(3," Cu\xe9ntanos m\xe1s sobre t\xed "),c.qZA(),c.TgZ(4,"div",17),c._uU(5," Y m\xe1s sobre la instituci\xf3n que representas "),c.qZA(),c.qZA(),c.TgZ(6,"form",18),c.TgZ(7,"div",19),c.TgZ(8,"div",20),c._UZ(9,"img",36),c.qZA(),c._UZ(10,"input",37),c.TgZ(11,"span",38),c._uU(12,"*"),c.qZA(),c.qZA(),c._UZ(13,"app-control-messages",23),c.TgZ(14,"div",19),c.TgZ(15,"div",20),c._UZ(16,"img",39),c.qZA(),c._UZ(17,"input",40),c.qZA(),c._UZ(18,"app-control-messages",23),c.ynx(19,41),c.TgZ(20,"div",19),c.TgZ(21,"div",20),c._UZ(22,"img",42),c.qZA(),c._UZ(23,"input",43),c.TgZ(24,"span",38),c._uU(25,"*"),c.qZA(),c.qZA(),c._UZ(26,"app-control-messages",23),c.TgZ(27,"div",19),c.TgZ(28,"div",20),c._UZ(29,"img",44),c.qZA(),c._UZ(30,"input",45),c.TgZ(31,"span",38),c._uU(32,"*"),c.qZA(),c.qZA(),c._UZ(33,"app-control-messages",23),c.TgZ(34,"div",19),c.TgZ(35,"div",20),c._UZ(36,"img",46),c.qZA(),c._UZ(37,"input",47),c.qZA(),c._UZ(38,"app-control-messages",23),c.BQk(),c.TgZ(39,"div",19),c.TgZ(40,"div",20),c._UZ(41,"img",48),c.qZA(),c._UZ(42,"input",49),c.TgZ(43,"span",38),c._uU(44,"*"),c.qZA(),c.qZA(),c._UZ(45,"app-control-messages",23),c.TgZ(46,"div",19),c.TgZ(47,"div",20),c._UZ(48,"img",21),c.qZA(),c._UZ(49,"input",50),c.TgZ(50,"span",38),c._uU(51,"*"),c.qZA(),c.qZA(),c._UZ(52,"app-control-messages",23),c.TgZ(53,"div",19),c.TgZ(54,"div",20),c._UZ(55,"img",24),c.qZA(),c.TgZ(56,"input",51),c.NdJ("keyup",function(){return c.CHM(e),c.oxw(3).OnPasswordChange()})("keyup.enter",function(){return c.CHM(e),c.oxw(3).RegisterUser()}),c.qZA(),c.TgZ(57,"span",38),c._uU(58,"*"),c.qZA(),c.qZA(),c._UZ(59,"app-control-messages",23),c.TgZ(60,"div",19),c.TgZ(61,"div",20),c._UZ(62,"img",24),c.qZA(),c.TgZ(63,"input",52),c.NdJ("keyup.enter",function(){return c.CHM(e),c.oxw(3).RegisterUser()}),c.qZA(),c.TgZ(64,"span",38),c._uU(65,"*"),c.qZA(),c.qZA(),c._UZ(66,"app-control-messages",23),c.qZA(),c.TgZ(67,"div",27),c.TgZ(68,"div",53),c.TgZ(69,"button",54),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).Back()}),c._uU(70," Volver "),c.qZA(),c.TgZ(71,"button",31),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).RegisterUser()}),c._uU(72," Registrar "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(6),c.Q6J("formGroup",e.userRegisterForm),c.xp6(7),c.Q6J("control",e.userForm.get("username")),c.xp6(5),c.Q6J("control",e.userRegisterForm.get("phone")),c.xp6(1),c.Q6J("formGroup",e.schoolForm),c.xp6(7),c.Q6J("control",e.schoolForm.get("name")),c.xp6(7),c.Q6J("control",e.schoolForm.get("address")),c.xp6(5),c.Q6J("control",e.schoolForm.get("phone")),c.xp6(7),c.Q6J("control",e.userRegisterForm.get("workTitle")),c.xp6(7),c.Q6J("control",e.userRegisterForm.get("email")),c.xp6(7),c.Q6J("control",e.userRegisterForm.get("password")),c.xp6(7),c.Q6J("control",e.userRegisterForm.get("confirmPassword"))}}function y(e,t){if(1&e&&(c.TgZ(0,"div",14),c.TgZ(1,"div",11),c.YNc(2,U,2,0,"div",32),c.YNc(3,_,73,11,"div",33),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngSwitch",e.userType),c.xp6(1),c.Q6J("ngSwitchCase","estudiante")}}function N(e,t){if(1&e&&(c.TgZ(0,"div",55),c._UZ(1,"app-welcome-view",56),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("userType",e.userType)}}function I(e,t){if(1&e&&(c.TgZ(0,"div",6),c.TgZ(1,"div",7),c.TgZ(2,"div",8),c.TgZ(3,"div"),c._UZ(4,"img",9),c.qZA(),c.TgZ(5,"div",10),c.TgZ(6,"div",11),c.YNc(7,k,25,7,"div",12),c.YNc(8,y,4,2,"div",12),c.YNc(9,N,2,1,"div",13),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngSwitch",e.registerStep),c.xp6(1),c.Q6J("ngSwitchCase",1),c.xp6(1),c.Q6J("ngSwitchCase",2),c.xp6(1),c.Q6J("ngSwitchCase",3)}}function S(e,t){1&e&&(c.TgZ(0,"div",68),c._uU(1," Campo obligatorio "),c.qZA())}function J(e,t){1&e&&(c.TgZ(0,"div",68),c._uU(1," Correo electr\xf3nico no valido"),c.qZA())}function P(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8),c.TgZ(1,"h2",60),c._uU(2,"Ingresa tu correo"),c.qZA(),c.TgZ(3,"div",61),c.TgZ(4,"div",62),c.TgZ(5,"input",63),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw(2).email=t}),c.qZA(),c.YNc(6,S,2,0,"div",64),c.YNc(7,J,2,0,"div",64),c.qZA(),c.TgZ(8,"div",27),c.TgZ(9,"div",65),c.TgZ(10,"button",66),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).SendEmail()}),c._uU(11,"Continuar"),c.qZA(),c.TgZ(12,"button",67),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).GoBack()}),c._uU(13,"Cancelar"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("ngModel",e.email),c.xp6(1),c.Q6J("ngIf",!e.email),c.xp6(1),c.Q6J("ngIf",e.email&&!e.pattern.test(e.email)),c.xp6(3),c.Q6J("disabled",e.loading),c.xp6(2),c.Q6J("disabled",e.loading)}}function M(e,t){1&e&&(c.TgZ(0,"div",8),c._UZ(1,"i",69),c.qZA())}function F(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8),c.TgZ(1,"div",61),c.TgZ(2,"div",62),c.TgZ(3,"h4",17),c._uU(4,"Ingrese el PIN"),c.qZA(),c.TgZ(5,"input",70),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw(2).pin=t}),c.qZA(),c.qZA(),c.TgZ(6,"div",27),c.TgZ(7,"div",65),c.TgZ(8,"button",66),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).TryPIN()}),c._uU(9,"Continuar"),c.qZA(),c.TgZ(10,"button",67),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).GoBack()}),c._uU(11,"Cancelar"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("ngModel",e.pin),c.xp6(3),c.Q6J("disabled",e.loading),c.xp6(2),c.Q6J("disabled",e.loading)}}function R(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",8),c.TgZ(1,"div",61),c.TgZ(2,"div",62),c.TgZ(3,"h2",60),c._uU(4,"Ingresa tu nueva contrase\xf1a"),c.qZA(),c.TgZ(5,"input",71),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw(2).newPassword=t}),c.qZA(),c.qZA(),c.TgZ(6,"div",27),c.TgZ(7,"div",65),c.TgZ(8,"button",66),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).SetPassword()}),c._uU(9,"Continuar"),c.qZA(),c.TgZ(10,"button",67),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).GoBack()}),c._uU(11,"Cancelar"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("ngModel",e.newPassword),c.xp6(3),c.Q6J("disabled",e.loading),c.xp6(2),c.Q6J("disabled",e.loading)}}function Q(e,t){if(1&e&&(c.TgZ(0,"div",57),c.TgZ(1,"div",58),c.TgZ(2,"div",8),c._UZ(3,"img",9),c.TgZ(4,"div",16),c._uU(5,"Recupera tu cuenta"),c.qZA(),c.qZA(),c.YNc(6,P,14,5,"div",59),c.YNc(7,M,2,0,"div",59),c.YNc(8,F,12,3,"div",59),c.YNc(9,R,12,3,"div",59),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngIf",0==e.step),c.xp6(1),c.Q6J("ngIf",e.loading),c.xp6(1),c.Q6J("ngIf",2==e.step),c.xp6(1),c.Q6J("ngIf",3==e.step)}}let G=(()=>{class e{constructor(e,t,r,o,s,i){this.navigation=e,this.activeRoute=t,this.toast=r,this.api=o,this.notiServ=s,this.pushService=i,this.registerStep=1,this.userType="",this.teacherIdToAbsorb="",this.studentGroupRegisterUid=null,this.userForm=new n.cw({email:new n.NI(null,[n.kI.required,n.kI.email]),password:new n.NI(null,[n.kI.required,n.kI.minLength(3)])}),this.userRegisterForm=new n.cw({username:new n.NI(null,[n.kI.required]),workTitle:new n.NI(null,[n.kI.required]),email:new n.NI(null,[n.kI.required,n.kI.email]),password:new n.NI(null,[n.kI.required]),confirmPassword:new n.NI(null,[n.kI.required]),phone:new n.NI(null,[n.kI.required,l.R.CheckOnlyIntegerNumbers]),school:new n.cw({name:new n.NI(null,[n.kI.required]),phone:new n.NI(null,[n.kI.required,l.R.CheckOnlyIntegerNumbers]),address:new n.NI(null,[n.kI.required,n.kI.minLength(3)])})}),this.passwordForgotten=!1,this.email="",this.pin="",this.newPassword="",this.successUpdate=!1,this.loading=!1,this.step=0,this.pattern=new RegExp("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")}get schoolForm(){return this.userRegisterForm.get("school")}get canRegister(){switch(this.userType){case"estudiante":return!1;default:return!0}}ngOnInit(){this.GetParams()}GetParams(){this.activeRoute.params.subscribe(e=>{var t,r,o,s;this.userType=e.userType,this.teacherIdToAbsorb=e.teacherId,this.studentGroupRegisterUid=e.registerUid,(this.teacherIdToAbsorb||this.studentGroupRegisterUid)&&(this.registerStep=2),"maestro"==this.userType&&(null===(t=this.userRegisterForm.get("phone"))||void 0===t||t.clearValidators(),null===(r=this.userRegisterForm.get("phone"))||void 0===r||r.setValidators([l.R.CheckOnlyIntegerNumbers]),null===(o=this.schoolForm.get("phone"))||void 0===o||o.clearValidators(),null===(s=this.schoolForm.get("phone"))||void 0===s||s.setValidators([l.R.CheckOnlyIntegerNumbers]))})}Back(){this.registerStep--}Forward(){this.registerStep++}OnPasswordChange(){this.userRegisterForm.controls.confirmPassword.setValidators([n.kI.required,l.R.matchString(this.userRegisterForm.controls.password.value,"Las contrase\xf1as no coinciden")]),this.userRegisterForm.updateValueAndValidity()}RegisterUser(){if(this.userRegisterForm.invalid)return void this.toast.ShowWarning("Favor de llenar todos los campos");let e=Object.assign({},this.userRegisterForm.value);this.teacherIdToAbsorb&&(e.teacherIdToAbsorb=this.teacherIdToAbsorb),this.ApiRegisterUser({email:e.email,password:e.password,active:!0},e,this.userType.toLowerCase())}ApiRegisterUser(e,t,r){e.active=!0,this.api.Post("/Usuarios",{user:e,userData:t,role:r}).subscribe(t=>{this.api.Post("/Usuarios/login",{email:e.email?e.email:e.username,password:e.password}).subscribe(e=>{localStorage.clear(),this.api.SetToken(e.id),this.api.Get("/Usuarios/withCredentials",!0).subscribe(e=>{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("ttl",a().add(1209600,"s").toISOString()),this.notiServ.LoadNotifications(),this.pushService.GetUserID(),this.toast.ShowSuccess("Cuenta registrada correctamente");let t=this.api.GetUser(),r=t.role.name.toLowerCase();"School"==t.role.name||"Teacher"==t.role.name?this.Forward():this.navigation.GoTo(`/inicio/${r}/`)},e=>{this.toast.ShowError(e.error.error.message)})})})}LoginUser(){const e=this.userForm.value;e.email&&e.password?this.api.Post("/Usuarios/login",{email:e.email,password:e.password},!1).subscribe(e=>{localStorage.clear(),this.api.SetToken(e.id),this.api.Get("/Usuarios/withCredentials",!0).subscribe(e=>{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("ttl",a().add(1209600,"s").toISOString()),this.notiServ.LoadNotifications(),this.pushService.GetUserID(),this.toast.ShowSuccess("Sesi\xf3n iniciada exitosamente");let t=this.api.GetUser().role.name.toLowerCase();this.navigation.GoTo(`/inicio/${t}/`)},e=>{this.toast.ShowError(e.error.error.message)})},e=>{this.toast.ShowError(e.error.error.message)}):this.toast.ShowWarning("Favor de escribir sus credenciales")}SendEmail(){this.loading=!0,this.step=1,this.api.Post("/PasswordResetPINs/createAndSend",{email:this.email},!1).subscribe(e=>{"notRegistered"==e.msg?(this.toast.ShowError("Usuario no registrado"),this.step=0):(this.toast.ShowSuccess("Se envio el correo correctamente"),this.step=2),this.loading=!1},e=>{this.toast.ShowError(e.err),this.loading=!1,this.step=0})}TryPIN(){this.loading=!0,this.api.Post("/PasswordResetPINs/consume",{pin:this.pin,email:this.email},!1).subscribe(e=>{"Pin incorrecto"==e.msg?(this.toast.ShowError("PIN incorrecto"),this.pin="",this.step=0,this.loading=!1):(this.toast.ShowSuccess("PIN correcto"),this.step=3,this.loading=!1)},e=>{this.toast.ShowError(e.err),this.loading=!1,this.step=0})}SetPassword(){this.api.Post("/PasswordResetPINs/resetPassword",{password:this.newPassword,email:this.email},!1).subscribe(e=>{"usuario actualizado"==e.msg?(this.toast.ShowSuccess("Contrase\xf1a asignada correctamente"),this.successUpdate=!0,this.loading=!1,this.step=0,this.passwordForgotten=!1,this.email=""):(this.toast.ShowSuccess("Sucedio un Error"),this.loading=!1,this.step=0)})}GoBack(){this.passwordForgotten=!1,this.step=0,this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.f),c.Y36(s.gz),c.Y36(u.k),c.Y36(g.sM),c.Y36(p.g),c.Y36(m._))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-register-user"]],decls:7,vars:3,consts:[[1,"full-page"],[1,"d-flex","h-100"],[1,"vertical-text-container"],[1,"vertical-text","faded-title"],["class","w-100 vertical-content",4,"ngIf"],["class","w-100 vertical-content container",4,"ngIf"],[1,"w-100","vertical-content"],[1,"row","m-0"],[1,"col-12","text-center"],["src","assets/img/project_name_medium.png","alt","Bluetopia",1,"title-img"],[1,"text-center"],[3,"ngSwitch"],["class","header-container mb-0",4,"ngSwitchCase"],["class","mb-0",4,"ngSwitchCase"],[1,"header-container","mb-0"],[1,"header-container"],[1,"title"],[1,"text"],[1,"form","d-inline-block",3,"formGroup"],[1,"input-container"],[1,"input-icon-container","text-center"],["src","assets/icons/mail.png"],["type","text","placeholder","Correo electronico","formControlName","email",1,"form-control",3,"keyup.enter"],[3,"control"],["src","assets/icons/lock.png"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"keyup.enter"],[1,"link",3,"click"],[1,"btns-container"],[1,"d-flex","justify-content-center","flex-wrap",3,"ngClass"],["class","mb-5 btn btn-primary",3,"click",4,"ngIf"],[1,"mb-5","btn","btn-success",3,"click"],[1,"mb-5","btn","btn-primary",3,"click"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"onBackClicked","onNextClicked"],[1,"title","text-success"],["src","assets/icons/user.png"],["type","text","placeholder","Nombre","formControlName","username",1,"form-control"],[1,"required-span"],["src","assets/icons/phone.png"],["type","text","maxlength","10","placeholder","Tel\xe9fono","formControlName","phone",1,"form-control"],[3,"formGroup"],["src","assets/icons/school.png"],["type","text","placeholder","Nombre de la instituci\xf3n","formControlName","name",1,"form-control"],["src","assets/icons/location.png"],["type","text","placeholder","Direcci\xf3n","formControlName","address",1,"form-control"],["src","assets/icons/user-phone.png"],["type","text","maxlength","10","placeholder","Tel\xe9fono escolar","formControlName","phone",1,"form-control"],["src","assets/icons/users-group.png"],["type","text","placeholder","Puesto","formControlName","workTitle",1,"form-control"],["type","text","placeholder","Correo","formControlName","email",1,"form-control"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"keyup","keyup.enter"],["type","password","placeholder","Confirmar contrase\xf1a","formControlName","confirmPassword",1,"form-control",3,"keyup.enter"],[1,"d-flex","justify-content-center","justify-content-md-between","flex-wrap"],[1,"mb-5","btn","btn-outline-primary",3,"click"],[1,"mb-0"],[3,"userType"],[1,"w-100","vertical-content","container"],[1,"row"],["class","col-12 text-center",4,"ngIf"],[1,"m-4","text"],[1,"form","d-inline-block"],[1,"form-group"],["type","email","id","email","name","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$","placeholder","ejemplo@correo.com",1,"form-control","text-center",3,"ngModel","ngModelChange"],["class","form-control-feedback color-red text-center",4,"ngIf"],[1,"d-flex","justify-content-between","row"],["type","submit",1,"btn","btn-success","col-4",3,"disabled","click"],[1,"btn","btn-secondary","col-4",3,"disabled","click"],[1,"form-control-feedback","color-red","text-center"],[1,"zmdi","zmdi-spinner","zmdi-hc-4x","zmdi-hc-spin"],["type","number","name","pin",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","newPassword",1,"form-control","text-center",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._uU(4),c.qZA(),c.qZA(),c.YNc(5,I,10,4,"div",4),c.YNc(6,Q,10,4,"div",5),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.hij(" ",t.userType," "),c.xp6(1),c.Q6J("ngIf",!t.passwordForgotten),c.xp6(1),c.Q6J("ngIf",t.passwordForgotten))},directives:[o.O5,o.RF,o.n9,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,h.w,o.mk,o.ED,T,n.nD,q,n.Q7,n.c5,n.On,n.wV],styles:[".vertical-text-container[_ngcontent-%COMP%]{position:relative;height:100%;width:413px}.vertical-text[_ngcontent-%COMP%]{text-transform:uppercase;position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%) rotate(-90deg)}.faded-title[_ngcontent-%COMP%]{font-size:8rem;font-weight:700;color:rgba(189,221,255,.3333333333333333)}.header-container[_ngcontent-%COMP%]{margin-bottom:58px;max-width:550px;display:inline-block}.btn[_ngcontent-%COMP%]{font-size:1.25rem;width:225px;padding:16px 0;font-weight:800}.btns-container[_ngcontent-%COMP%]{width:100%;display:inline-block}.form[_ngcontent-%COMP%]{width:100%;max-width:380px}.form[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{margin-bottom:74px}.link[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;color:#1081fb}"]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.u5,o.ez,n.UX,i.G]]}),e})();var Y=r(5470),z=r(193);let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.u5,o.ez,Z.A0,n.UX,i.G,Y.zk.forRoot(),z.kn.forRoot()]]}),e})();const j=[{path:"",component:G}];let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.u5,o.ez,O,n.UX,E,i.G,s.Bz.forChild(j)]]}),e})()},5821:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});var o=r(7368);let s=(()=>{class e{constructor(){}static GetValidatorErrorMessage(e,t){return[{name:"required",label:"Campo requerido"},{name:"invalidRFC",label:"No tiene el formato adecuado"},{name:"invalidEmailAddress",label:"Correo inv\xe1lido"},{name:"invalidPassword",label:"Las contrase\xf1as no coinciden"},{name:"minlength",label:`M\xednimo ${t.requiredLength} caracteres `},{name:"maxlength",label:`M\xe1ximo ${t.requiredLength} caracteres `},{name:"invalidNumber",label:"Solo n\xfameros enteros, o con decimal"},{name:"invalidIntegerNumber",label:"Solo n\xfameros enteros"},{name:"matchstring",label:`${t.matchStringCustomLabel?t.matchStringCustomLabel:"El texto no coincide"}`}].find(t=>t.name==e)}static matchString(e,t=null){return r=>r.value?e==r.value?null:t?{matchstring:{requiredString:e,matchStringCustomLabel:t}}:{matchstring:e}:null}static CheckOnlyIntegerNumbers(e){return(null==e?void 0:e.value)?/^[0-9]+$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidIntegerNumber:!0}:null:{invalidIntegerNumber:!0}:null}static CheckOnlyNumbers(e){return(null==e?void 0:e.value)?/^[1-9]\d*\.?\d*$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidNumber:!0}:null:{invalidNumber:!0}:null}static EmailValidator(e){return(null==e?void 0:e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/))?null:{invalidEmailAddress:!0}}static RfcValidator(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.value.match(/^([A-Z\xd1&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/))?null:{invalidRFC:!0}}}return e.password="",e.confirmPassword="",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);