(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[849],{6849:(t,e,n)=>{"use strict";n.r(e),n.d(e,{StudentsCsvModule:()=>w});var i=n(1116),o=n(1892),a=n(3243),d=n(1041),s=n(6050),r=n(7368),l=n(2722),c=n(1148),g=n(1392),u=n(6189),p=n(407),m=n(5470),h=n(7536);const Z=["studentsAlertModal"];function b(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",16),r._uU(2," Es f\xe1cil registrar a tus alumnos "),r.qZA(),r.TgZ(3,"div",17),r._uU(4," Simplemente baja nuestra plantilla de Excel, ll\xe9nala y s\xfabela de nuevo "),r.qZA(),r.TgZ(5,"div",18),r.TgZ(6,"div",19),r._UZ(7,"div",20),r.TgZ(8,"div",21),r.TgZ(9,"div",22),r._uU(10,"1) Descarga el formato de Excel"),r.qZA(),r.TgZ(11,"div",23),r._UZ(12,"img",24),r.TgZ(13,"a",25),r.NdJ("click",function(){return r.CHM(t),r.oxw().DownloadTemplate()}),r._uU(14,"Descargar"),r.qZA(),r.qZA(),r.TgZ(15,"div",17),r._uU(16,"Si tienes m\xe1s de un nivel, repetir el proceso"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",19),r._UZ(18,"div",26),r.TgZ(19,"div",21),r.TgZ(20,"div",22),r._uU(21,"2) Llena la plantilla, te explicamos c\xf3mo."),r.qZA(),r.TgZ(22,"div",27),r._UZ(23,"div",28),r._UZ(24,"div",29),r._UZ(25,"div",30),r._UZ(26,"div",31),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"div",19),r._UZ(28,"div",26),r.TgZ(29,"div",21),r.TgZ(30,"div",22),r._uU(31,"3) Sube la plantilla con los datos de tus alumnos"),r.qZA(),r.TgZ(32,"input",32,33),r.NdJ("change",function(e){return r.CHM(t),r.oxw().OnFileChanged(e)}),r.qZA(),r.TgZ(34,"div",34),r.NdJ("click",function(){return r.CHM(t),r.MAs(33).click()}),r._UZ(35,"img",35),r._uU(36," Subir excel de alumnos "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}}function f(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"div",16),r._uU(2," \xa1Ya casi estamos listos para empezar! "),r.qZA(),r.TgZ(3,"div",17),r._uU(4," Estos son los grados y grupos que detectamos en tu archivo de excel, revisa que todo est\xe9 en orden para poder finalizar con tu registro. "),r.qZA(),r.TgZ(5,"div",17),r._uU(6," Primaria "),r.qZA(),r._UZ(7,"app-grades-groups-view",36),r.qZA()),2&t){const t=r.oxw();r.xp6(7),r.Q6J("students",t.students)}}const v=function(){return{backdrop:"static",keyboard:!1}};let x=(()=>{class t{constructor(t,e,n,i,o){this.downloadFile=t,this.csvService=e,this.api=n,this.toast=i,this.nav=o,this.dataConversions=[{oldKey:"Nombre",newKey:"name"},{oldKey:"Apellido P",newKey:"fatherLastname"},{oldKey:"Apellido M",newKey:"motherLastname"},{oldKey:"Numero de registro",newKey:"registerNumber"},{oldKey:"Grado",newKey:"grade"},{oldKey:"Grupo",newKey:"group"}],this.students=[],this.loading={uploading:!1},this.step=1}ngOnInit(){}DownloadTemplate(){this.downloadFile.DownloadWithoutApi("assets/docs/studentsTemplate.csv","studentsTemplate.csv")}Cancel(){this.step--}Continue(){switch(this.step){case 2:this.UploadStudents()}this.step++}OnFileChanged(t){const e=t.target.files[0];if(!e)return;const n=new FileReader;n.onload=t=>{this.csvService.ReadCSV(n.result).then(t=>{this.students=this.FormatData(t.data),this.step++})},e&&n.readAsText(e,"ISO-8859-1")}FormatData(t){const e=this.api.GetUser();return t.map(t=>{let n={};return this.dataConversions.forEach(e=>{n[e.newKey]=t[e.oldKey]}),n.schoolUserId=e.id,n})}UploadStudents(){this.loading.uploading=!0,this.api.Post("/Students/Array",{students:this.students}).subscribe(t=>{var e;this.toast.ShowSuccess(`${t.length} Estudiantes agregados correctamente`),this.loading.uploading=!1,null===(e=this.studentsAlertModal)||void 0===e||e.show()},t=>{console.error("Error at uploading students",t),this.loading.uploading=!1})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(l.p),r.Y36(c.m),r.Y36(g.sM),r.Y36(u.k),r.Y36(p.f))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-students-csv"]],viewQuery:function(t,e){if(1&t&&r.Gf(Z,5),2&t){let t;r.iGM(t=r.CRH())&&(e.studentsAlertModal=t.first)}},decls:21,vars:7,consts:[[1,"content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"btns-group","mb-5"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","studentsAlertModal",1,"modal","fade",3,"config"],["studentsAlertModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"text","text-center"],[1,"text-center"],["src","assets/img/teacher-celebrating.png","alt","finished"],[1,"modal-footer","justify-content-center"],[1,"btn","btn-primary","modal-btn",3,"click"],[1,"title"],[1,"text"],[1,"steps"],[1,"d-flex"],[1,"radio-button","checked"],[1,"instructions"],[1,"step"],[1,"mb-5"],["src","assets/icons/excel.png","alt","CSV file",1,"img-template"],[1,"link",3,"click"],[1,"radio-button"],[1,"link"],[1,"title-fake-line","mb-2"],[1,"fake-line-lg","mb-2"],[1,"fake-line-sm","mb-2"],[1,"fake-line-md","last-line","mb-2"],["type","file","accept",".csv",1,"d-none",3,"change"],["studentsCsv",""],[1,"upload-container","clickeable",3,"click"],["src","assets/icons/upload.png","alt","CSV file"],[3,"students"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.YNc(2,b,37,0,"div",2),r.YNc(3,f,8,1,"div",2),r.qZA(),r.TgZ(4,"div",3),r.TgZ(5,"button",4),r.NdJ("click",function(){return e.Cancel()}),r._uU(6," Cancelar "),r.qZA(),r.TgZ(7,"button",5),r.NdJ("click",function(){return e.Continue()}),r._uU(8," Continuar "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div",6,7),r.TgZ(11,"div",8),r.TgZ(12,"div",9),r.TgZ(13,"div",10),r.TgZ(14,"div",11),r._uU(15," Ha finalizado por ahora tu registro de grupos, podr\xe1s agregar grupos m\xe1s tarde "),r.qZA(),r.TgZ(16,"div",12),r._UZ(17,"img",13),r.qZA(),r.qZA(),r.TgZ(18,"div",14),r.TgZ(19,"button",15),r.NdJ("click",function(){return r.CHM(t),r.MAs(10).hide(),e.nav.GoToUserRoute("mis-estudiantes")}),r._uU(20," Continuar "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}2&t&&(r.xp6(1),r.Q6J("ngSwitch",e.step),r.xp6(1),r.Q6J("ngSwitchCase",1),r.xp6(1),r.Q6J("ngSwitchCase",2),r.xp6(2),r.Q6J("disabled",e.loading.uploading),r.xp6(2),r.Q6J("disabled",e.loading.uploading),r.xp6(2),r.Q6J("config",r.DdM(6,v)))},directives:[i.RF,i.n9,m.oB,h.d],styles:[".content[_ngcontent-%COMP%]{padding-left:275px!important}.title[_ngcontent-%COMP%]{color:#2ed2a3;margin-bottom:20px;text-transform:none}.text[_ngcontent-%COMP%]{margin-bottom:30px}.step[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#758ca6;margin-bottom:30px!important}.img-template[_ngcontent-%COMP%]{margin-right:15px}.link[_ngcontent-%COMP%]{color:#2ed2a3}.radio-button[_ngcontent-%COMP%]{width:38px;height:38px;margin-right:50px;background-color:none;border:3px solid #1081fb;border-radius:38px}.radio-button.checked[_ngcontent-%COMP%]{background-color:#1081fb}.title-fake-line[_ngcontent-%COMP%]{height:9px;width:90px;border-radius:4px;background-color:#1081fb}.fake-line-lg[_ngcontent-%COMP%]{width:360px}.fake-line-lg[_ngcontent-%COMP%], .fake-line-md[_ngcontent-%COMP%]{height:9px;max-width:100%;border-radius:4px;background-color:#cad6e2}.fake-line-md[_ngcontent-%COMP%]{width:310px}.fake-line-sm[_ngcontent-%COMP%]{height:9px;width:285px;max-width:100%;border-radius:4px;background-color:#cad6e2}.last-line[_ngcontent-%COMP%]{margin-bottom:32px!important}.upload-container[_ngcontent-%COMP%]{display:inline-block;font-size:1rem;font-weight:500;color:#1081fb;padding:23px;border:3px dashed #1081fb;border-radius:20px}.upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:15px}.btns-group[_ngcontent-%COMP%]{margin-top:30px;display:flex;width:100%;justify-content:end}.btns-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;max-width:250px;margin-left:50px;padding:16px 0}.modal-content[_ngcontent-%COMP%]{padding:2rem}.modal-footer[_ngcontent-%COMP%]{border:none}.modal-btn[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;padding:.75rem 3rem}"]}),t})();var _=n(8838),C=n(7687);const A=[{path:"",component:x}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[d.u5,i.ez,a.A0,_.b,d.UX,s.G,C.M,m.zk.forRoot(),o.Bz.forChild(A)]]}),t})()}}]);