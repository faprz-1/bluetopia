(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[592],{2378:(t,i,n)=>{"use strict";function e(t,i,n,e,o,s,r){try{var a=t[s](r),c=a.value}catch(f){return void n(f)}a.done?i(c):Promise.resolve(c).then(e,o)}n.d(i,{g:()=>r});var o=n(7368),s=n(1392);let r=(()=>{class t{constructor(t){this.api=t,this.notifications=[]}Init(){this.LoadNotifications(),this.SusbcribeToNotifications()}SusbcribeToNotifications(){}LoadNotifications(t=!1){let i="/Notifications/getLast5";i+=t?"/"+t:"",this.api.Get(i).subscribe(t=>{this.notifications.push.apply(this.notifications,t)})}CountUnseen(){let t=0;return this.notifications.forEach(i=>{null==i.seen&&t++}),t}SetSeen(t){var i,n=this;return(i=function*(){if(null==t.seen){let i=yield n.api.Get("/Notifications/setSeen/"+t.id);n.notifications.forEach((t,e)=>{t.id==t.id&&(n.notifications[e]=i)})}},function(){var t=this,n=arguments;return new Promise(function(o,s){var r=i.apply(t,n);function a(t){e(r,o,s,a,c,"next",t)}function c(t){e(r,o,s,a,c,"throw",t)}a(void 0)})})()}PrepareUrl(t){return t?t.split("/#")[1]:""}}return t.\u0275fac=function(i){return new(i||t)(o.LFG(s.sM))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);