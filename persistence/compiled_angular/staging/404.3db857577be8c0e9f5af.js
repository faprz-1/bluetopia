(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[404],{6404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CreateEventOrProductModule:()=>y});var i=n(1116),o=n(2894),r=n(4391),c=n(1041),s=n(6050),a=n(5470),l=n(9355),d=n(7368),g=n(1392),f=n(407),u=n(6189),m=n(193),p=n(6211);function v(e,t){1&e&&(d.TgZ(0,"div",33),d._UZ(1,"img",34),d._UZ(2,"img",35),d._UZ(3,"img",36),d.qZA())}function h(e,t){if(1&e&&(d.TgZ(0,"div",39),d._UZ(1,"i",40),d._uU(2),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.name," ")}}function Z(e,t){if(1&e&&(d.TgZ(0,"div",37),d.YNc(1,h,3,1,"div",38),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",e.GetFiles("new"))}}function x(e,t){1&e&&(d.TgZ(0,"div",33),d._UZ(1,"img",41),d._UZ(2,"img",42),d._UZ(3,"img",43),d.qZA())}function _(e,t){if(1&e&&(d.TgZ(0,"div",39),d._UZ(1,"i",40),d._uU(2),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.name," ")}}function b(e,t){if(1&e&&(d.TgZ(0,"div",37),d.YNc(1,_,3,1,"div",38),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",e.GetFiles("old"))}}function w(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"Continuar"),d.qZA())}function A(e,t){1&e&&(d.TgZ(0,"span"),d._UZ(1,"i",44),d.qZA())}const C=function(){return{adaptivePosition:!0,containerClass:"theme-dark-blue"}};let M=(()=>{class e{constructor(e,t,n,i){this.api=e,this.nav=t,this.activatedRoute=n,this.toast=i,this.activities=[],this.loading=!1,this.eventForm=new c.cw({start:new c.NI(null,[c.kI.required]),body:new c.NI(null,[c.kI.required]),closure:new c.NI(null,[c.kI.required]),date:new c.NI(null,[c.kI.required]),strategyId:new c.NI(null,[c.kI.required]),parcialProjectId:new c.NI(null,[c.kI.required]),resources:new c.NI([],[])})}get formatedDate(){return this.date?l(this.date).format("DD/MM/YY"):""}ngOnInit(){this.GetParams()}GetParams(){this.activatedRoute.params.subscribe(e=>{var t,n;this.strategyId=e.strategyId,this.date=e.date,null===(t=this.eventForm.get("date"))||void 0===t||t.setValue(l(this.date).toISOString()),null===(n=this.eventForm.get("strategyId"))||void 0===n||n.setValue(this.strategyId),this.GetStrategyTeacherActivities()})}GoBack(){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/calendario/${this.date}`)}GetStrategyTeacherActivities(){this.api.Get(`/Strategies/${this.strategyId}/Activities`).subscribe(e=>{this.activities=e.filter(e=>!e.eventId)},e=>{console.error("Error getting activities",e)})}OnFileSelected(e){Array.from(e.target.files).forEach(e=>{const t=new FileReader;t.onload=t=>{var n,i;let o={encodedFileContainer:"resources",base64File:btoa(t.target.result),name:e.name,resize:!1,fileExtention:"."+(null===(n=e.name.split(".").pop())||void 0===n?void 0:n.toLowerCase())};null===(i=this.eventForm.get("resources"))||void 0===i||i.value.push(o)},t.readAsBinaryString(e)})}OnLibraryFilesSelected(e){var t,n;null===(t=this.eventForm.get("resources"))||void 0===t||t.setValue(null===(n=this.eventForm.get("resources"))||void 0===n?void 0:n.value.concat(e))}SaveEvent(){if(this.eventForm.invalid)return this.toast.ShowWarning("Favor de llenar todos los campos"),void this.eventForm.markAllAsTouched();this.loading=!0,this.api.Post("/Events",{event:this.eventForm.value}).subscribe(e=>{this.loading=!1,this.toast.ShowSuccess("Evento creado correctamente"),this.GoBack()},e=>{console.error("Error creating event",e),this.loading=!1})}GetFiles(e){var t,n;switch(e){case"new":return null===(t=this.eventForm.get("resources"))||void 0===t?void 0:t.value.filter(e=>!e.id);case"old":return null===(n=this.eventForm.get("resources"))||void 0===n?void 0:n.value.filter(e=>!!e.id);default:return[]}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(g.sM),d.Y36(f.f),d.Y36(o.gz),d.Y36(u.k))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-create-event-or-product"]],decls:59,vars:10,consts:[[1,"content"],[1,"row-header"],[1,"title"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"back-section"],["src","assets/icons/back-arrow.png","alt","back-arrow",1,"back-icon","clickeable",3,"click"],[1,"event-date"],[1,"row","justify-content-center"],[1,"col-12","col-md-10","col-lg-8"],[1,"form-container",3,"formGroup"],[1,"form-row"],[1,"instruction-number"],[1,"form-col"],[1,"form-section-title"],[1,"input-container","with-border-thin"],["type","text","formControlName","name","placeholder","Nombre del producto",1,"form-control","no-icon"],[1,"input-container"],["formControlName","instructions","placeholder","Instrucciones del producto","rows","6",1,"form-control","with-border-thin"],["type","text","formControlName","date","placeholder","Fecha de entrega","bsDatepicker","",1,"form-control","no-icon","with-border-thin",3,"bsConfig"],["parcialProductDatePicker","bsDatepicker"],[1,"flex-files-container"],[1,"flex-files"],["class","flex-icons",4,"ngIf"],["class","flex-resources",4,"ngIf"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],[1,"btn","btn-success","btn-block",3,"click"],[1,"flex-files","mr-0"],[1,"col-12","text-right","mb-5"],[1,"btn","btn-primary","btn-bigger",3,"click"],[4,"ngIf"],[3,"onFilesSelectd"],["libraryModal",""],[1,"flex-icons"],["src","assets/icons/video-recorder.png","alt","video"],["src","assets/icons/gallery.png","alt","video"],["src","assets/icons/book-closed-green.png","alt","video"],[1,"flex-resources"],["class","resource",4,"ngFor","ngForOf"],[1,"resource"],[1,"zmdi","zmdi-file","zmdi-hc-2x","text-primary","mr-3"],["src","assets/icons/library.png","alt","video"],["src","assets/icons/movie.png","alt","video"],["src","assets/icons/microscope.png","alt","video"],[1,"zmdi","zmdi-spinner","zmdi-hc-lg","zmdi-hc-spin"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d._UZ(2,"div"),d.TgZ(3,"div",2),d._uU(4," Calendario "),d.qZA(),d._UZ(5,"div"),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"div",4),d.TgZ(8,"img",5),d.NdJ("click",function(){return t.GoBack()}),d.qZA(),d.qZA(),d.TgZ(9,"div",6),d._uU(10),d.qZA(),d._UZ(11,"div"),d.qZA(),d.TgZ(12,"div",7),d.TgZ(13,"div",8),d.TgZ(14,"form",9),d.TgZ(15,"div",10),d.TgZ(16,"span",11),d._uU(17,"1"),d.qZA(),d.TgZ(18,"div",12),d.TgZ(19,"div",13),d._uU(20," Selecciona un evento o producto "),d.qZA(),d.TgZ(21,"div",14),d._UZ(22,"input",15),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"div",10),d.TgZ(24,"span",11),d._uU(25,"2"),d.qZA(),d.TgZ(26,"div",12),d.TgZ(27,"div",13),d._uU(28," \xbfHoy qu\xe9 producto trabajar\xe1s? "),d.qZA(),d.TgZ(29,"div",16),d._UZ(30,"textarea",17),d.qZA(),d.qZA(),d.qZA(),d.TgZ(31,"div",10),d.TgZ(32,"span",11),d._uU(33,"4"),d.qZA(),d.TgZ(34,"div",12),d.TgZ(35,"div",13),d._uU(36," Selecciona la fecha de entrega "),d.qZA(),d.TgZ(37,"div",16),d._UZ(38,"input",18,19),d.qZA(),d.qZA(),d.qZA(),d.TgZ(40,"div",20),d.TgZ(41,"div",21),d.YNc(42,v,4,0,"div",22),d.YNc(43,Z,2,1,"div",23),d.TgZ(44,"input",24,25),d.NdJ("change",function(e){return t.OnFileSelected(e)}),d.qZA(),d.TgZ(46,"button",26),d.NdJ("click",function(){return d.CHM(e),d.MAs(45).click()}),d._uU(47," Adjuntar alg\xfan recurso "),d.qZA(),d.qZA(),d.TgZ(48,"div",27),d.YNc(49,x,4,0,"div",22),d.YNc(50,b,2,1,"div",23),d.TgZ(51,"button",26),d.NdJ("click",function(){return d.CHM(e),d.MAs(58).OpenModal()}),d._uU(52," Adjuntar de la biblioteca "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(53,"div",28),d.TgZ(54,"button",29),d.NdJ("click",function(){return t.SaveEvent()}),d.YNc(55,w,2,0,"span",30),d.YNc(56,A,2,0,"span",30),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(57,"app-library-file-selector-modal",31,32),d.NdJ("onFilesSelectd",function(e){return t.OnLibraryFilesSelected(e)}),d.qZA()}2&e&&(d.xp6(10),d.hij(" ",t.formatedDate," "),d.xp6(4),d.Q6J("formGroup",t.eventForm),d.xp6(24),d.Q6J("bsConfig",d.DdM(9,C)),d.xp6(4),d.Q6J("ngIf",!t.GetFiles("new").length),d.xp6(1),d.Q6J("ngIf",!!t.GetFiles("new").length),d.xp6(6),d.Q6J("ngIf",!t.GetFiles("old").length),d.xp6(1),d.Q6J("ngIf",!!t.GetFiles("old").length),d.xp6(5),d.Q6J("ngIf",!t.loading),d.xp6(1),d.Q6J("ngIf",t.loading))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,m.Y5,m.Np,i.O5,p.p,i.sg],styles:[".title[_ngcontent-%COMP%]{color:#26d7a4}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:#587594;margin-bottom:.75rem}.event-date[_ngcontent-%COMP%]{width:155px;height:40px;flex-direction:column;justify-content:center;grid-gap:10px;gap:10px;flex-shrink:0;border-radius:6px 6px 0 0;background:var(--green-1,#26d7a4);color:#fff;font-family:Mulish;font-size:28px;font-style:normal;font-weight:700;line-height:normal}.event-date[_ngcontent-%COMP%], .flex-row[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-row[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:.75rem}.flex-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:1.5rem!important}.flex-files-container[_ngcontent-%COMP%]{display:flex}.flex-files[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;width:335px;margin:0 3rem 3rem 0}.flex-files[_ngcontent-%COMP%], .flex-icons[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-icons[_ngcontent-%COMP%]{justify-content:space-around;height:100%}.flex-icons[_ngcontent-%COMP%], .flex-resources[_ngcontent-%COMP%]{width:100%;margin-bottom:1.25rem}.flex-resources[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.flex-resources[_ngcontent-%COMP%]   .resource[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.4rem}.btn-bigger[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;padding:1rem 8rem}@media (min-width:0px) and (max-width:925px){.flex-files-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.flex-files[_ngcontent-%COMP%]{margin-right:0;width:100%;max-width:335px}}@media (min-width:0px) and (max-width:550px){.flex-row[_ngcontent-%COMP%]{flex-direction:column!important}.w-75[_ngcontent-%COMP%]{width:100%!important}}.form-container[_ngcontent-%COMP%]{display:inline-flex;padding:12px 24px;flex-direction:column;align-items:flex-start;grid-gap:24px;gap:24px;background:#f6f7f8}.form-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;grid-gap:12px;gap:12px;width:100%}.form-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-col[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;grid-gap:12px;gap:12px;align-items:flex-start}.form-container[_ngcontent-%COMP%]   .form-section-instruction[_ngcontent-%COMP%]{font-size:16px}.form-container[_ngcontent-%COMP%]   .form-section-instruction[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]   .form-section-title[_ngcontent-%COMP%]{color:var(--gray-1,#3d5e81);font-family:Mulish;font-style:normal;font-weight:500;line-height:normal}.form-container[_ngcontent-%COMP%]   .form-section-title[_ngcontent-%COMP%]{display:flex;align-items:flex-start;grid-gap:12px;gap:12px;font-size:20px}.input-container[_ngcontent-%COMP%]{margin:0}"]}),e})();var O=n(5110);const q=[{path:"",component:M}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[c.u5,i.ez,r.A0,c.UX,s.G,a.zk.forRoot(),m.kn.forRoot(),O.N,o.Bz.forChild(q)]]}),e})()}}]);