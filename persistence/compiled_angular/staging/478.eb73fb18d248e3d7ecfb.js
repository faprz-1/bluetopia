(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[478],{7478:(t,e,i)=>{"use strict";i.r(e),i.d(e,{TemplatesModule:()=>k});var o=i(1116),s=i(2320),n=i(4391),l=i(1041),a=i(6050),r=i(5470),c=i(7368);const p=function(t,e){return{"template-hide":t,"template-show":e}};function h(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",5),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().OnClick(e)}),c._UZ(1,"img",6),c.TgZ(2,"div",7),c._uU(3),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,i=e.index,o=c.oxw();c.Q6J("ngClass",c.WLB(3,p,!o.positionsToShow.includes(i),o.positionsToShow.includes(i))),c.xp6(1),c.s9C("src","assets/icons/"+t.icon,c.LSH),c.xp6(2),c.hij(" ",t.nickname?t.nickname:t.name," ")}}let m=(()=>{class t{constructor(){this.templates=[],this.maxTemplatesToShow=0,this.onClick=new c.vpe,this.positionsToShow=[],this.templatesToShow=3}ngOnInit(){window.addEventListener("resize",t=>{this.AdjustView()}),this.AdjustView()}OnClick(t){this.onClick.emit(t)}AdjustView(){var t;let e=null===(t=document.getElementById("slider-container"))||void 0===t?void 0:t.clientWidth;this.templatesToShow=Math.floor((e-80)/225),this.templatesToShow=this.maxTemplatesToShow?Math.min(this.templatesToShow,this.maxTemplatesToShow):this.templatesToShow,this.positionsToShow=[];for(let i=0;i<this.templatesToShow;i++)this.positionsToShow.push(i)}GoRight(){let t=this.positionsToShow[this.positionsToShow.length-1]+this.templatesToShow;t=Math.min(t,this.templates.length);let e=t-this.templatesToShow;this.positionsToShow=[];for(let i=e;i<t;i++)this.positionsToShow.push(i)}GoLeft(){let t=this.positionsToShow[0]-this.templatesToShow;t=Math.max(t,0);let e=t+this.templatesToShow;this.positionsToShow=[];for(let i=t;i<e;i++)this.positionsToShow.push(i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-template-slider"]],inputs:{templates:"templates",maxTemplatesToShow:"maxTemplatesToShow"},outputs:{onClick:"onClick"},decls:6,vars:1,consts:[["id","slider-container",1,"slider-container"],[1,"slider-control","clickeable"],["src","assets/icons/arrow-left.png","alt","arrow left",3,"click"],["class","template clickeable",3,"ngClass","click",4,"ngFor","ngForOf"],["src","assets/icons/arrow-right.png","alt","arrow rigth",3,"click"],[1,"template","clickeable",3,"ngClass","click"],["alt","template-icon",1,"template-icon",3,"src"],[1,"template-name"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"img",2),c.NdJ("click",function(){return e.GoLeft()}),c.qZA(),c.qZA(),c.YNc(3,h,4,6,"div",3),c.TgZ(4,"div",1),c.TgZ(5,"img",4),c.NdJ("click",function(){return e.GoRight()}),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngForOf",e.templates))},directives:[o.sg,o.mk],styles:[".slider-container[_ngcontent-%COMP%]{justify-content:space-between}.slider-container[_ngcontent-%COMP%], .template[_ngcontent-%COMP%]{display:flex;align-items:center}.template[_ngcontent-%COMP%]{width:220px;justify-content:center;flex-direction:column;background-color:#f4f5f7;padding:27px 1rem;border-radius:6px;height:200px}.template-hide[_ngcontent-%COMP%]{display:none}.template-icon[_ngcontent-%COMP%]{width:-webkit-min-content;width:min-content}.template-name[_ngcontent-%COMP%]{margin-top:10px;color:#1081fb;font-size:1.5rem;font-weight:700;line-height:30px;text-align:center}"]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[l.u5,o.ez,n.A0,l.UX,a.G,r.zk.forRoot()]]}),t})();var u=i(882),g=i(1392),T=i(407),w=i(6189),f=i(6507);function S(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",7),c._uU(2),c.qZA(),c.TgZ(3,"app-template-slider",8),c.NdJ("onClick",function(e){c.CHM(t);const i=c.oxw(),o=c.MAs(6);return i.selectedTemplate=e,i.OpenModal(o)}),c.qZA(),c.TgZ(4,"div",9),c.TgZ(5,"button",10),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().SeeAllTemplatesOfType(e)}),c._uU(6," Ver todas "),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.hij(" ",t.name," "),c.xp6(1),c.Q6J("templates",t.templates)("maxTemplatesToShow",3)}}function v(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"app-template-preview-modal",11),c.NdJ("onCloseModal",function(){return c.CHM(t),c.oxw().CloseModal()})("onUseTemplate",function(e){return c.CHM(t),c.oxw().CreateStrategyBasedOnTemplate(e)}),c.qZA()}if(2&t){const t=c.oxw();c.Q6J("template",t.selectedTemplate)}}const C=[{path:"",component:(()=>{class t{constructor(t,e,i,o,s){this.api=t,this.nav=e,this.modalService=i,this.activatedRoute=o,this.toast=s,this.modalRef=null,this.templateTypes=[],this.selectedTemplate=null,this.grade=null,this.group=null}ngOnInit(){this.GetTemplates(),this.GetParams()}GetParams(){this.activatedRoute.params.subscribe(t=>{this.grade=t.grade,this.group=t.group})}OpenModal(t){this.modalRef=this.modalService.show(t,{backdrop:"static"})}CloseModal(){this.modalRef&&this.modalRef.hide()}GetTemplates(){this.api.Get("/TemplateTypes/WithTemplates").subscribe(t=>{this.templateTypes=t},t=>{console.error("Erro getting templates",t)})}SeeAllTemplatesOfType(t){let e=`tipo-plantillas/${t.id}`;this.grade&&this.group&&(e=`grado/${this.grade}/grupo/${this.group}/${e}`),this.nav.GoToUserRoute(e)}CreateStrategyBasedOnTemplate(t){var e;this.CloseModal();let i={templateId:t.id,userId:null===(e=this.api.GetUser())||void 0===e?void 0:e.id,grade:this.grade?this.grade:null,group:this.group?this.group:null};this.api.Post("/Strategies",{strategy:i}).subscribe(t=>{this.nav.GoToUserRoute(`estrategias/${t.id}/materias`)},t=>{console.error("Error creating strategy",t),this.toast.ShowError("Error al crear la estrategia")})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.sM),c.Y36(T.f),c.Y36(r.tT),c.Y36(s.gz),c.Y36(w.k))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-templates"]],decls:7,vars:1,consts:[[1,"content"],[1,"row"],[1,"col-12"],[1,"row","justify-content-center"],["class","col-12 col-md-10 col-lg-9 col-xl-8 mb-5",4,"ngFor","ngForOf"],["templatePreviewModal",""],[1,"col-12","col-md-10","col-lg-9","col-xl-8","mb-5"],[1,"title"],[3,"templates","maxTemplatesToShow","onClick"],[1,"bottom-right"],[1,"btn","btn-outline-primary","btn-widder",3,"click"],[3,"template","onCloseModal","onUseTemplate"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"div",2),c.qZA(),c.TgZ(3,"div",3),c.YNc(4,S,7,3,"div",4),c.qZA(),c.qZA(),c.YNc(5,v,1,1,"ng-template",null,5,c.W1O)),2&t&&(c.xp6(4),c.Q6J("ngForOf",e.templateTypes))},directives:[o.sg,m,f.f],styles:[".bottom-right[_ngcontent-%COMP%]{display:flex;justify-content:end;margin-top:1rem}.btn-widder[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;padding:.5rem 4rem}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[l.u5,o.ez,n.A0,l.UX,d,a.G,r.zk.forRoot(),u.c,s.Bz.forChild(C)]]}),t})()},407:(t,e,i)=>{"use strict";i.d(e,{f:()=>l});var o=i(7368),s=i(2320),n=i(1392);let l=(()=>{class t{constructor(t,e){this.router=t,this.api=e,this.user=null}HasInitialSlash(t){return!!t&&"/"==t.charAt(0)}GoToUserRoute(t){this.user=this.api.GetUser(),this.user&&(this.user&&this.user.role&&!t.includes(this.user.role.name.toLowerCase())?this.router.navigate([`/inicio/${this.user.role.name.toLowerCase()}${this.HasInitialSlash(t)?"":"/"}${t}`]):this.router.navigate([`${this.HasInitialSlash(t)?"":"/"}${t}`]))}GoTo(t){this.router.navigate([`${this.HasInitialSlash(t)?"":"/"}${t}`])}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(s.F0),o.LFG(n.sM))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);