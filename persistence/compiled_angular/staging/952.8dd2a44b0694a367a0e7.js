(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[952],{6050:(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var o=r(1116),s=r(7368);let i=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.ez]]}),e})()},7952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RegisterUserModule:()=>A});var o=r(1116),s=r(1892),i=r(1041),n=r(6050),a=r(9609),c=r(5821),l=r(7368),g=r(407),u=r(6189),m=r(1392),p=r(2378),d=r(8118),Z=r(6158);let h=(()=>{class e{constructor(e,t){this.nav=e,this.api=t}ngOnInit(){}GoToAddTeachers(){const e=this.api.GetUser();this.nav.GoTo(`inicio/${e.role.name.toLowerCase()}/registrar-maestros`)}GoToAddTeachersByCsv(){const e=this.api.GetUser();this.nav.GoTo(`inicio/${e.role.name.toLowerCase()}/registrar-maestros/csv`)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(g.f),l.Y36(m.sM))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-welcome-view"]],decls:22,vars:0,consts:[[1,"w-100"],[1,"header-container"],[1,"title"],[1,"text"],[1,"d-flex",2,"margin-bottom","12px"],["src","assets/img/welcome_1.png","alt","welcome_1"],["src","assets/img/welcome_2.png","alt","welcome_1"],[1,"subtitle"],[1,"btns-container"],[1,"d-flex","justify-content-around"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l._uU(3," \xa1bienvenida escuela! "),l.qZA(),l.TgZ(4,"div",3),l._uU(5," En esta plataforma tus docentes podr\xe1n crear sus estrategias rapida y ordenadamente. "),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",3),l._uU(8," Tus alumnos se podr\xe1n conectar con el profesor y recibir y subir sus tareas. "),l.qZA(),l._UZ(9,"img",5),l.qZA(),l.TgZ(10,"div",4),l._UZ(11,"img",6),l.TgZ(12,"div",3),l._uU(13," Tus padres de familia podr\xe1n estar al tanto de todo lo que su hijo esta realizando y ver sus trabajos as\xed como compratirlos en redes sociales. "),l.qZA(),l.qZA(),l.TgZ(14,"div",7),l._uU(15," Comienza registrando a tu maestros "),l.qZA(),l.TgZ(16,"div",8),l.TgZ(17,"div",9),l.TgZ(18,"button",10),l.NdJ("click",function(){return t.GoToAddTeachers()}),l._uU(19," Continuar, Agregar maestros "),l.qZA(),l.TgZ(20,"button",11),l.NdJ("click",function(){return t.GoToAddTeachersByCsv()}),l._uU(21," Continuar, Agregar con CSV "),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:[".faded-title[_ngcontent-%COMP%]{font-size:8rem;font-weight:700;color:rgba(189,221,255,.3333333333333333)}.header-container[_ngcontent-%COMP%]{margin-bottom:58px;max-width:500px;display:inline-block}.subtitle[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;color:#2369b5;text-align:center;margin-bottom:90px}.btn[_ngcontent-%COMP%]{font-size:1.25rem;padding:16px 25px;font-weight:800}.btns-container[_ngcontent-%COMP%]{width:100%;max-width:550px;margin-bottom:2rem;display:inline-block}.form[_ngcontent-%COMP%]{width:100%;max-width:380px}.form[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{margin-bottom:74px}.link[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;color:#1081fb}"]}),e})();function v(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",12),l.TgZ(1,"div",13),l.TgZ(2,"div",14),l._uU(3," \xa1bienvenido! "),l.qZA(),l.TgZ(4,"div",15),l._uU(5," Comienza gr\xe1tis tu registro hoy "),l.qZA(),l.qZA(),l.TgZ(6,"form",16),l.TgZ(7,"div",17),l.TgZ(8,"div",18),l._UZ(9,"img",19),l.qZA(),l._UZ(10,"input",20),l._UZ(11,"app-control-messages",21),l.qZA(),l.TgZ(12,"div",17),l.TgZ(13,"div",18),l._UZ(14,"img",22),l.qZA(),l.TgZ(15,"input",23),l.NdJ("keyup.enter",function(){return l.CHM(e),l.oxw().LoginUser()}),l.qZA(),l._UZ(16,"app-control-messages",21),l.qZA(),l.TgZ(17,"div",17),l.TgZ(18,"div",18),l._UZ(19,"img",24),l.qZA(),l.TgZ(20,"input",25),l.NdJ("keyup.enter",function(){return l.CHM(e),l.oxw().LoginUser()}),l.qZA(),l._UZ(21,"app-control-messages",21),l.qZA(),l.qZA(),l.TgZ(22,"div",26),l.TgZ(23,"a"),l._uU(24," \xbfOlvidaste tu contrase\xf1a? "),l.qZA(),l.qZA(),l.TgZ(25,"div",27),l.TgZ(26,"div",28),l.TgZ(27,"button",29),l.NdJ("click",function(){return l.CHM(e),l.oxw().Register()}),l._uU(28," Registrarme "),l.qZA(),l.TgZ(29,"button",30),l.NdJ("click",function(){return l.CHM(e),l.oxw().LoginUser()}),l._uU(30," Iniciar sesi\xf3n "),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(6),l.Q6J("formGroup",e.userForm),l.xp6(5),l.Q6J("control",e.userForm.get("username")),l.xp6(5),l.Q6J("control",e.userForm.get("email")),l.xp6(5),l.Q6J("control",e.userForm.get("password"))}}function f(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",12),l.TgZ(1,"div",13),l.TgZ(2,"div",14),l._uU(3," Cuentanos m\xe1s sobre t\xed "),l.qZA(),l.TgZ(4,"div",15),l._uU(5," Y m\xe1s sobre la instituci\xf3n que representas "),l.qZA(),l.qZA(),l.TgZ(6,"form",16),l.TgZ(7,"div",17),l.TgZ(8,"div",18),l._UZ(9,"img",31),l.qZA(),l._UZ(10,"input",32),l._UZ(11,"app-control-messages",21),l.TgZ(12,"span",33),l._uU(13,"*"),l.qZA(),l.qZA(),l.TgZ(14,"div",17),l.TgZ(15,"div",18),l._UZ(16,"img",34),l.qZA(),l._UZ(17,"input",35),l._UZ(18,"app-control-messages",21),l.TgZ(19,"span",33),l._uU(20,"*"),l.qZA(),l.qZA(),l.TgZ(21,"div",17),l.TgZ(22,"div",18),l._UZ(23,"img",36),l.qZA(),l._UZ(24,"input",37),l._UZ(25,"app-control-messages",21),l.TgZ(26,"span",33),l._uU(27,"*"),l.qZA(),l.qZA(),l.TgZ(28,"div",17),l.TgZ(29,"div",18),l._UZ(30,"img",22),l.qZA(),l._UZ(31,"input",38),l._UZ(32,"app-control-messages",21),l.TgZ(33,"span",33),l._uU(34,"*"),l.qZA(),l.qZA(),l.TgZ(35,"div",17),l.TgZ(36,"div",18),l._UZ(37,"img",39),l.qZA(),l._UZ(38,"input",40),l._UZ(39,"app-control-messages",21),l.TgZ(40,"span",33),l._uU(41,"*"),l.qZA(),l.qZA(),l.TgZ(42,"div",17),l.TgZ(43,"div",18),l._UZ(44,"img",41),l.qZA(),l._UZ(45,"input",42),l._UZ(46,"app-control-messages",21),l.qZA(),l.qZA(),l.TgZ(47,"div",27),l.TgZ(48,"div",28),l.TgZ(49,"button",43),l.NdJ("click",function(){return l.CHM(e),l.oxw().Back()}),l._uU(50," Volver "),l.qZA(),l.TgZ(51,"button",29),l.NdJ("click",function(){return l.CHM(e),l.oxw().RegisterUser()}),l._uU(52," Registrar "),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(6),l.Q6J("formGroup",e.userRegisterForm),l.xp6(5),l.Q6J("control",e.userRegisterForm.get("schoolName")),l.xp6(7),l.Q6J("control",e.userRegisterForm.get("workTitle")),l.xp6(7),l.Q6J("control",e.userRegisterForm.get("address")),l.xp6(7),l.Q6J("control",e.userRegisterForm.get("email")),l.xp6(7),l.Q6J("control",e.userRegisterForm.get("phone")),l.xp6(7),l.Q6J("control",e.userRegisterForm.get("schoolPhone"))}}function w(e,t){1&e&&(l.TgZ(0,"div",44),l._UZ(1,"app-welcome-view"),l.qZA())}let T=(()=>{class e{constructor(e,t,r,o,s,n){this.navigation=e,this.activeRoute=t,this.toast=r,this.api=o,this.notiServ=s,this.pushService=n,this.registerStep=1,this.userType="",this.userForm=new i.cw({username:new i.NI(null,[i.kI.required]),email:new i.NI(null,[i.kI.required,i.kI.email]),password:new i.NI(null,[i.kI.required,i.kI.minLength(3)])}),this.userRegisterForm=new i.cw({schoolName:new i.NI(null,[i.kI.required]),workTitle:new i.NI(null,[i.kI.required]),address:new i.NI(null,[i.kI.required,i.kI.minLength(3)]),email:new i.NI(null,[i.kI.required,i.kI.email]),phone:new i.NI(null,[i.kI.required,c.R.CheckOnlyIntegerNumbers]),schoolPhone:new i.NI(null,[c.R.CheckOnlyIntegerNumbers])})}ngOnInit(){this.GetParams()}GetParams(){this.activeRoute.params.subscribe(e=>{this.userType=e.userType})}Register(){console.log(this.userForm),this.userForm.valid?(this.userRegisterForm.controls.email.setValue(this.userForm.controls.email.value),this.userRegisterForm.updateValueAndValidity(),this.Forward()):this.toast.ShowWarning("Favor de llenar todos los campos para registrarse")}Back(){this.registerStep--}Forward(){this.registerStep++}RegisterUser(){if(this.userForm.invalid||this.userRegisterForm.invalid)return void this.toast.ShowWarning("Favor de llenar todos los campos");let e=Object.assign(Object.assign({},this.userForm.value),this.userRegisterForm.value),t=Object.assign(Object.assign({},this.userRegisterForm.value),{name:e.username});e.active=!0,this.api.Post("/Usuarios",{user:e,userData:t,role:this.userType.toLowerCase()}).subscribe(t=>{this.api.Post("/Usuarios/login",{email:e.email,password:e.password}).subscribe(e=>{localStorage.clear(),this.api.SetToken(e.id),this.api.Get("/Usuarios/withCredentials",!0).subscribe(e=>{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("ttl",a().add(1209600,"s").toISOString()),this.notiServ.LoadNotifications(),this.pushService.GetUserID(),this.toast.ShowSuccess("Cuenta regstrada correctamente"),this.api.GetUser().role.name.toLowerCase(),this.Forward()},e=>{this.toast.ShowError(e.error.error.message)})})})}LoginUser(){const e=this.userForm.value;e.email&&e.password?this.api.Post("/Usuarios/login",{email:e.email,password:e.password},!1).subscribe(e=>{localStorage.clear(),this.api.SetToken(e.id),this.api.Get("/Usuarios/withCredentials",!0).subscribe(e=>{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("ttl",a().add(1209600,"s").toISOString()),this.notiServ.LoadNotifications(),this.pushService.GetUserID(),this.toast.ShowSuccess("Sesi\xf3n iniciada exitosamente");let t=this.api.GetUser().role.name.toLowerCase();this.navigation.GoTo(`/inicio/${t}/`)},e=>{this.toast.ShowError(e.error.error.message)})},e=>{this.toast.ShowError(e.error.error.message)}):this.toast.ShowWarning("Favor de escribir sus credenciales")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(g.f),l.Y36(s.gz),l.Y36(u.k),l.Y36(m.sM),l.Y36(p.g),l.Y36(d._))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-register-user"]],decls:15,vars:5,consts:[[1,"full-page"],[1,"d-flex","h-100"],[1,"vertical-text-container"],[1,"vertical-text","faded-title"],[1,"w-100","vertical-content"],[1,"row","m-0"],[1,"col-12","text-center"],["src","assets/img/project_name_medium.png","alt","Bluetopia",1,"title-img"],[1,"text-center"],[3,"ngSwitch"],["class","header-container mb-0",4,"ngSwitchCase"],["class","mb-0",4,"ngSwitchCase"],[1,"header-container","mb-0"],[1,"header-container"],[1,"title"],[1,"text"],[1,"form","d-inline-block",3,"formGroup"],[1,"input-container"],[1,"input-icon-container","text-center"],["src","assets/icons/user.png"],["type","text","placeholder","Nombre","formControlName","username",1,"form-control"],[3,"control"],["src","assets/icons/mail.png"],["type","text","placeholder","Correo electronico","formControlName","email",1,"form-control",3,"keyup.enter"],["src","assets/icons/lock.png"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"keyup.enter"],[1,"link"],[1,"btns-container"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],["src","assets/icons/school.png"],["type","text","placeholder","Nombre de la instituci\xf3n","formControlName","schoolName",1,"form-control"],[1,"required-span"],["src","assets/icons/users-group.png"],["type","text","placeholder","Puesto","formControlName","workTitle",1,"form-control"],["src","assets/icons/location.png"],["type","text","placeholder","Direcci\xf3n","formControlName","address",1,"form-control"],["type","text","placeholder","Correo","formControlName","email",1,"form-control"],["src","assets/icons/phone.png"],["type","text","placeholder","Tel\xe9fono","formControlName","phone",1,"form-control"],["src","assets/icons/user-phone.png"],["type","text","placeholder","Tel\xe9fono escolar","formControlName","schoolPhone",1,"form-control"],[1,"btn","btn-outline-primary",3,"click"],[1,"mb-0"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"div"),l._UZ(9,"img",7),l.qZA(),l.TgZ(10,"div",8),l.TgZ(11,"div",9),l.YNc(12,v,31,4,"div",10),l.YNc(13,f,53,7,"div",10),l.YNc(14,w,2,0,"div",11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.hij(" ",t.userType," "),l.xp6(7),l.Q6J("ngSwitch",t.registerStep),l.xp6(1),l.Q6J("ngSwitchCase",1),l.xp6(1),l.Q6J("ngSwitchCase",2),l.xp6(1),l.Q6J("ngSwitchCase",3))},directives:[o.RF,o.n9,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,Z.w,h],styles:[".vertical-text-container[_ngcontent-%COMP%]{position:relative;height:100%;width:413px}.vertical-text[_ngcontent-%COMP%]{text-transform:uppercase;position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%) rotate(-90deg)}.faded-title[_ngcontent-%COMP%]{font-size:8rem;font-weight:700;color:rgba(189,221,255,.3333333333333333)}.header-container[_ngcontent-%COMP%]{margin-bottom:58px;max-width:500px;display:inline-block}.btn[_ngcontent-%COMP%]{font-size:1.25rem;width:225px;padding:16px 0;font-weight:800}.btns-container[_ngcontent-%COMP%]{width:100%;max-width:550px;margin-bottom:2rem;display:inline-block}.form[_ngcontent-%COMP%]{width:100%;max-width:380px}.form[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{margin-bottom:74px}.link[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;color:#1081fb}"]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.u5,o.ez,i.UX,n.G]]}),e})();const q=[{path:"",component:T}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.u5,o.ez,b,i.UX,n.G,s.Bz.forChild(q)]]}),e})()},407:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var o=r(7368),s=r(1892),i=r(1392);let n=(()=>{class e{constructor(e,t){this.router=e,this.api=t,this.user=null}HasInitialSlash(e){return!!e&&"/"==e.charAt(0)}GoToUserRoute(e){this.user=this.api.GetUser(),this.user&&(this.user&&this.user.role&&!e.includes(this.user.role.name.toLowerCase())?this.router.navigate([`/inicio/${this.user.role.name.toLowerCase()}${this.HasInitialSlash(e)?"":"/"}${e}`]):this.router.navigate([`${this.HasInitialSlash(e)?"":"/"}${e}`]))}GoTo(e){this.router.navigate([`${this.HasInitialSlash(e)?"":"/"}${e}`])}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.F0),o.LFG(i.sM))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);