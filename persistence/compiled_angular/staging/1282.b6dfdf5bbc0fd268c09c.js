(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[1282],{1282:(t,e,n)=>{"use strict";n.r(e),n.d(e,{StrategyTeamsProgressModule:()=>C});var a=n(1116),s=n(2894),r=n(4391),i=n(1041),o=n(6050),l=n(5470),g=n(7368),c=n(1392),u=n(407),p=n(4792);function d(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Deshacer equipos"),g.qZA())}function f(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Asignar equipos"),g.qZA())}function m(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",19),g.NdJ("click",function(){return g.CHM(t),g.oxw().ToggleIsByTeams()}),g.YNc(1,d,2,0,"span",18),g.YNc(2,f,2,0,"span",18),g.qZA()}if(2&t){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.strategy.isByTeams),g.xp6(1),g.Q6J("ngIf",!t.strategy.isByTeams)}}function x(t,e){if(1&t&&(g.ynx(0),g.TgZ(1,"div",32),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.qZA(),g.BQk()),2&t){const t=e.$implicit,n=g.oxw(4);g.xp6(3),g.hij(" ",n.BuildStudentFullName(t.student)," ")}}function y(t,e){if(1&t&&(g.ynx(0),g.TgZ(1,"div",32),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.qZA(),g.BQk()),2&t){const t=e.$implicit;g.xp6(3),g.hij(" ",null!=t.role&&t.role.name?null==t.role?null:t.role.name:"Sin rol"," ")}}function Z(t,e){if(1&t&&(g.TgZ(0,"div",28),g.TgZ(1,"div",29),g.TgZ(2,"div",30),g.YNc(3,x,4,1,"ng-container",31),g.qZA(),g.TgZ(4,"div",30),g.YNc(5,y,4,1,"ng-container",31),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(3),g.Q6J("ngForOf",t.members),g.xp6(2),g.Q6J("ngForOf",t.members)}}function h(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Reevaluar"),g.qZA())}function v(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Evaluar"),g.qZA())}function T(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",33),g.TgZ(1,"div",34),g.TgZ(2,"div",35),g._uU(3),g.ALo(4,"date"),g.qZA(),g.TgZ(5,"div"),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"div",36),g.TgZ(8,"span",37),g._uU(9,"Acci\xf3n"),g.qZA(),g.TgZ(10,"button",38),g.NdJ("click",function(){const e=g.CHM(t).$implicit,n=g.oxw().$implicit;return g.oxw(2).GoToGradeTeamParcialProduct(n,e)}),g.YNc(11,h,2,0,"span",18),g.YNc(12,v,2,0,"span",18),g._UZ(13,"img",39),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(3),g.Oqu(g.xi3(4,4,null==t.event?null:t.event.date,"dd/MM/yyyy")),g.xp6(3),g.Oqu(t.name),g.xp6(5),g.Q6J("ngIf",!1),g.xp6(1),g.Q6J("ngIf",!0)}}function b(t,e){if(1&t&&(g.TgZ(0,"div",21),g.TgZ(1,"div",22),g.TgZ(2,"div",23),g.TgZ(3,"div",24),g._uU(4),g.qZA(),g.YNc(5,Z,6,2,"div",25),g.qZA(),g.TgZ(6,"div",26),g.YNc(7,T,14,7,"div",27),g.qZA(),g.qZA(),g.qZA()),2&t){const t=e.$implicit,n=g.oxw(2);g.xp6(4),g.Oqu(t.name),g.xp6(1),g.Q6J("ngIf",!(null==t||null==t.members||!t.members.length)),g.xp6(2),g.Q6J("ngForOf",n.strategy.parcialProducts)}}function q(t,e){if(1&t&&(g.ynx(0),g.YNc(1,b,8,3,"div",20),g.BQk()),2&t){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",null==t.strategy?null:t.strategy.teams)}}function A(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Reevaluar"),g.qZA())}function w(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"Evaluar"),g.qZA())}function _(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",42),g.TgZ(1,"div",34),g.TgZ(2,"div",35),g._uU(3),g.ALo(4,"date"),g.qZA(),g.TgZ(5,"div"),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"div",36),g.TgZ(8,"span",37),g._uU(9,"Acci\xf3n"),g.qZA(),g.TgZ(10,"button",38),g.NdJ("click",function(){const e=g.CHM(t).$implicit,n=g.oxw().$implicit;return g.oxw(2).GoToGradeStudentParcialProduct(n,e)}),g.YNc(11,A,2,0,"span",18),g.YNc(12,w,2,0,"span",18),g._UZ(13,"img",39),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(3),g.Oqu(g.xi3(4,4,null==t.event?null:t.event.date,"dd/MM/yyyy")),g.xp6(3),g.Oqu(t.name),g.xp6(5),g.Q6J("ngIf",!1),g.xp6(1),g.Q6J("ngIf",!0)}}function O(t,e){if(1&t&&(g.TgZ(0,"div",21),g.TgZ(1,"div",40),g.TgZ(2,"div",23),g.TgZ(3,"div",24),g._uU(4),g.qZA(),g.qZA(),g.TgZ(5,"div",26),g.YNc(6,_,14,7,"div",41),g.qZA(),g.qZA(),g.qZA()),2&t){const t=e.$implicit,n=g.oxw(2);g.xp6(4),g.Oqu(n.BuildStudentFullName(t)),g.xp6(2),g.Q6J("ngForOf",n.strategy.parcialProducts)}}function P(t,e){if(1&t&&(g.ynx(0),g.YNc(1,O,7,2,"div",20),g.BQk()),2&t){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",t.students)}}let M=(()=>{class t{constructor(t,e,n){this.activatedRoute=t,this.api=e,this.nav=n,this.strategy=null,this.students=[],this.crumbs=[{name:"Equipos",route:"/mis-estrategias"},{name:"Visualiza el progreso de tus equipos",route:"/mis-estrategias"}]}ngOnInit(){this.GetParams()}BuildStudentFullName(t){return`${t.name} ${t.fatherLastname} ${t.motherLastname}`}GoToGradeTeamParcialProduct(t,e){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/progreso-equipos/${t.id}/evaluar/${e.id}`)}GoToGradeStudentParcialProduct(t,e){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/progreso-estudiantes/${t.id}/evaluar/${e.id}`)}GetParams(){this.activatedRoute.params.subscribe(t=>{this.strategyId=t.strategyId,this.crumbs[0].route="/mis-estrategias",this.crumbs[1].route="/mis-estrategias",this.GetStrategy()})}GetStrategy(){this.api.Get(`/Strategies/${this.strategyId}`).subscribe(t=>{this.strategy=t,this.grade=t.strategyGroup?t.strategyGroup.grade:null,this.group=t.strategyGroup?t.strategyGroup.group:null,this.GetGradeGroupStudents()},t=>{console.error("Error getting strategy",t)})}GetGradeGroupStudents(){var t;let e="/Students";const n=this.api.GetUser();switch(null===(t=null==n?void 0:n.role)||void 0===t?void 0:t.name){case"School":e+=`/OfSchool/${n.schoolId}`;break;case"Teacher":e+=`/OfTeacher/${n.id}`;break;default:e+=`/OfSchool/${n.schoolId}`}this.api.Get(`${e}/FilteredBy/Grade/${this.grade?this.grade.id:0}/Group/${this.group?this.group.id:0}`).subscribe(t=>{this.students=t},t=>{console.error("Error getting students",t)})}SaveStrategy(){return new Promise((t,e)=>{this.api.Patch(`/Strategies/${this.strategyId}/OnlyStrategy/1`,{strategy:{id:this.strategyId,isByTeams:!!this.strategy&&!this.strategy.isByTeams}}).subscribe(e=>{t()},t=>{console.error("Error saving strategy",t),e(t)})})}ToggleIsByTeams(){let t={id:this.strategyId,isByTeams:!!this.strategy&&!this.strategy.isByTeams,useCustomRoles:!1};this.api.Patch(`/Strategies/${this.strategyId}/OnlyStrategy/1`,{strategy:t}).subscribe(e=>{t.isByTeams?this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/crear-equipos`):this.api.Patch(`/Strategies/${this.strategyId}/ResetTeams`,{}).subscribe(t=>{window.location.reload()},t=>{console.error("Error rese4ting teams members roles",t)})},t=>{console.error("Error saving strategy",t)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(s.gz),g.Y36(c.sM),g.Y36(u.f))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-strategy-teams-progress"]],decls:32,vars:18,consts:[[1,"content"],[1,"d-flex","justify-content-between","flex-wrap"],[3,"crumbs"],[1,"d-flex"],[1,"row","mt-4"],[1,"col-12","col-md-6","col-lg-8"],[1,"d-flex","flex-column",2,"gap","24px"],[1,"info-card","justify-content-between","flex-wrap"],[1,"text-primary","text-uppercase"],[1,"d-flex","align-items-center",2,"gap","12px"],["height","35",3,"src"],[1,"text-primary"],[1,"d-flex",2,"gap","48px","color","#2369B5"],[1,"text-success"],[1,"d-flex","flex-column"],[2,"font-size","16px"],[1,"col-12","col-md-6","col-lg-4"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","col-12 my-4",4,"ngFor","ngForOf"],[1,"col-12","my-4"],[1,"team-progress-card","flex-wrap","flex-lg-nowrap","justify-content-center"],[1,"team-container","w-100","flex-grow-1"],[1,"title","mb-0"],["class","team w-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-center","justify-content-lg-start","overflow-auto",2,"gap","14px"],["class","evaluation-col align-self-stretch justify-content-between","style","gap: 14px;",4,"ngFor","ngForOf"],[1,"team","w-100"],[1,"d-flex","w-100",2,"gap","10px"],[1,"d-flex","flex-column","w-50",2,"gap","10px"],[4,"ngFor","ngForOf"],[1,"member"],[1,"evaluation-col","align-self-stretch","justify-content-between",2,"gap","14px"],[1,"d-flex","flex-column","gap-1"],[1,"date-text"],[1,"d-flex","flex-column","align-items-start","align-self-stretch",2,"gap","6px"],[1,"mb-1"],[1,"btn","btn-primary","btn-block","d-flex","justify-content-center","align-items-center",2,"gap","6px",3,"click"],["src","assets/icons/rate-review.svg"],[1,"team-progress-card","flex-column","justify-content-center"],["class","evaluation-col flex-grow-1 align-self-stretch justify-content-between","style","gap: 14px;",4,"ngFor","ngForOf"],[1,"evaluation-col","flex-grow-1","align-self-stretch","justify-content-between",2,"gap","14px"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._UZ(2,"app-breadcrumb",2),g._UZ(3,"div",3),g.qZA(),g.TgZ(4,"div",4),g.TgZ(5,"div",5),g.TgZ(6,"div",6),g.TgZ(7,"div",7),g.TgZ(8,"span",8),g._uU(9),g.qZA(),g.TgZ(10,"div",9),g._UZ(11,"img",10),g.TgZ(12,"span",11),g._uU(13),g.qZA(),g.qZA(),g.TgZ(14,"div",12),g.TgZ(15,"span"),g._uU(16),g.ALo(17,"date"),g.qZA(),g.TgZ(18,"span"),g._uU(19),g.ALo(20,"date"),g.qZA(),g.qZA(),g.TgZ(21,"span",13),g._uU(22),g.qZA(),g.TgZ(23,"div",14),g.TgZ(24,"div",11),g._uU(25,"T\xedtulo"),g.qZA(),g.TgZ(26,"span",15),g._uU(27),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(28,"div",16),g.YNc(29,m,3,2,"button",17),g.qZA(),g.YNc(30,q,2,1,"ng-container",18),g.YNc(31,P,2,1,"ng-container",18),g.qZA(),g.qZA()),2&t&&(g.xp6(2),g.Q6J("crumbs",e.crumbs),g.xp6(7),g.AsE("",null==e.strategy||null==e.strategy.strategyGroup||null==e.strategy.strategyGroup.grade?null:e.strategy.strategyGroup.grade.name,"\xb0",null==e.strategy||null==e.strategy.strategyGroup||null==e.strategy.strategyGroup.group?null:e.strategy.strategyGroup.group.name,""),g.xp6(2),g.Q6J("src","assets/icons/"+(null==e.strategy||null==e.strategy.template?null:e.strategy.template.icon),g.LSH),g.xp6(2),g.Oqu(null==e.strategy||null==e.strategy.template?null:e.strategy.template.nickname),g.xp6(3),g.Oqu(g.xi3(17,12,null==e.strategy?null:e.strategy.startDate,"dd/MM/yyyy")),g.xp6(3),g.Oqu(g.xi3(20,15,null==e.strategy?null:e.strategy.endDate,"dd/MM/yyyy")),g.xp6(3),g.Oqu(null==e.strategy?null:e.strategy.topic),g.xp6(5),g.Oqu(null==e.strategy?null:e.strategy.title),g.xp6(2),g.Q6J("ngIf",!!e.strategy),g.xp6(1),g.Q6J("ngIf",null==e.strategy?null:e.strategy.isByTeams),g.xp6(1),g.Q6J("ngIf",!(null!=e.strategy&&e.strategy.isByTeams)))},directives:[p.L,a.O5,a.sg],pipes:[a.uU],styles:[".info-card[_ngcontent-%COMP%]{display:flex;padding:12px;align-items:center;grid-gap:12px;gap:12px;border-radius:6px;border:1px solid var(--gray-2,#758ca6);color:#3d5e81;text-align:center;font-family:Mulish;font-size:20px;font-style:normal;font-weight:400;line-height:normal}.team-progress-card[_ngcontent-%COMP%]{display:flex;padding:12px;align-items:flex-start;grid-gap:14px;gap:14px;border-radius:12px;border:2px solid var(--gray-2,#758ca6)}.team-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;grid-gap:12px;gap:12px}.team-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px}.team-container[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%], .team-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--gray-1,#3d5e81);font-family:Mulish;font-style:normal;font-weight:500;line-height:normal}.team-container[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]{display:flex;padding:12px;flex-direction:column;align-items:flex-start;grid-gap:10px;gap:10px;border-radius:12px;background:var(--gray-3,#c1ccd7);text-align:center;font-size:16px}.team-container[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   .member[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-self:stretch;justify-content:flex-start;align-items:center;height:48px;padding:6px 24px;border-radius:6px;background-color:#f6f7f8}.team-container[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   .member[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.evaluation-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;flex-basis:150px;max-width:100%;grid-gap:14px;gap:14px;color:var(--blue-dark,#2369b5);font-family:Mulish;font-size:16px;font-style:normal;font-weight:500;line-height:normal}.evaluation-col[_ngcontent-%COMP%]   .file-box[_ngcontent-%COMP%]{display:flex;width:100%;padding:6px;align-items:center;justify-content:center;grid-gap:10px;gap:10px;border-radius:6px;border:1px solid var(--blue-1,#1081fb);color:var(--blue-1,#1081fb);font-size:12px}.evaluation-col[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px;padding:6px;border-radius:6px!important}.date-text[_ngcontent-%COMP%]{color:grey}"]}),t})();var G=n(5709);const U=[{path:"",component:M}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[i.u5,a.ez,r.A0,G.w,i.UX,o.G,l.zk.forRoot(),s.Bz.forChild(U)]]}),t})()}}]);