(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[774],{6158:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var o=r(5821),n=r(7368),i=r(1116);function a(e,t){if(1&e&&(n.TgZ(0,"div",1),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij(" ",null==e.errorMessage?null:e.errorMessage.label,"\n")}}let s=(()=>{class e{constructor(){}ngOnInit(){}get errorMessage(){var e,t,r,n;for(let i in null===(e=this.control)||void 0===e?void 0:e.errors)if((null===(t=this.control)||void 0===t?void 0:t.errors.hasOwnProperty(i))&&(null===(r=this.control)||void 0===r?void 0:r.touched))return o.R.GetValidatorErrorMessage(i,null===(n=this.control)||void 0===n?void 0:n.errors[i]);return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-control-messages"]],inputs:{control:"control"},decls:1,vars:1,consts:[["class","color-red",4,"ngIf"],[1,"color-red"]],template:function(e,t){1&e&&n.YNc(0,a,2,1,"div",0),2&e&&n.Q6J("ngIf",null!==t.errorMessage)},directives:[i.O5],styles:[""]}),e})()},7764:(e,t,r)=>{"use strict";r.d(t,{l:()=>c});var o=r(7368),n=r(1116);function i(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){const e=t.$implicit,r=t.last;o.xp6(1),o.Oqu(e.name+(r?"":","))}}function a(e,t){if(1&e&&(o.TgZ(0,"span",13),o._uU(1),o.qZA()),2&e){const e=t.$implicit,r=t.last;o.xp6(1),o.Oqu((null==e.grade?null:e.grade.name)+(null==e.group?null:e.group.name)+(r?"":","))}}function s(e,t){if(1&e&&(o.TgZ(0,"div",3),o.TgZ(1,"div",4),o._UZ(2,"i",11),o.qZA(),o.TgZ(3,"div",6),o.YNc(4,a,2,1,"span",12),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Q6J("ngForOf",null==e.teacher?null:e.teacher.teacherGroups)}}let c=(()=>{class e{constructor(){this.teacher=null,this.showGroups=!1,this.onDelete=new o.vpe}ngOnInit(){}OnDeletedPressed(e){e.stopPropagation(),this.onDelete.emit(this.teacher)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-teacher-card"]],inputs:{teacher:"teacher",showGroups:"showGroups"},outputs:{onDelete:"onDelete"},decls:21,vars:4,consts:[[1,"card","position-relative"],[1,"delete","clickeable",3,"click"],[1,"card-body"],[1,"text-row"],[1,"img-container"],["src","assets/icons/user-green.png","alt","user"],[1,"text-row-data"],["src","assets/icons/mail-green.png","alt","mail"],["src","assets/icons/book-green.png","alt","book"],[4,"ngFor","ngForOf"],["class","text-row",4,"ngIf"],[1,"zmdi","zmdi-accounts-outline"],["class","text-uppercase",4,"ngFor","ngForOf"],[1,"text-uppercase"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"span",1),o.NdJ("click",function(e){return t.OnDeletedPressed(e)}),o._uU(2," \xd7 "),o.qZA(),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o._UZ(6,"img",5),o.qZA(),o.TgZ(7,"div",6),o.TgZ(8,"span"),o._uU(9),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"div",3),o.TgZ(11,"div",4),o._UZ(12,"img",7),o.qZA(),o.TgZ(13,"div",6),o._uU(14),o.qZA(),o.qZA(),o.TgZ(15,"div",3),o.TgZ(16,"div",4),o._UZ(17,"img",8),o.qZA(),o.TgZ(18,"div",6),o.YNc(19,i,2,1,"span",9),o.qZA(),o.qZA(),o.YNc(20,s,5,1,"div",10),o.qZA(),o.qZA()),2&e&&(o.xp6(9),o.Oqu(null==t.teacher?null:t.teacher.name),o.xp6(5),o.hij(" ",null==t.teacher?null:t.teacher.email," "),o.xp6(5),o.Q6J("ngForOf",null==t.teacher?null:t.teacher.subjects),o.xp6(1),o.Q6J("ngIf",t.showGroups))},directives:[n.sg,n.O5],styles:[".card[_ngcontent-%COMP%]{padding:1.2rem 4rem;border:2px solid #2ed2a3;border-radius:12px;color:#758ca6;font-size:1.5rem;font-weight:500;width:-webkit-max-content;width:max-content;max-width:100%;margin-bottom:0}.card-body[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;justify-content:space-between}.text-row[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:30px;margin-bottom:10px}.text-row[_ngcontent-%COMP%]   .text-row-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;flex-grow:1;flex-wrap:wrap;line-height:30px}.text-row[_ngcontent-%COMP%]   .text-row-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.3rem}.text-row[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:-webkit-min-content;height:min-content;padding-right:12px;text-align:left}.text-row[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:-webkit-max-content;width:max-content;height:-webkit-max-content;height:max-content}.delete[_ngcontent-%COMP%]{font-size:2rem;position:absolute;top:10px;right:15px;color:var(--danger)}.zmdi[_ngcontent-%COMP%]{color:#2ed2a3}"]}),e})()},8838:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});var o=r(1116),n=r(1041),i=r(6050),a=(r(7764),r(7368));let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.u5,o.ez,n.UX,i.G]]}),e})()},9774:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TeacherProfileModule:()=>F});var o=r(1116),n=r(2894),i=r(4391),a=r(1041),s=r(6050),c=r(8838),d=r(5470),l=r(5821),u=r(7368),g=r(1392),p=r(6189),h=r(407),m=r(6158);const Z=["editGroupsModal"],f=["editGradeSubjectsModal"];function v(e,t){if(1&e&&(u.TgZ(0,"div",46),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.hij(" ",e.name," ")}}function b(e,t){if(1&e&&(u.TgZ(0,"div",47),u._UZ(1,"img",48),u._uU(2),u.qZA()),2&e){const e=t.$implicit;u.xp6(2),u.hij(" ",e.name," ")}}function x(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"span",49),u.TgZ(1,"div",50),u.TgZ(2,"span",51),u._uU(3),u.qZA(),u.TgZ(4,"i",52),u.NdJ("click",function(){const t=u.CHM(e).index;return u.oxw().DeleteGroup(t)}),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(3),u.hij(" ",(null!=e.grade&&e.grade.name?e.grade.name:e.grade)+(null!=e.group&&e.group.name?e.group.name:e.group)," ")}}const A=function(){return{backdrop:"static",keyboard:!1}};let T=(()=>{class e{constructor(e,t,r){this.api=e,this.toast=t,this.nav=r,this.data=null,this.subjects=[],this.onChange=new u.vpe,this.user=null,this.grade={},this.groups=[],this.groupSubjects=[],this.teacherGroupForm=new a.cw({teacherGroups:new a.NI([],[a.kI.required]),group:new a.NI("",[])}),this.gradeSubjectsForm=new a.cw({subjects:new a.NI([],[a.kI.required])})}ngOnInit(){var e,t;this.user=this.api.GetUser(),this.data&&Array.isArray(this.data)&&(this.grade.id=Number(this.data[0].split("~")[0]),this.grade.name=this.data[0].split("~")[1],this.groups=this.data[1].map(e=>e.group).sort((e,t)=>e.name>t.name?1:e.name<t.name?-1:0),this.groupSubjects=this.data[1][0].grade.gradeSubjects&&this.data[1][0].grade.gradeSubjects.length?this.data[1][0].grade.gradeSubjects:Array.from(this.subjects),this.groupSubjects.forEach(e=>{e.subject&&(e.name=e.subject.name)})),null===(e=this.teacherGroupForm.get("teacherGroups"))||void 0===e||e.setValue(Array.from(this.data[1])),null===(t=this.gradeSubjectsForm.get("subjects"))||void 0===t||t.setValue(Array.from(this.groupSubjects))}SaveGroups(){console.log(this.teacherGroupForm),this.api.Patch(`/Grades/${this.grade.id}/UpdateGroups`,{teacherId:this.user.teacher.id,teacherGroups:this.teacherGroupForm.value.teacherGroups}).subscribe(e=>{var t;null===(t=this.editGroupsModal)||void 0===t||t.hide(),this.onChange.emit()},e=>{console.error("Error updating teacher groups",e),this.toast.ShowError("Error al actualizar grupos")})}AddGroup(){let e=this.teacherGroupForm.controls.teacherGroups.value,t={grade:this.grade.name,group:this.teacherGroupForm.controls.group.value};Array.isArray(e)?e.push(t):e=[t],this.teacherGroupForm.controls.group.setValue(""),this.teacherGroupForm.controls.teacherGroups.setValue(e),this.teacherGroupForm.updateValueAndValidity()}DeleteGroup(e){this.teacherGroupForm.controls.teacherGroups.value.splice(e,1)}ResetForm(){var e,t;this.teacherGroupForm.reset(),null===(e=this.teacherGroupForm.get("teacherGroups"))||void 0===e||e.setValue(Array.from(this.data[1])),this.gradeSubjectsForm.reset(),null===(t=this.gradeSubjectsForm.get("subjects"))||void 0===t||t.setValue(Array.from(this.subjects))}UpdateSubjects(){this.api.Patch("/GradeSubjects/UpdateGradeTeacherSubjects",{teacherId:this.user.teacher.id,gradeId:this.grade.id,gradeSubjects:this.gradeSubjectsForm.value.subjects}).subscribe(e=>{var t;null===(t=this.editGradeSubjectsModal)||void 0===t||t.hide(),this.toast.ShowSuccess("Materias actualizadas"),this.onChange.emit()},e=>{console.error("Error updating grade subjects",e),this.toast.ShowError("Error al actualizar materias")})}GoToStudentsDataOfGrade(){localStorage.setItem("preselectedGrade",`${this.grade.id}`),this.nav.GoToUserRoute("datos-estudiantes")}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(g.sM),u.Y36(p.k),u.Y36(h.f))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-teacher-groups-card"]],viewQuery:function(e,t){if(1&e&&(u.Gf(Z,5),u.Gf(f,5)),2&e){let e;u.iGM(e=u.CRH())&&(t.editGroupsModal=e.first),u.iGM(e=u.CRH())&&(t.editGradeSubjectsModal=e.first)}},inputs:{data:"data",subjects:"subjects"},outputs:{onChange:"onChange"},decls:82,vars:15,consts:[[1,"teacher-groups-card"],[1,"section"],[1,"d-flex","align-items-center"],["src","assets/icons/users-group-success.svg","width","36",1,"mr-3"],[1,"section-title"],[1,"groups","overflow-auto"],[1,"grade"],["src","assets/icons/school-hat.svg"],[1,"d-flex","overflow-auto","gap-12","flex-grow-1"],["class","group",4,"ngFor","ngForOf"],[1,"options"],["src","assets/icons/edit.svg","width","24",1,"clickeable",3,"click"],["src","assets/icons/delete-danger.svg","width","24",1,"clickeable",3,"click"],["src","assets/icons/add-circle-success.svg","width","24",1,"clickeable",3,"click"],[1,"section","flex-grow-1","overflow-auto"],["src","assets/icons/bookmarks-success.svg","width","36",1,"mr-3"],[1,"subjects","w-100","flex-grow-1"],["class","subject",4,"ngFor","ngForOf"],[1,"link","clickeable",3,"click"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","first-time-configuration",1,"modal","fade",3,"config"],["editGroupsModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"teacher-form"],[3,"formGroup"],[1,"row"],[1,"col-12","col-md-6","col-xl-8"],[1,"input-container"],[1,"input-icon-container","text-center"],["src","assets/icons/users-group.png"],["type","text","placeholder","Grupo","formControlName","group",1,"form-control"],[3,"control"],[1,"col-12","col-md-6","col-xl-4"],[1,"btn","btn-outline-success","btn-block",3,"disabled","click"],[1,"col-12"],[1,"input-label"],["class","badge badge-primary mr-3",4,"ngFor","ngForOf"],[1,"modal-footer","d-flex","align-items-center"],[1,"btn","btn-outline-primary","btn-big","mr-4",3,"click"],[1,"btn","btn-primary","btn-big",3,"click"],["editGradeSubjectsModal","bs-modal"],["src","assets/icons/book.png"],["bindLabel","name","placeholder","Asignaturas","formControlName","subjects",1,"ng-select","form-control","with-icon",3,"items","multiple"],[1,"group"],[1,"subject"],["src","assets/icons/bookmark.svg","width","24"],[1,"badge","badge-primary","mr-3"],[1,"d-flex"],[1,"mr-2","text-uppercase"],[1,"zmdi","zmdi-close","clickeable",3,"click"]],template:function(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u._UZ(3,"img",3),u.TgZ(4,"div",4),u._uU(5,"Mis grados/grupos"),u.qZA(),u.qZA(),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u._UZ(8,"img",7),u.TgZ(9,"div"),u._uU(10),u.qZA(),u.qZA(),u.TgZ(11,"div",8),u.YNc(12,v,2,1,"div",9),u.qZA(),u.TgZ(13,"div",10),u.TgZ(14,"img",11),u.NdJ("click",function(){return u.CHM(e),u.MAs(31).show()}),u.qZA(),u.TgZ(15,"img",12),u.NdJ("click",function(){return u.CHM(e),u.MAs(31).show()}),u.qZA(),u.TgZ(16,"img",13),u.NdJ("click",function(){return u.CHM(e),u.MAs(31).show()}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",14),u.TgZ(18,"div",2),u._UZ(19,"img",15),u.TgZ(20,"div",4),u._uU(21,"Mis materias"),u.qZA(),u.qZA(),u.TgZ(22,"div",16),u.YNc(23,b,3,1,"div",17),u.qZA(),u.TgZ(24,"div",10),u.TgZ(25,"img",11),u.NdJ("click",function(){return u.CHM(e),u.MAs(61).show()}),u.qZA(),u.TgZ(26,"img",12),u.NdJ("click",function(){return u.CHM(e),u.MAs(61).show()}),u.qZA(),u.TgZ(27,"img",13),u.NdJ("click",function(){return u.CHM(e),u.MAs(61).show()}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"div",18),u.NdJ("click",function(){return t.GoToStudentsDataOfGrade()}),u._uU(29," Ver alumnos "),u.qZA(),u.qZA(),u.TgZ(30,"div",19,20),u.TgZ(32,"div",21),u.TgZ(33,"div",22),u.TgZ(34,"div",23),u.TgZ(35,"h2",24),u._uU(36,"Editar grupos"),u.qZA(),u.qZA(),u.TgZ(37,"div",25),u.TgZ(38,"div",26),u.TgZ(39,"form",27),u.TgZ(40,"div",28),u.TgZ(41,"div",29),u.TgZ(42,"div",30),u.TgZ(43,"div",31),u._UZ(44,"img",32),u.qZA(),u._UZ(45,"input",33),u.qZA(),u._UZ(46,"app-control-messages",34),u.qZA(),u.TgZ(47,"div",35),u.TgZ(48,"button",36),u.NdJ("click",function(){return t.AddGroup()}),u._uU(49," Agregar grupo "),u.qZA(),u.qZA(),u.TgZ(50,"div",37),u.TgZ(51,"div",30),u.TgZ(52,"label",38),u._uU(53,"Grupos asignados"),u.qZA(),u.YNc(54,x,5,1,"span",39),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(55,"div",40),u.TgZ(56,"button",41),u.NdJ("click",function(){return u.CHM(e),u.MAs(31).hide(),t.ResetForm()}),u._uU(57," Cancelar "),u.qZA(),u.TgZ(58,"button",42),u.NdJ("click",function(){return t.SaveGroups()}),u._uU(59," Guardar "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(60,"div",19,43),u.TgZ(62,"div",21),u.TgZ(63,"div",22),u.TgZ(64,"div",23),u.TgZ(65,"h2",24),u._uU(66,"Editar materias"),u.qZA(),u.qZA(),u.TgZ(67,"div",25),u.TgZ(68,"div",26),u.TgZ(69,"form",27),u.TgZ(70,"div",28),u.TgZ(71,"div",37),u.TgZ(72,"div",30),u.TgZ(73,"div",31),u._UZ(74,"img",44),u.qZA(),u._UZ(75,"ng-select",45),u.qZA(),u._UZ(76,"app-control-messages",34),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(77,"div",40),u.TgZ(78,"button",41),u.NdJ("click",function(){return u.CHM(e),u.MAs(61).hide(),t.ResetForm()}),u._uU(79," Cancelar "),u.qZA(),u.TgZ(80,"button",42),u.NdJ("click",function(){return t.UpdateSubjects()}),u._uU(81," Guardar "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){let e,r;u.xp6(10),u.Oqu(t.grade.name+"\xb0"),u.xp6(2),u.Q6J("ngForOf",t.groups),u.xp6(11),u.Q6J("ngForOf",t.groupSubjects),u.xp6(7),u.Q6J("config",u.DdM(13,A)),u.xp6(9),u.Q6J("formGroup",t.teacherGroupForm),u.xp6(7),u.Q6J("control",t.teacherGroupForm.get("group")),u.xp6(2),u.Q6J("disabled",!(null!=(e=t.teacherGroupForm.get("group"))&&e.value)),u.xp6(6),u.Q6J("ngForOf",null==(r=t.teacherGroupForm.get("teacherGroups"))?null:r.value),u.xp6(6),u.Q6J("config",u.DdM(14,A)),u.xp6(9),u.Q6J("formGroup",t.gradeSubjectsForm),u.xp6(6),u.Q6J("items",t.subjects)("multiple",!0),u.xp6(1),u.Q6J("control",t.gradeSubjectsForm.get("subjects"))}},directives:[o.sg,d.oB,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,m.w,i.w9],styles:[".teacher-groups-card[_ngcontent-%COMP%]{width:465px;height:460px;max-width:100%;padding:10px;background:var(--blue-light,#f2f8ff)}.section[_ngcontent-%COMP%], .teacher-groups-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;grid-gap:10px;gap:10px}.section[_ngcontent-%COMP%]{padding:16px;width:100%;border-radius:12px;border:1px solid var(--gray-2,#758ca6)}.section-title[_ngcontent-%COMP%]{color:var(--gray-1,#3d5e81);font-size:24px;font-family:Mulish}.groups[_ngcontent-%COMP%]{grid-gap:12px;gap:12px;max-width:100%}.grade[_ngcontent-%COMP%], .groups[_ngcontent-%COMP%]{display:flex;align-items:center}.grade[_ngcontent-%COMP%]{width:75px;padding:6px 12px;grid-gap:10px;gap:10px;color:#8a939b;font-size:16px;font-family:Mulish;font-weight:500;border-radius:6px;background:#fff}.gap-12[_ngcontent-%COMP%]{grid-gap:12px;gap:12px}.group[_ngcontent-%COMP%]{display:flex;width:50px;padding:6px 12px;align-items:center;grid-gap:10px;gap:10px;border-radius:6px;background:#fff;color:#8a939b;text-transform:uppercase;font-size:16px;font-family:Mulish;font-weight:500}.subjects[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;grid-gap:12px;gap:12px;overflow-y:auto}.subject[_ngcontent-%COMP%]{display:flex;padding:6px 12px;align-items:center;grid-gap:10px;gap:10px;border-radius:6px;background:#fff}.link[_ngcontent-%COMP%]{color:var(--blue-1,#1081fb);text-align:center;font-size:16px;font-family:Mulish;font-weight:800;letter-spacing:.8px;-webkit-text-decoration-line:underline;text-decoration-line:underline}.options[_ngcontent-%COMP%]{display:flex;align-items:flex-start;grid-gap:12px;gap:12px}.badge[_ngcontent-%COMP%]{font-size:1rem;padding:.25rem 1rem}.input-label[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:600}"]}),e})();const q=["addGradeAndGroupModal"];function w(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",30),u.TgZ(2,"div",31),u.TgZ(3,"div",19),u.TgZ(4,"div",32),u._UZ(5,"img",33),u.qZA(),u.TgZ(6,"input",34),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(7,"app-control-messages",21),u.qZA(),u.TgZ(8,"div",31),u.TgZ(9,"div",19),u.TgZ(10,"div",32),u._UZ(11,"img",35),u.qZA(),u.TgZ(12,"input",36),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(13,"app-control-messages",21),u.qZA(),u.ynx(14,16),u.TgZ(15,"div",31),u.TgZ(16,"div",19),u.TgZ(17,"div",32),u._UZ(18,"img",37),u.qZA(),u.TgZ(19,"input",38),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(20,"app-control-messages",21),u.qZA(),u.TgZ(21,"div",31),u.TgZ(22,"div",19),u.TgZ(23,"div",32),u._UZ(24,"img",39),u.qZA(),u.TgZ(25,"input",40),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(26,"app-control-messages",21),u.qZA(),u.BQk(),u.ynx(27,16),u.TgZ(28,"div",31),u.TgZ(29,"div",19),u.TgZ(30,"div",32),u._UZ(31,"img",41),u.qZA(),u.TgZ(32,"input",42),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(33,"app-control-messages",21),u.qZA(),u.TgZ(34,"div",31),u.TgZ(35,"div",19),u.TgZ(36,"div",32),u._UZ(37,"img",43),u.qZA(),u.TgZ(38,"input",44),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(39,"app-control-messages",21),u.qZA(),u.TgZ(40,"div",31),u.TgZ(41,"div",19),u.TgZ(42,"div",32),u._UZ(43,"img",45),u.qZA(),u.TgZ(44,"input",46),u.NdJ("keyup.enter",function(){return u.CHM(e),u.oxw().SaveUserData()}),u.qZA(),u.qZA(),u._UZ(45,"app-control-messages",21),u.qZA(),u.BQk(),u.TgZ(46,"div",47),u.TgZ(47,"button",48),u.NdJ("click",function(){return u.CHM(e),u.oxw().SetForm()}),u._uU(48," Descartar "),u.qZA(),u.TgZ(49,"button",29),u.NdJ("click",function(){return u.CHM(e),u.oxw().SaveUserData()}),u._uU(50," Guardar "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("formGroup",e.teacherUserForm),u.xp6(6),u.Q6J("control",e.teacherUserForm.get("name")),u.xp6(6),u.Q6J("control",e.teacherUserForm.get("email")),u.xp6(1),u.Q6J("formGroup",e.userDataForm),u.xp6(6),u.Q6J("control",e.userDataForm.get("workTitle")),u.xp6(6),u.Q6J("control",e.userDataForm.get("phone")),u.xp6(1),u.Q6J("formGroup",e.schoolForm),u.xp6(6),u.Q6J("control",e.schoolForm.get("name")),u.xp6(6),u.Q6J("control",e.schoolForm.get("address")),u.xp6(6),u.Q6J("control",e.schoolForm.get("phone")),u.xp6(2),u.Q6J("disabled",e.loading.updating),u.xp6(2),u.Q6J("disabled",e.loading.updating)}}function G(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"app-teacher-groups-card",53),u.NdJ("onChange",function(){return u.CHM(e),u.oxw(2).GetTeacherGradesAndGroups()}),u.qZA()}if(2&e){const e=t.$implicit,r=u.oxw(2);u.Q6J("data",e)("subjects",r.subjects)}}function k(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",49),u.YNc(2,G,1,2,"app-teacher-groups-card",50),u.TgZ(3,"button",51),u.NdJ("click",function(){return u.CHM(e),u.oxw(),u.MAs(15).show()}),u._UZ(4,"i",52),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngForOf",e.grades)}}const M=function(e){return{active:e}},C=function(){return{backdrop:"static",keyboard:!1}};let _=(()=>{class e{constructor(e,t,r){this.api=e,this.toast=t,this.nav=r,this.user=null,this.activeTab="profile",this.loading={getting:!1,updating:!1},this.teacherUserForm=new a.cw({id:new a.NI("",[a.kI.required]),name:new a.NI("",[a.kI.required]),email:new a.NI("",[a.kI.required]),data:new a.cw({id:new a.NI("",[]),workTitle:new a.NI("",[a.kI.required]),phone:new a.NI("",[l.R.CheckOnlyIntegerNumbers]),userId:new a.NI("",[a.kI.required])}),school:new a.cw({id:new a.NI("",[]),name:new a.NI(null,[a.kI.required]),phone:new a.NI(null,[a.kI.required,l.R.CheckOnlyIntegerNumbers]),address:new a.NI(null,[a.kI.required,a.kI.minLength(3)]),isActive:new a.NI(null,[])})}),this.grades=[],this.subjects=[],this.gradeOrGroupForm=new a.cw({grade:new a.NI("",[a.kI.required]),group:new a.NI("",[a.kI.required])})}get userDataForm(){return this.teacherUserForm.get("data")}get schoolForm(){return this.teacherUserForm.get("school")}ngOnInit(){this.GetUSerData()}SetForm(){var e,t,r,o,n,i,a,s,c,d,l,u;this.teacherUserForm.setValue({id:this.user.teacher.id,name:this.user.teacher.name,email:this.user.teacher.email,data:{id:this.user.data?this.user.data.id:null,workTitle:this.user.data?this.user.data.workTitle:null,phone:this.user.data?this.user.data.phone:null,userId:this.user.id},school:{id:(null===(t=null===(e=this.user)||void 0===e?void 0:e.school)||void 0===t?void 0:t.id)?this.user.school.id:null,name:(null===(o=null===(r=this.user)||void 0===r?void 0:r.school)||void 0===o?void 0:o.name)?this.user.school.name:null,phone:(null===(i=null===(n=this.user)||void 0===n?void 0:n.school)||void 0===i?void 0:i.phone)?this.user.school.phone:null,address:(null===(s=null===(a=this.user)||void 0===a?void 0:a.school)||void 0===s?void 0:s.address)?this.user.school.address:null,isActive:(null===(d=null===(c=this.user)||void 0===c?void 0:c.school)||void 0===d?void 0:d.isActive)?this.user.school.isActive:null}}),(null===(u=null===(l=this.user)||void 0===l?void 0:l.school)||void 0===u?void 0:u.isActive)&&"School"!=this.user.role.name&&this.schoolForm.disable()}GetUSerData(){this.api.Get("/usuarios/withCredentials").subscribe(e=>{this.user=e,this.GetTeacherGradesAndGroups(),this.api.SetUser(e),this.SetForm()})}SaveUserData(){if(this.teacherUserForm.invalid)return this.toast.ShowWarning("Favor de llenar todos los campos correctamente"),void this.teacherUserForm.markAllAsTouched();this.loading.updating=!0,this.api.Patch(`/Teachers/${this.user.teacher.id}`,{teacher:this.teacherUserForm.value}).subscribe(e=>{this.toast.ShowSuccess("Datos guardados correctamente"),this.GetUSerData(),this.loading.updating=!1},e=>{console.error("Error saving user data",e),this.toast.ShowError("Error al guardar los datos"),this.loading.updating=!1})}GetTeacherGradesAndGroups(){this.api.Get(`/Teachers/${this.user.id}/Data`).subscribe(e=>{this.grades=this.GroupByGrades(e.teacherGroups),this.subjects=e.subjects},e=>{console.error("Error getting teacher groups",e)})}GroupByGrades(e){let t=new Map;return e.forEach(e=>{var r;t.has(`${e.grade.id}~${e.grade.name}`)?null===(r=t.get(`${e.grade.id}~${e.grade.name}`))||void 0===r||r.push(e):t.set(`${e.grade.id}~${e.grade.name}`,[e])}),Array.from(t)}AddGradeAndGroup(){this.loading.creating=!0,this.api.Post("/Grades/GradeAndGroup",Object.assign(Object.assign({},this.gradeOrGroupForm.value),{teacherId:this.user.teacher.id})).subscribe(e=>{var t;this.toast.ShowSuccess("Se ha agregado el grupo"),null===(t=this.addGradeAndGroupModal)||void 0===t||t.hide(),this.GetTeacherGradesAndGroups(),this.loading.creating=!1},e=>{console.error("Error creating grade and group",e),this.toast.ShowError("Error al agregar grupo"),this.loading.creating=!1})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(g.sM),u.Y36(p.k),u.Y36(h.f))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-teacher-profile"]],viewQuery:function(e,t){if(1&e&&u.Gf(q,5),2&e){let e;u.iGM(e=u.CRH())&&(t.addGradeAndGroupModal=e.first)}},decls:48,vars:19,consts:[[1,"content"],[1,"d-flex","flex-wrap","align-items-center","gap-48"],[1,"profile-tab","clickeable",3,"ngClass","click"],["src","assets/icons/badge-success.png",1,"mr-3"],[1,"mr-4"],["src","assets/icons/edit-success.png"],["src","assets/icons/bookmarks-success.png",1,"mr-3"],[1,"mt-5",3,"ngSwitch"],[4,"ngSwitchCase"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","addGradeAndGroupModal",1,"modal","fade",3,"config"],["addGradeAndGroupModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],[1,"input-container"],["type","text","placeholder","Grado","formControlName","grade",1,"form-control","no-icon",3,"keyup.enter"],[3,"control"],["type","text","placeholder","Grupo","formControlName","group",1,"form-control","no-icon",3,"keyup.enter"],[1,"modal-footer","justify-content-between"],[1,"btn","btn-outline-primary","modal-btn",3,"disabled","click"],[1,"btn","btn-primary","modal-btn",3,"disabled","click"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","first-time-configuration",1,"modal","fade",3,"config"],["addGradeModal","bs-modal"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"profile-form",3,"formGroup"],[1,"w-100"],[1,"input-icon-container","text-center"],["src","assets/icons/user.png"],["type","text","placeholder","Nombre","formControlName","name",1,"form-control",3,"keyup.enter"],["src","assets/icons/mail.png"],["type","text","placeholder","Correo","formControlName","email",1,"form-control",3,"keyup.enter"],["src","assets/icons/users-group.png"],["type","text","placeholder","Puesto de trabajo","formControlName","workTitle",1,"form-control",3,"keyup.enter"],["src","assets/icons/phone.png"],["type","text","placeholder","Tel\xe9fono","formControlName","phone",1,"form-control",3,"keyup.enter"],["src","assets/icons/school.png"],["type","text","placeholder","Nombre de la escuela","formControlName","name",1,"form-control",3,"keyup.enter"],["src","assets/icons/location.png"],["type","text","placeholder","Direccion de la escuela","formControlName","address",1,"form-control",3,"keyup.enter"],["src","assets/icons/user-phone.png"],["type","text","placeholder","Tel\xe9fono de la escuela","formControlName","phone",1,"form-control",3,"keyup.enter"],[1,"d-flex","justify-content-between","w-100","mt-3"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"subjects","mb-5"],[3,"data","subjects","onChange",4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","btn-card",3,"click"],[1,"zmdi","zmdi-plus-box","zmdi-hc-5x"],[3,"data","subjects","onChange"]],template:function(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.NdJ("click",function(){return t.activeTab="profile"}),u._UZ(3,"img",3),u.TgZ(4,"span",4),u._uU(5,"Mis datos"),u.qZA(),u._UZ(6,"img",5),u.qZA(),u.TgZ(7,"div",2),u.NdJ("click",function(){return t.activeTab="subjects"}),u._UZ(8,"img",6),u.TgZ(9,"span",4),u._uU(10,"Mis cursos impartidos"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"div",7),u.YNc(12,w,51,12,"div",8),u.YNc(13,k,5,1,"div",8),u.qZA(),u.qZA(),u.TgZ(14,"div",9,10),u.TgZ(16,"div",11),u.TgZ(17,"div",12),u.TgZ(18,"div",13),u.TgZ(19,"h2",14),u._uU(20,"Agregar grupo"),u.qZA(),u.qZA(),u.TgZ(21,"div",15),u.TgZ(22,"form",16),u.TgZ(23,"div",17),u.TgZ(24,"div",18),u.TgZ(25,"div",19),u.TgZ(26,"input",20),u.NdJ("keyup.enter",function(){return t.AddGradeAndGroup()}),u.qZA(),u.qZA(),u._UZ(27,"app-control-messages",21),u.qZA(),u.TgZ(28,"div",18),u.TgZ(29,"div",19),u.TgZ(30,"input",22),u.NdJ("keyup.enter",function(){return t.AddGradeAndGroup()}),u.qZA(),u.qZA(),u._UZ(31,"app-control-messages",21),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"div",23),u.TgZ(33,"button",24),u.NdJ("click",function(){return u.CHM(e),u.MAs(15).hide()}),u._uU(34," Cancelar "),u.qZA(),u.TgZ(35,"button",25),u.NdJ("click",function(){return t.AddGradeAndGroup()}),u._uU(36," Agregar "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(37,"div",26,27),u.TgZ(39,"div",11),u.TgZ(40,"div",12),u.TgZ(41,"div",13),u.TgZ(42,"h2",14),u._uU(43,"Agregar grupo"),u.qZA(),u.qZA(),u._UZ(44,"div",15),u.TgZ(45,"div",28),u.TgZ(46,"button",29),u.NdJ("click",function(){return u.CHM(e),u.MAs(38).hide(),t.nav.GoToUserRoute("mis-estudiantes")}),u._uU(47," Continuar "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}2&e&&(u.xp6(2),u.Q6J("ngClass",u.VKq(13,M,"profile"==t.activeTab)),u.xp6(5),u.Q6J("ngClass",u.VKq(15,M,"subjects"==t.activeTab)),u.xp6(4),u.Q6J("ngSwitch",t.activeTab),u.xp6(1),u.Q6J("ngSwitchCase","profile"),u.xp6(1),u.Q6J("ngSwitchCase","subjects"),u.xp6(1),u.Q6J("config",u.DdM(17,C)),u.xp6(8),u.Q6J("formGroup",t.gradeOrGroupForm),u.xp6(5),u.Q6J("control",t.gradeOrGroupForm.get("grade")),u.xp6(4),u.Q6J("control",t.gradeOrGroupForm.get("group")),u.xp6(2),u.Q6J("disabled",t.loading.creating),u.xp6(2),u.Q6J("disabled",t.loading.creating),u.xp6(2),u.Q6J("config",u.DdM(18,C)),u.xp6(9),u.Q6J("disabled",t.loading.uploading))},directives:[o.mk,o.RF,o.n9,d.oB,a.JL,a._Y,a.sg,a.Fj,a.JJ,a.u,m.w,o.sg,T],styles:[".active[_ngcontent-%COMP%]{border:2px solid var(--green-1,#26d7a4)}.profile-tab[_ngcontent-%COMP%]{display:flex;align-items:center;height:60px;border-radius:12px;background:var(--blue-light,#f2f8ff);padding:12px;color:var(--gray-1,#3d5e81);font-size:24px;font-family:Mulish}.gap-48[_ngcontent-%COMP%]{grid-gap:48px;gap:48px}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:400px;max-width:100%}.profile-form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{margin-bottom:12px}.subjects[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;grid-gap:48px;gap:48px}.subjects[_ngcontent-%COMP%]   .btn-card[_ngcontent-%COMP%]{width:465px;height:460px;border-radius:24px!important;display:flex;align-items:center;justify-content:center}"]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.u5,o.ez,i.A0,a.UX,s.G,d.zk.forRoot()]]}),e})();const U=[{path:"",component:_}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.u5,o.ez,i.A0,c.b,a.UX,s.G,d.zk.forRoot(),y,n.Bz.forChild(U)]]}),e})()},5821:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var o=r(7368);let n=(()=>{class e{constructor(){}static GetValidatorErrorMessage(e,t){return[{name:"required",label:"Campo requerido"},{name:"invalidRFC",label:"No tiene el formato adecuado"},{name:"invalidEmailAddress",label:"Correo inv\xe1lido"},{name:"invalidPassword",label:"Las contrase\xf1as no coinciden"},{name:"minlength",label:`M\xednimo ${t.requiredLength} caracteres `},{name:"maxlength",label:`M\xe1ximo ${t.requiredLength} caracteres `},{name:"invalidNumber",label:"Solo n\xfameros enteros, o con decimal"},{name:"invalidIntegerNumber",label:"Solo n\xfameros enteros"},{name:"matchstring",label:`${t.matchStringCustomLabel?t.matchStringCustomLabel:"El texto no coincide"}`}].find(t=>t.name==e)}static matchString(e,t=null){return r=>r.value?e==r.value?null:t?{matchstring:{requiredString:e,matchStringCustomLabel:t}}:{matchstring:e}:null}static CheckOnlyIntegerNumbers(e){return(null==e?void 0:e.value)?/^[0-9]+$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidIntegerNumber:!0}:null:{invalidIntegerNumber:!0}:null}static CheckOnlyNumbers(e){return(null==e?void 0:e.value)?/^[1-9]\d*\.?\d*$/.test(null==e?void 0:e.value)?0==(null==e?void 0:e.value)?{invalidNumber:!0}:null:{invalidNumber:!0}:null}static EmailValidator(e){return(null==e?void 0:e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/))?null:{invalidEmailAddress:!0}}static RfcValidator(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.value.match(/^([A-Z\xd1&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/))?null:{invalidRFC:!0}}}return e.password="",e.confirmPassword="",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);