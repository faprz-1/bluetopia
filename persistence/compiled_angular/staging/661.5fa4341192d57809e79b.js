(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[661],{7661:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ProjectCalendarModule:()=>M});var a=n(1116),i=n(2320),r=n(4391),o=n(1041),s=n(6050),c=n(5470),d=n(7368),l=n(1392),g=n(407),h=n(9355);function u(t,e){if(1&t&&(d.TgZ(0,"th",10),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.xp6(1),d.hij(" ",t.name," ")}}function p(t,e){if(1&t&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&t){const t=e.$implicit,n=d.oxw(4);d.xp6(1),d.hij(" ",n.GetEventName(t)," ")}}function m(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",14),d.TgZ(1,"div",15),d.TgZ(2,"span",16),d._uU(3),d.qZA(),d.TgZ(4,"img",17),d.NdJ("click",function(){d.CHM(t);const e=d.oxw().$implicit;return d.oxw(2).AddEvent(e)}),d.qZA(),d.qZA(),d.TgZ(5,"div",18),d.YNc(6,p,2,1,"div",19),d.qZA(),d.qZA()}if(2&t){const t=d.oxw().$implicit,e=d.oxw(2);d.xp6(3),d.hij(" ",e.FormatDay(t.day)," "),d.xp6(3),d.Q6J("ngForOf",e.GetEventsOfDate(e.year+"-"+(e.currentMonth+1)+"-"+t.day))}}function f(t,e){if(1&t&&(d.TgZ(0,"td"),d.YNc(1,m,7,2,"div",13),d.qZA()),2&t){const t=e.$implicit;d.xp6(1),d.Q6J("ngIf",t.day)}}function v(t,e){if(1&t&&(d.TgZ(0,"tr",11),d.YNc(1,f,2,1,"td",12),d.qZA()),2&t){const t=e.$implicit;d.xp6(1),d.Q6J("ngForOf",t)}}let y=(()=>{class t{constructor(t,e,n){this.api=t,this.nav=e,this.activatedRoute=n,this.grade=null,this.group=null,this.templateId=null,this.strategyId=null,this.weekDays=[{value:1,name:"Lunes"},{value:2,name:"Martes"},{value:3,name:"Miercoles"},{value:4,name:"Jueves"},{value:5,name:"Viernes"},{value:6,name:"Sabado"},{value:0,name:"Domingo"}],this.year=h().get("year"),this.currentMonth=h().get("month"),this.events=[],this.month=[]}get previousMonth(){return--this.currentMonth}get nextMonth(){return++this.currentMonth}get monthAndYear(){return h(`${this.year}-${this.currentMonth+1}-01`).format("MMMM YYYY")}ngOnInit(){this.GetParams(),h.locale("es"),this.PopulateMonth(this.currentMonth)}GetParams(){this.activatedRoute.params.subscribe(t=>{this.strategyId=t.strategyId,this.GetStrategyEvents()})}PopulateMonth(t){-1==t?(t=this.currentMonth=11,this.year--):12==t&&(t=this.currentMonth=0,this.year++);const e=h().month(t).daysInMonth();let n=1,a=n,i=this.weekDays.map(t=>Object.assign({},t));for(this.month=[];n<=e;){let e=h(`${this.year}-${t+1}-${n}`),r=h(`${this.year}-${t+1}-${a}`);const o=e.weekday();o==this.weekDays[0].value&&r.weekday()==this.weekDays[6].value&&(this.month.push(i),i=this.weekDays.map(t=>Object.assign({},t))),i.find(t=>o==t.value).day=n,a=n,n++}i[0].day&&this.month.push(i)}GetStrategyEvents(){this.api.Get(`/Events/OfStrategy/${this.strategyId}`).subscribe(t=>{console.log(t),this.events=t},t=>{console.error("Erro getting month events",t)})}FormatDay(t){let e="";return"number"==typeof t&&(e=String(t)),1==e.length?`0${e}`:e}AddEvent(t){this.nav.GoToUserRoute(`estrategias/${this.strategyId}/calendario/nuevo-evento/${this.year}-${this.currentMonth+1}-${t.day}`)}GetEventsOfDate(t=""){let e=t.split("-");return 1==e[1].length&&(e[1]=`0${e[1]}`),1==e[2].length&&(e[2]=`0${e[2]}`),(t=e.join("-"))?this.events.filter(e=>e.date.includes(t)):[]}GetEventName(t){return t.start?t.start:t.parcialProduct?`${t.parcialProduct.name}`:"Sin nombre"}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.sM),d.Y36(g.f),d.Y36(i.gz))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-event-calendar"]],inputs:{grade:"grade",group:"group",templateId:"templateId",strategyId:"strategyId"},decls:14,vars:3,consts:[[1,"calendar"],[1,"d-flex","justify-content-center","align-items-center"],["src","assets/icons/left.png","alt","left",1,"control-icon","clickeable",3,"click"],[1,"month-year","text-capitalize"],["src","assets/icons/right.png","alt","left",1,"control-icon","clickeable",3,"click"],[1,"calendar-table"],["class","text-center",4,"ngFor","ngForOf"],["class","calendar-week",4,"ngFor","ngForOf"],[1,"calendar-grid"],[1,"calendar-weekdays"],[1,"text-center"],[1,"calendar-week"],[4,"ngFor","ngForOf"],["class","calendar-day",4,"ngIf"],[1,"calendar-day"],[1,"day-title-row"],[1,"day-title"],["width","24","src","assets/icons/add-circle.png","alt","add",1,"clickeable",3,"click"],[1,"day-events"],["class","day-event",4,"ngFor","ngForOf"],[1,"day-event"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"img",2),d.NdJ("click",function(){return e.PopulateMonth(e.previousMonth)}),d.qZA(),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"img",4),d.NdJ("click",function(){return e.PopulateMonth(e.nextMonth)}),d.qZA(),d.qZA(),d.TgZ(6,"table",5),d.TgZ(7,"thead"),d.TgZ(8,"tr"),d.YNc(9,u,2,1,"th",6),d.qZA(),d.qZA(),d.TgZ(10,"tbody"),d.YNc(11,v,2,1,"tr",7),d.qZA(),d.qZA(),d.TgZ(12,"div",8),d._UZ(13,"div",9),d.qZA(),d.qZA()),2&t&&(d.xp6(4),d.hij(" ",e.monthAndYear," "),d.xp6(5),d.Q6J("ngForOf",e.weekDays),d.xp6(2),d.Q6J("ngForOf",e.month))},directives:[a.sg,a.O5],styles:[".month-year[_ngcontent-%COMP%]{color:#587594;font-size:1.75rem;margin:0 1.6rem}.control-icon[_ngcontent-%COMP%]{width:-webkit-min-content;width:min-content;height:-webkit-min-content;height:min-content}.calendar-table[_ngcontent-%COMP%]{margin:0 auto;border-collapse:initial;border-spacing:1rem}.calendar-week[_ngcontent-%COMP%]{grid-gap:1rem;gap:1rem}.calendar-day[_ngcontent-%COMP%]{width:140px;height:120px;flex-grow:1;border:1px solid #26d7a4;padding:.8rem}.day-title-row[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;margin-bottom:.1rem}.day-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;line-height:24px}.day-events[_ngcontent-%COMP%]{width:100%;height:calc(100% - 24px - .1rem);overflow:hidden;font-size:.8rem}.day-event[_ngcontent-%COMP%]{text-align:center;width:100%;padding-bottom:.4rem;border-bottom:2px solid #587594}"]}),t})();function Z(t,e){if(1&t&&d._UZ(0,"app-event-calendar",10),2&t){const t=d.oxw();d.Q6J("grade",t.grade)("group",t.group)("templateId",t.templateId)("strategyId",t.strategyId)}}let b=(()=>{class t{constructor(t,e,n,a){this.api=t,this.activatedRoute=e,this.nav=n,this.modalService=a,this.modalRef=null,this.loading={params:!0}}ngOnInit(){this.GetParams()}OpenModal(t){this.modalRef=this.modalService.show(t,{backdrop:"static"})}CloseModal(){this.modalRef&&this.modalRef.hide()}GetParams(){this.activatedRoute.params.subscribe(t=>{this.grade=t.grade,this.group=t.group,this.templateId=t.templateId,this.strategyId=t.strategyId,this.loading.params=!1})}GoBack(){this.nav.GoToUserRoute("mis-estudiantes")}GetStrategyEvents(){}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.sM),d.Y36(i.gz),d.Y36(g.f),d.Y36(c.tT))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-project-calendar"]],decls:16,vars:1,consts:[[1,"content"],[1,"row-header"],[1,"title"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"back-section"],["src","assets/icons/back-arrow.png","alt","back-arrow",1,"back-icon","clickeable",3,"click"],[1,"subtitle"],[3,"grade","group","templateId","strategyId",4,"ngIf"],[1,"d-flex","justify-content-end","mb-5"],[1,"btn","btn-primary","btn-bigger",3,"click"],[3,"grade","group","templateId","strategyId"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d._UZ(2,"div"),d.TgZ(3,"div",2),d._uU(4," Calendario "),d.qZA(),d._UZ(5,"div"),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"div",4),d.TgZ(8,"img",5),d.NdJ("click",function(){return e.GoBack()}),d.qZA(),d.qZA(),d.TgZ(9,"div",6),d._uU(10," Planea tus estrategias para cada d\xeda "),d.qZA(),d._UZ(11,"div"),d.qZA(),d.YNc(12,Z,1,4,"app-event-calendar",7),d.TgZ(13,"div",8),d.TgZ(14,"button",9),d.NdJ("click",function(){return e.GoBack()}),d._uU(15," Continuar "),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(12),d.Q6J("ngIf",!e.loading.params))},directives:[a.O5,y],styles:[".title[_ngcontent-%COMP%]{color:#26d7a4}.subtitle[_ngcontent-%COMP%]{font-size:1.75rem;color:#587594;font-weight:700}"]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.u5,a.ez,r.A0,o.UX,s.G,c.zk.forRoot()]]}),t})();const k=[{path:"",component:b}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.u5,a.ez,r.A0,o.UX,w,s.G,c.zk.forRoot(),i.Bz.forChild(k)]]}),t})()}}]);