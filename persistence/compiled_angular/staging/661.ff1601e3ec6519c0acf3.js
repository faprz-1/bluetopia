(self.webpackChunktemplate_web=self.webpackChunktemplate_web||[]).push([[661],{7661:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ProjectCalendarModule:()=>x});var a=n(1116),i=n(2894),s=n(4391),r=n(1041),o=n(6050),c=n(5470),l=n(7368),d=n(1392),g=n(407),h=n(9355),u=n(529);function m(t,e){if(1&t&&(l.TgZ(0,"th",10),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.hij(" ",t.name," ")}}function p(t,e){if(1&t&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&t){const t=e.$implicit,n=l.oxw(4);l.xp6(1),l.hij(" ",n.GetEventName(t)," ")}}function y(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",14),l.TgZ(1,"div",15),l.TgZ(2,"span",16),l._uU(3),l.qZA(),l.TgZ(4,"img",17),l.NdJ("click",function(){l.CHM(t);const e=l.oxw().$implicit;return l.oxw(2).AddEvent(e)}),l.qZA(),l.qZA(),l.TgZ(5,"div",18),l.YNc(6,p,2,1,"div",19),l.qZA(),l.qZA()}if(2&t){const t=l.oxw().$implicit,e=l.oxw(2);l.xp6(3),l.hij(" ",e.FormatDay(t.day)," "),l.xp6(3),l.Q6J("ngForOf",e.GetEventsOfDate(e.year+"-"+(e.currentMonth+1)+"-"+t.day))}}function v(t,e){if(1&t&&(l.TgZ(0,"td"),l.YNc(1,y,7,2,"div",13),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Q6J("ngIf",t.day)}}function f(t,e){if(1&t&&(l.TgZ(0,"tr",11),l.YNc(1,v,2,1,"td",12),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Q6J("ngForOf",t)}}let Z=(()=>{class t{constructor(t,e,n){this.api=t,this.nav=e,this.activatedRoute=n,this.strategyId=null,this.events=[],this.weekDays=[{value:1,name:"Lunes"},{value:2,name:"Martes"},{value:3,name:"Miercoles"},{value:4,name:"Jueves"},{value:5,name:"Viernes"},{value:6,name:"Sabado"},{value:0,name:"Domingo"}],this.year=h().tz(u.N.timeZone).get("year"),this.currentMonth=h().tz(u.N.timeZone).get("month"),this.month=[]}get previousMonth(){return--this.currentMonth}get nextMonth(){return++this.currentMonth}get monthAndYear(){return h(`${this.year}-${this.currentMonth+1}-01`).format("MMMM YYYY")}ngOnInit(){this.GetParams(),h.locale("es"),this.PopulateMonth(this.currentMonth)}GetParams(){this.activatedRoute.params.subscribe(t=>{this.strategyId=t.strategyId})}PopulateMonth(t){-1==t?(t=this.currentMonth=11,this.year--):12==t&&(t=this.currentMonth=0,this.year++);const e=h().tz(u.N.timeZone).month(t).daysInMonth();let n=1,a=n,i=this.weekDays.map(t=>Object.assign({},t));for(this.month=[];n<=e;){let e=h(`${this.year}-${t+1}-${n}`),s=h(`${this.year}-${t+1}-${a}`);const r=e.weekday();r==this.weekDays[0].value&&s.weekday()==this.weekDays[6].value&&(this.month.push(i),i=this.weekDays.map(t=>Object.assign({},t))),i.find(t=>r==t.value).day=n,a=n,n++}i[0].day&&this.month.push(i)}FormatDay(t){let e="";return"number"==typeof t&&(e=String(t)),1==e.length?`0${e}`:e}AddEvent(t){this.nav.GoToUserRoute(`mis-estrategias/${this.strategyId}/calendario/${this.year}-${this.currentMonth+1}-${t.day}`)}GetEventsOfDate(t=""){let e=t.split("-");return 1==e[1].length&&(e[1]=`0${e[1]}`),1==e[2].length&&(e[2]=`0${e[2]}`),(t=e.join("-"))?this.events.filter(e=>!!e.date&&e.date.includes(t)):[]}GetEventName(t){return t.name?t.name:t.parcialProduct?`${t.parcialProduct.name}`:"Sin nombre"}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.sM),l.Y36(g.f),l.Y36(i.gz))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-event-calendar"]],inputs:{strategyId:"strategyId",events:"events"},decls:14,vars:3,consts:[[1,"calendar"],[1,"d-flex","align-items-center",2,"gap","1.6rem"],["src","assets/icons/left.png","alt","left",1,"control-icon","clickeable",3,"click"],[1,"month-year","text-capitalize"],["src","assets/icons/right.png","alt","left",1,"control-icon","clickeable",3,"click"],[1,"calendar-table"],["class","text-center",4,"ngFor","ngForOf"],["class","calendar-week",4,"ngFor","ngForOf"],[1,"calendar-grid"],[1,"calendar-weekdays"],[1,"text-center"],[1,"calendar-week"],[4,"ngFor","ngForOf"],["class","calendar-day",4,"ngIf"],[1,"calendar-day"],[1,"day-title-row"],[1,"day-title"],["width","24","src","assets/icons/add-circle.png","alt","add",1,"clickeable",3,"click"],[1,"day-events"],["class","day-event",4,"ngFor","ngForOf"],[1,"day-event"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"img",2),l.NdJ("click",function(){return e.PopulateMonth(e.previousMonth)}),l.qZA(),l.TgZ(3,"div",3),l._uU(4),l.qZA(),l.TgZ(5,"img",4),l.NdJ("click",function(){return e.PopulateMonth(e.nextMonth)}),l.qZA(),l.qZA(),l.TgZ(6,"table",5),l.TgZ(7,"thead"),l.TgZ(8,"tr"),l.YNc(9,m,2,1,"th",6),l.qZA(),l.qZA(),l.TgZ(10,"tbody"),l.YNc(11,f,2,1,"tr",7),l.qZA(),l.qZA(),l.TgZ(12,"div",8),l._UZ(13,"div",9),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.hij(" ",e.monthAndYear," "),l.xp6(5),l.Q6J("ngForOf",e.weekDays),l.xp6(2),l.Q6J("ngForOf",e.month))},directives:[a.sg,a.O5],styles:[".month-year[_ngcontent-%COMP%]{color:#587594;font-size:1.75rem}.control-icon[_ngcontent-%COMP%]{width:-webkit-min-content;width:min-content;height:-webkit-min-content;height:min-content}.calendar-table[_ngcontent-%COMP%]{border-collapse:initial;border-spacing:1rem}.calendar-week[_ngcontent-%COMP%]{grid-gap:1rem;gap:1rem}.calendar-day[_ngcontent-%COMP%]{width:140px;height:120px;flex-grow:1;border:1px solid #26d7a4;padding:.8rem}.day-title-row[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;margin-bottom:.1rem}.day-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;line-height:24px}.day-events[_ngcontent-%COMP%]{width:100%;height:calc(100% - 24px - .1rem);overflow-y:auto;font-size:.8rem}.day-events[_ngcontent-%COMP%]   .day-event[_ngcontent-%COMP%]:last-child{border-bottom:none}.day-event[_ngcontent-%COMP%]{text-align:center;width:100%;padding-bottom:.4rem;border-bottom:2px solid #587594}"]}),t})();function w(t,e){if(1&t&&l._UZ(0,"app-event-calendar",9),2&t){const t=l.oxw();l.Q6J("strategyId",t.strategyId)("events",t.strategy.events)}}let b=(()=>{class t{constructor(t,e,n,a){this.api=t,this.activatedRoute=e,this.nav=n,this.modalService=a,this.strategyId=null,this.strategy=null,this.modalRef=null}ngOnInit(){this.GetParams()}OpenModal(t){this.modalRef=this.modalService.show(t,{backdrop:"static"})}CloseModal(){this.modalRef&&this.modalRef.hide()}GetParams(){this.activatedRoute.params.subscribe(t=>{this.strategyId=t.strategyId,this.GetStrategy()})}GetStrategy(){this.api.Get(`/Strategies/${this.strategyId}`).subscribe(t=>{this.strategy=t},t=>{console.error("Error getting strategy",t)})}GoBack(){this.nav.GoToUserRoute("mis-estudiantes")}GetStrategyEvents(){}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.sM),l.Y36(i.gz),l.Y36(g.f),l.Y36(c.tT))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-project-calendar"]],decls:12,vars:1,consts:[[1,"content"],[1,"row-header","mb-5"],[1,"back-section"],["src","assets/icons/back-arrow.png","alt","back-arrow",1,"back-icon","clickeable",3,"click"],[1,"d-flex","flex-column","mb-4",2,"gap","12px"],[1,"title","mb-0"],[1,"subtitle"],[1,"text"],[3,"strategyId","events",4,"ngIf"],[3,"strategyId","events"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"img",3),l.NdJ("click",function(){return e.GoBack()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l._uU(6," Calendario "),l.qZA(),l.TgZ(7,"div",6),l._uU(8," Planea tus estrategias para cada d\xeda "),l.qZA(),l.TgZ(9,"div",7),l._uU(10," Selecciona el d\xeda para visualizar las actividades planeadas para esa fecha y crear nuevas "),l.qZA(),l.qZA(),l.YNc(11,w,1,2,"app-event-calendar",8),l.qZA()),2&t&&(l.xp6(11),l.Q6J("ngIf",!!e.strategy))},directives:[a.O5,Z],styles:[".title[_ngcontent-%COMP%]{color:#26d7a4}.subtitle[_ngcontent-%COMP%]{font-size:1.75rem;color:#587594;font-weight:700}"]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.u5,a.ez,s.A0,r.UX,o.G,c.zk.forRoot()]]}),t})();const k=[{path:"",component:b}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.u5,a.ez,s.A0,r.UX,M,o.G,c.zk.forRoot(),i.Bz.forChild(k)]]}),t})()}}]);